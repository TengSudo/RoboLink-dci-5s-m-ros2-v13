<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.5.1"/>
    <title>cri_lib.cri_controller API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../cri_lib.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;cri_lib</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#CRIController">CRIController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#CRIController.ALIVE_JOG_INTERVAL_SEC">ALIVE_JOG_INTERVAL_SEC</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.ACTIVE_JOG_INTERVAL_SEC">ACTIVE_JOG_INTERVAL_SEC</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.RECEIVE_TIMEOUT_SEC">RECEIVE_TIMEOUT_SEC</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.DEFAULT_ANSWER_TIMEOUT">DEFAULT_ANSWER_TIMEOUT</a>
                        </li>
                        <li>
                                <a class="class" href="#CRIController.MotionType">CRIController.MotionType</a>
                                        <ul class="memberlist">
                                    <li>
                                            <a class="variable" href="#CRIController.MotionType.Joint">Joint</a>
                                    </li>
                                    <li>
                                            <a class="variable" href="#CRIController.MotionType.CartBase">CartBase</a>
                                    </li>
                                    <li>
                                            <a class="variable" href="#CRIController.MotionType.CartTool">CartTool</a>
                                    </li>
                                    <li>
                                            <a class="variable" href="#CRIController.MotionType.Platform">Platform</a>
                                    </li>
                            </ul>

                        </li>
                        <li>
                                <a class="variable" href="#CRIController.robot_state">robot_state</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.robot_state_lock">robot_state_lock</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.parser">parser</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.connected">connected</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.sock">sock</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.socket_write_lock">socket_write_lock</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.can_mode">can_mode</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.can_queue">can_queue</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.jog_thread">jog_thread</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.receive_thread">receive_thread</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.sent_command_counter_lock">sent_command_counter_lock</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.sent_command_counter">sent_command_counter</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.answer_events_lock">answer_events_lock</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.answer_events">answer_events</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.error_messages">error_messages</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.status_callback">status_callback</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.live_jog_active">live_jog_active</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.jog_intervall">jog_intervall</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.jog_speeds">jog_speeds</a>
                        </li>
                        <li>
                                <a class="variable" href="#CRIController.jog_speeds_lock">jog_speeds_lock</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.connect">connect</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.close">close</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.wait_for_status_update">wait_for_status_update</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.register_status_callback">register_status_callback</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.reset">reset</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.enable">enable</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.disable">disable</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.set_active_control">set_active_control</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.zero_all_joints">zero_all_joints</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.reference_all_joints">reference_all_joints</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.reference_single_joint">reference_single_joint</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.get_referencing_info">get_referencing_info</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.wait_for_kinematics_ready">wait_for_kinematics_ready</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.move_joints">move_joints</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.move_joints_relative">move_joints_relative</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.move_cartesian">move_cartesian</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.move_base_relative">move_base_relative</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.move_tool_relative">move_tool_relative</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.stop_move">stop_move</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.start_jog">start_jog</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.stop_jog">stop_jog</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.set_jog_values">set_jog_values</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.set_motion_type">set_motion_type</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.set_override">set_override</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.set_dout">set_dout</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.set_din">set_din</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.set_global_signal">set_global_signal</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.load_programm">load_programm</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.load_logic_programm">load_logic_programm</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.start_programm">start_programm</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.stop_programm">stop_programm</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.pause_programm">pause_programm</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.upload_file">upload_file</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.enable_can_bridge">enable_can_bridge</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.can_send">can_send</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.can_receive">can_receive</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.get_board_temperatures">get_board_temperatures</a>
                        </li>
                        <li>
                                <a class="function" href="#CRIController.get_motor_temperatures">get_motor_temperatures</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../cri_lib.html">cri_lib</a><wbr>.cri_controller    </h1>

                
                        <input id="mod-cri_controller-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-cri_controller-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="kn">import</span> <span class="nn">logging</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="kn">import</span> <span class="nn">socket</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="kn">import</span> <span class="nn">threading</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span><span class="p">,</span> <span class="n">time</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Callable</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="kn">from</span> <span class="nn">queue</span> <span class="kn">import</span> <span class="n">Queue</span><span class="p">,</span> <span class="n">Empty</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="kn">from</span> <span class="nn">.robot_state</span> <span class="kn">import</span> <span class="n">RobotState</span><span class="p">,</span> <span class="n">KinematicsState</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="kn">from</span> <span class="nn">.cri_protocol_parser</span> <span class="kn">import</span> <span class="n">CRIProtocolParser</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="kn">from</span> <span class="nn">.cri_errors</span> <span class="kn">import</span> <span class="n">CRICommandTimeOutError</span><span class="p">,</span> <span class="n">CRIConnectionError</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a><span class="k">class</span> <span class="nc">CRIController</span><span class="p">:</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="sd">    Class implementing the CRI network protocol for igus Robot Control.</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a>    <span class="n">ALIVE_JOG_INTERVAL_SEC</span> <span class="o">=</span> <span class="mf">0.2</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a>    <span class="n">ACTIVE_JOG_INTERVAL_SEC</span> <span class="o">=</span> <span class="mf">0.02</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a>    <span class="n">RECEIVE_TIMEOUT_SEC</span> <span class="o">=</span> <span class="mi">5</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a>    <span class="n">DEFAULT_ANSWER_TIMEOUT</span> <span class="o">=</span> <span class="mf">10.0</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a>    <span class="k">class</span> <span class="nc">MotionType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Robot Motion Type for Jogging&quot;&quot;&quot;</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a>        <span class="n">Joint</span> <span class="o">=</span> <span class="s2">&quot;Joint&quot;</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a>        <span class="n">CartBase</span> <span class="o">=</span> <span class="s2">&quot;CartBase&quot;</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a>        <span class="n">CartTool</span> <span class="o">=</span> <span class="s2">&quot;CartTool&quot;</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a>        <span class="n">Platform</span> <span class="o">=</span> <span class="s2">&quot;Platform&quot;</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">robot_state</span><span class="p">:</span> <span class="n">RobotState</span> <span class="o">=</span> <span class="n">RobotState</span><span class="p">()</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">robot_state_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">CRIProtocolParser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">robot_state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">robot_state_lock</span><span class="p">)</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sock</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">socket_write_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">can_queue</span><span class="p">:</span> <span class="n">Queue</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_bg_alivejog_thread</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">receive_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a>            <span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_bg_receive_thread</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a>        <span class="p">)</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">error_messages</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">status_callback</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">live_jog_active</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_intervall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ALIVE_JOG_INTERVAL_SEC</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a>            <span class="s2">&quot;A1&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a>            <span class="s2">&quot;A2&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a>            <span class="s2">&quot;A3&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a>            <span class="s2">&quot;A4&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a>            <span class="s2">&quot;A5&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a>            <span class="s2">&quot;A6&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a>            <span class="s2">&quot;E1&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a>            <span class="s2">&quot;E2&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a>            <span class="s2">&quot;E3&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>        <span class="p">}</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3920</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a><span class="sd">        Connect to iRC.</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="sd">        Parameters</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a><span class="sd">        ----------</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a><span class="sd">        host : str</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a><span class="sd">            IP address or hostname of iRC</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a><span class="sd">        port : int</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a><span class="sd">            port of iRC</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a><span class="sd">        Returns</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a><span class="sd">        -------</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a><span class="sd">        bool</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a><span class="sd">            True if connected</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a><span class="sd">            False if not connected</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>  <span class="c1"># Set a timeout of 0.1 seconds</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a>            <span class="n">ip</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostbyname</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">ip</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> Robot connected: </span><span class="si">%s</span><span class="s2">:</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a>            <span class="c1"># Start receiving commands</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">receive_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a>            <span class="c1"># Start sending ALIVEJOG message</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">jog_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>        <span class="k">except</span> <span class="ne">ConnectionRefusedError</span><span class="p">:</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>                <span class="sa">f</span><span class="s2">&quot;Connection refused: Unable to connect to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a>            <span class="p">)</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a><span class="sd">        Close network connection. Might block for a while waiting for the threads to finish.</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a>            <span class="k">return</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;QUIT&quot;</span><span class="p">)</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jog_thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">jog_thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">receive_thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">receive_thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>    <span class="k">def</span> <span class="nf">_register_answer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">answer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span><span class="p">:</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="n">answer_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a>    <span class="k">def</span> <span class="nf">_send_command</span><span class="p">(</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a>        <span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a>        <span class="n">register_answer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>        <span class="n">fixed_answer_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sends the given command to iRC.</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a><span class="sd">        Parameters</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a><span class="sd">        ----------</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a><span class="sd">        command : str</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a><span class="sd">            Command to be sent without `CRISTART`, counter and `CRIEND`</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a><span class="sd">        Returns</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a><span class="sd">        -------</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a><span class="sd">        int | None</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a><span class="sd">            If the command was sent the message_id gets returned or None if there was an error.</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Not connected. Use connect() to establish a connection.&quot;</span><span class="p">)</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a>            <span class="k">raise</span> <span class="n">CRIConnectionError</span><span class="p">(</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a>                <span class="s2">&quot;Not connected. Use connect() to establish a connection.&quot;</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>            <span class="p">)</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter_lock</span><span class="p">:</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a>            <span class="n">command_counter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter</span> <span class="o">&gt;=</span> <span class="mi">9999</span><span class="p">:</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a>        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CRISTART </span><span class="si">{</span><span class="n">command_counter</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">command</span><span class="si">}</span><span class="s2"> CRIEND&quot;</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>        <span class="k">if</span> <span class="n">register_answer</span><span class="p">:</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a>            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span><span class="p">:</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a>                <span class="k">if</span> <span class="n">fixed_answer_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="n">fixed_answer_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">command_counter</span><span class="p">)]</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a>            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket_write_lock</span><span class="p">:</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Sent command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>            <span class="k">return</span> <span class="n">command_counter</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to send command: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a>            <span class="k">if</span> <span class="n">register_answer</span><span class="p">:</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a>                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span><span class="p">:</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a>                    <span class="k">if</span> <span class="n">fixed_answer_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a>                        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="n">fixed_answer_name</span><span class="p">]</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a>                        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">command_counter</span><span class="p">)]</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a>            <span class="k">raise</span> <span class="n">CRIConnectionError</span><span class="p">(</span><span class="s2">&quot;ConnectionLost&quot;</span><span class="p">)</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a>    <span class="k">def</span> <span class="nf">_bg_alivejog_thread</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a><span class="sd">        Background Thread sending alivejog messages to keep connection alive.</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">live_jog_active</span><span class="p">:</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a>                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds_lock</span><span class="p">:</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>                    <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;ALIVEJOG </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;A1&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;A2&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;A3&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;A4&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;A5&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;A6&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;E1&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;E2&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;E3&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>                <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;ALIVEJOG 0 0 0 0 0 0 0 0 0&quot;</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;AliveJog Thread: Connection lost.&quot;</span><span class="p">)</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>                <span class="k">return</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>            <span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_intervall</span><span class="p">)</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>    <span class="k">def</span> <span class="nf">_bg_receive_thread</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a><span class="sd">        Background thread receiving data and parsing it to the robot state.</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>        <span class="n">message_buffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>                <span class="n">recv_buffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">4096</span><span class="p">)</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>            <span class="k">except</span> <span class="ne">TimeoutError</span><span class="p">:</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a>                <span class="k">continue</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>            <span class="k">if</span> <span class="n">recv_buffer</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Receive Thread: Connection lost.&quot;</span><span class="p">)</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>                <span class="k">return</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>            <span class="n">message_buffer</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">recv_buffer</span><span class="p">)</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>            <span class="n">continue_parsing</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>            <span class="k">while</span> <span class="n">continue_parsing</span><span class="p">:</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a>                <span class="c1"># check for an end of message</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>                <span class="n">end_idx</span> <span class="o">=</span> <span class="n">message_buffer</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;CRIEND&quot;</span><span class="p">)</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a>                <span class="k">if</span> <span class="n">end_idx</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>                    <span class="n">start_idx</span> <span class="o">=</span> <span class="n">message_buffer</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;CRISTART&quot;</span><span class="p">)</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>                    <span class="c1"># check if there is a complete message</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>                    <span class="k">if</span> <span class="n">start_idx</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>                        <span class="n">message</span> <span class="o">=</span> <span class="n">message_buffer</span><span class="p">[</span><span class="n">start_idx</span> <span class="p">:</span> <span class="n">end_idx</span> <span class="o">+</span> <span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>                    <span class="c1"># check if there is data left in the buffer</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">message_buffer</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">end_idx</span> <span class="o">+</span> <span class="mi">7</span><span class="p">:</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>                        <span class="n">message_buffer</span> <span class="o">=</span> <span class="n">message_buffer</span><span class="p">[</span><span class="n">end_idx</span> <span class="o">+</span> <span class="mi">7</span> <span class="p">:]</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a>                        <span class="n">message_buffer</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a>                    <span class="n">continue_parsing</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a>    <span class="k">def</span> <span class="nf">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Waits for an answer to a message.</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a><span class="sd">        The answer event will be removed after the call, even if there was a timeout. Choose timeout accordingly.</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a><span class="sd">        Parameters</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a><span class="sd">        ----------</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a><span class="sd">        message_id : int</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a><span class="sd">            message id of sent message of which an answer is expected</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a><span class="sd">        timeout : float | None</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a><span class="sd">            timeout for wait in seconds. `None` will wait indefinetly</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a><span class="sd">        Returns</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a><span class="sd">        -------</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a><span class="sd">        None | str</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a><span class="sd">            returns `None` if an answer was received with no error</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a><span class="sd">            returns an error message if an `CMDERROR` was received</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a><span class="sd">        Raises</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a><span class="sd">        ------</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a><span class="sd">        CRITimeoutError</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a><span class="sd">            raised if no answer was received in given timeout</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span><span class="p">:</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>            <span class="k">if</span> <span class="n">message_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">:</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>            <span class="n">wait_event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="n">message_id</span><span class="p">]</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a>        <span class="c1"># prevent deadlock through answer_events_lock</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a>        <span class="n">success</span> <span class="o">=</span> <span class="n">wait_event</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>            <span class="k">raise</span> <span class="n">CRICommandTimeOutError</span><span class="p">()</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span><span class="p">:</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="n">message_id</span><span class="p">]</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>            <span class="k">if</span> <span class="n">message_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_messages</span><span class="p">:</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a>                <span class="n">error_msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="n">message_id</span><span class="p">]</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="n">message_id</span><span class="p">]</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a>                <span class="k">return</span> <span class="n">error_msg</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a>                <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>    <span class="k">def</span> <span class="nf">_parse_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal function to parse a message. If an answer event is registered for a certain msg_id it is triggered.&quot;&quot;&quot;</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>        <span class="k">if</span> <span class="s2">&quot;STATUS&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">message</span><span class="p">:</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Received: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">notification</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_message</span><span class="p">(</span><span class="n">message</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>            <span class="k">if</span> <span class="n">notification</span><span class="p">[</span><span class="s2">&quot;answer&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;status&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">status_callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">robot_state</span><span class="p">)</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>            <span class="k">if</span> <span class="n">notification</span><span class="p">[</span><span class="s2">&quot;answer&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;CAN&quot;</span><span class="p">:</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">can_queue</span><span class="o">.</span><span class="n">put_nowait</span><span class="p">(</span><span class="n">notification</span><span class="p">[</span><span class="s2">&quot;can&quot;</span><span class="p">])</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span><span class="p">:</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a>                <span class="n">msg_id</span> <span class="o">=</span> <span class="n">notification</span><span class="p">[</span><span class="s2">&quot;answer&quot;</span><span class="p">]</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a>                <span class="k">if</span> <span class="n">msg_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">:</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a>                    <span class="k">if</span> <span class="s2">&quot;error&quot;</span> <span class="ow">in</span> <span class="n">notification</span><span class="p">:</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="n">msg_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">notification</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="n">msg_id</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>    <span class="k">def</span> <span class="nf">wait_for_status_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for next STATUS message.</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a><span class="sd">        Parameters</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a><span class="sd">        ----------</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a><span class="sd">        timeout : float | None</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a><span class="sd">            Maximum wait time, infinite if `None`</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a><span class="sd">        Raises</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a><span class="sd">        ------</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a><span class="sd">        CRITimeoutError</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a><span class="sd">            raised if no status update was received in given timeout</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">)</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>    <span class="k">def</span> <span class="nf">register_status_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a callback which is called every time a STATUS message was parsed to the state.</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a><span class="sd">        The callback must have the following definition:</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a><span class="sd">        def callback(state: RobotState)</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a><span class="sd">        Keep the callback as fast as possible as it will be excute by the receive thread and no messages will be processed, while is runs.</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a><span class="sd">        Also keep thread safety in mind, as the callback will be excuted by the receive thread.</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a><span class="sd">        Parameters</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a><span class="sd">        ----------</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a><span class="sd">        callback : Callable</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a><span class="sd">            callback function to be called, pass `None` to deregister a callback</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">status_callback</span> <span class="o">=</span> <span class="n">callback</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset robot</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a><span class="sd">        Returns</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a><span class="sd">        -------</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a><span class="sd">        bool:</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD Reset&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a>                <span class="p">)</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in RESET command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>    <span class="k">def</span> <span class="nf">enable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Enable robot</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a><span class="sd">           An potential error message received from the robot will be logged with priority DEBUG</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a><span class="sd">        Returns</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a><span class="sd">        -------</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a><span class="sd">        bool</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD Enable&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>                <span class="p">)</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in ENABLE command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a>    <span class="k">def</span> <span class="nf">disable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Disable robot</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a><span class="sd">        Returns</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a><span class="sd">        -------</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a><span class="sd">        bool</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD Disable&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>                <span class="p">)</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in DISABLE command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>    <span class="k">def</span> <span class="nf">set_active_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">active</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Acquire or return active control of robot</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a><span class="sd">        Parameters</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a><span class="sd">        ----------</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a><span class="sd">        active : bool</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a><span class="sd">            `True` acquire active control</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a><span class="sd">            `False` return active control</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>                <span class="sa">f</span><span class="s2">&quot;CMD SetActive </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">active</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>                <span class="kc">True</span><span class="p">,</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>                <span class="sa">f</span><span class="s2">&quot;Active_</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">active</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>            <span class="p">)</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>            <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>        <span class="p">):</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>                    <span class="sa">f</span><span class="s2">&quot;Active_</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">active</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>                <span class="p">)</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in set active control command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a>    <span class="k">def</span> <span class="nf">zero_all_joints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set all joints to zero</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a><span class="sd">        Returns</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a><span class="sd">        -------</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a><span class="sd">        bool</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD SetJointsToZero&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a>                <span class="p">)</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in SetJointsToZero command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>    <span class="k">def</span> <span class="nf">reference_all_joints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reference all joints. Long timout of 30 seconds.</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a><span class="sd">        Returns</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a><span class="sd">        -------</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a><span class="sd">        bool</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD ReferenceAllJoints&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in ReferenceAllJoints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>    <span class="k">def</span> <span class="nf">reference_single_joint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">joint</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reference a single joint. Long timout of 30 seconds.</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a><span class="sd">        Parameters</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a><span class="sd">        ----------</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a><span class="sd">        joint : str</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a><span class="sd">            joint name with either &#39;A&#39;, &#39;E&#39;, &#39;T&#39; or &#39;P&#39; as first character and an corresponding index as second</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a><span class="sd">        Returns</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a><span class="sd">        -------</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a><span class="sd">        bool</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a>            <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;A&quot;</span> <span class="ow">or</span> <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;E&quot;</span> <span class="ow">or</span> <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;T&quot;</span> <span class="ow">or</span> <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;P&quot;</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a>        <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">joint</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a>            <span class="n">joint_msg</span> <span class="o">=</span> <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">joint</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>            <span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CMD ReferenceSingleJoint </span><span class="si">{</span><span class="n">joint_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a>        <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in ReferenceSingleJoint command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a>    <span class="k">def</span> <span class="nf">get_referencing_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reference all joints. Long timout of 30 seconds.</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a><span class="sd">        Returns</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a><span class="sd">        -------</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a><span class="sd">        bool</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD GetReferencingInfo&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;info_referencing&quot;</span><span class="p">)</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a>            <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>        <span class="p">):</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>                    <span class="s2">&quot;info_referencing&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>                <span class="p">)</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in GetReferencingInfo command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>    <span class="k">def</span> <span class="nf">wait_for_kinematics_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait until drive state is indicated as ready.</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a><span class="sd">        Parameters</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a><span class="sd">        ----------</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a><span class="sd">        timeout : float</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a><span class="sd">            maximum time to wait in seconds</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a><span class="sd">        Returns</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a><span class="sd">        -------</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a><span class="sd">        bool</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a><span class="sd">            `True`if drives are ready, `False` if not ready or timeout</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>        <span class="n">new_timeout</span> <span class="o">=</span> <span class="n">timeout</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>        <span class="k">while</span> <span class="n">new_timeout</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_status_update</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">new_timeout</span><span class="p">)</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">robot_state</span><span class="o">.</span><span class="n">kinematics_state</span> <span class="o">==</span> <span class="n">KinematicsState</span><span class="o">.</span><span class="n">NO_ERROR</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">robot_state</span><span class="o">.</span><span class="n">combined_axes_error</span> <span class="o">==</span> <span class="s2">&quot;NoError&quot;</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>            <span class="p">):</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>            <span class="n">new_timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="o">-</span> <span class="p">(</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>    <span class="k">def</span> <span class="nf">move_joints</span><span class="p">(</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>        <span class="n">A1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>        <span class="n">A2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>        <span class="n">A3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>        <span class="n">A4</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>        <span class="n">A5</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>        <span class="n">A6</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Absolute joint move</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a><span class="sd">        Parameters</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a><span class="sd">        ----------</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a><span class="sd">        A1-A6, E1-E3 : float</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a><span class="sd">            Target angles of axes</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a><span class="sd">        velocity : float</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a><span class="sd">            Velocity in percent of maximum velocity, range 1.0-100.0</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a>            <span class="sa">f</span><span class="s2">&quot;CMD Move Joint </span><span class="si">{</span><span class="n">A1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A4</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A5</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A6</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a>        <span class="p">)</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>                    <span class="p">)</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exec Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a>    <span class="k">def</span> <span class="nf">move_joints_relative</span><span class="p">(</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a>        <span class="n">A1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>        <span class="n">A2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a>        <span class="n">A3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a>        <span class="n">A4</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>        <span class="n">A5</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>        <span class="n">A6</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Relative joint move</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a><span class="sd">        Parameters</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a><span class="sd">        ----------</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a><span class="sd">        A1-A6, E1-E3 : float</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a><span class="sd">            Target angles of axes</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a><span class="sd">        velocity : float</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a><span class="sd">            Velocity in percent of maximum velocity, range 1.0-100.0</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD Move RelativeJoint </span><span class="si">{</span><span class="n">A1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A4</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A5</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A6</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>                    <span class="p">)</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a>                        <span class="s2">&quot;Exec Error in Move Joints Relative command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>                    <span class="p">)</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a>    <span class="k">def</span> <span class="nf">move_cartesian</span><span class="p">(</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a>        <span class="n">X</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>        <span class="n">Y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>        <span class="n">Z</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>        <span class="n">A</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>        <span class="n">B</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>        <span class="n">C</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>        <span class="n">frame</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#base&quot;</span><span class="p">,</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cartesian move</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a><span class="sd">        Parameters</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a><span class="sd">        ----------</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a><span class="sd">        X,Y,Z,A,B,C,E1-E3 : float</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a><span class="sd">            Target angles of axes</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a><span class="sd">        velocity : float</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a><span class="sd">            Velocity in mm/s</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a><span class="sd">        frame : str</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a><span class="sd">            frame of the coordinates, default is `#base`</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>            <span class="sa">f</span><span class="s2">&quot;CMD Move Cart </span><span class="si">{</span><span class="n">X</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Y</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Z</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">B</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">C</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">frame</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>        <span class="p">)</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a>                    <span class="p">)</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exec Error in Move Cartesian command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>    <span class="k">def</span> <span class="nf">move_base_relative</span><span class="p">(</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a>        <span class="n">X</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>        <span class="n">Y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>        <span class="n">Z</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>        <span class="n">A</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>        <span class="n">B</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a>        <span class="n">C</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Relative cartesian move in base coordinate system</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a><span class="sd">        Parameters</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a><span class="sd">        ----------</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a><span class="sd">        X,Y,Z,A,B,C,E1-E3 : float</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a><span class="sd">            Target angles of axes</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a><span class="sd">        velocity : float</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a><span class="sd">            Velocity in mm/s</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a><span class="sd">        frame : str</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a><span class="sd">            frame of the coordinates, default is `#base`</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>            <span class="sa">f</span><span class="s2">&quot;CMD Move RelativeBase </span><span class="si">{</span><span class="n">X</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Y</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Z</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">B</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">C</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>        <span class="p">)</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>                    <span class="p">)</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>                        <span class="s2">&quot;Exec Error in Move BaseRelative command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>                    <span class="p">)</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>    <span class="k">def</span> <span class="nf">move_tool_relative</span><span class="p">(</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>        <span class="n">X</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>        <span class="n">Y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>        <span class="n">Z</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a>        <span class="n">A</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>        <span class="n">B</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a>        <span class="n">C</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Relative cartesian move in tool coordinate system</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a><span class="sd">        Parameters</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a><span class="sd">        ----------</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a><span class="sd">        X,Y,Z,A,B,C,E1-E3 : float</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a><span class="sd">            Target angles of axes</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a><span class="sd">        velocity : float</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a><span class="sd">            Velocity in mm/s</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a><span class="sd">        frame : str</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a><span class="sd">            frame of the coordinates, default is `#base`</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>            <span class="sa">f</span><span class="s2">&quot;CMD Move RelativeTool </span><span class="si">{</span><span class="n">X</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Y</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Z</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">B</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">C</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>        <span class="p">)</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>                    <span class="p">)</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exec Error in Move BaseTool command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>    <span class="k">def</span> <span class="nf">stop_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop movement</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a><span class="sd">        Returns</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a><span class="sd">        -------</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a><span class="sd">        bool</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD Move Stop&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Stop command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>    <span class="k">def</span> <span class="nf">start_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;starts live jog. Set speeds via set_jog_values&quot;&quot;&quot;</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_intervall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ACTIVE_JOG_INTERVAL_SEC</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">live_jog_active</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>    <span class="k">def</span> <span class="nf">stop_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;stops live jog.&quot;&quot;&quot;</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">live_jog_active</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_intervall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ALIVE_JOG_INTERVAL_SEC</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>            <span class="s2">&quot;A1&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>            <span class="s2">&quot;A2&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>            <span class="s2">&quot;A3&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>            <span class="s2">&quot;A4&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>            <span class="s2">&quot;A5&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>            <span class="s2">&quot;A6&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>            <span class="s2">&quot;E1&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>            <span class="s2">&quot;E2&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a>            <span class="s2">&quot;E3&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>        <span class="p">}</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a>    <span class="k">def</span> <span class="nf">set_jog_values</span><span class="p">(</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a>        <span class="n">A1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a>        <span class="n">A2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>        <span class="n">A3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>        <span class="n">A4</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>        <span class="n">A5</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>        <span class="n">A6</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a><span class="sd">        Sets live jog axes speeds.</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a><span class="sd">        Parameters</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a><span class="sd">        ----------</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a><span class="sd">            A1-A6, E1-3 : float</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a><span class="sd">                axes speeds in percent of maximum speed</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds_lock</span><span class="p">:</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>                <span class="s2">&quot;A1&quot;</span><span class="p">:</span> <span class="n">A1</span><span class="p">,</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>                <span class="s2">&quot;A2&quot;</span><span class="p">:</span> <span class="n">A2</span><span class="p">,</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>                <span class="s2">&quot;A3&quot;</span><span class="p">:</span> <span class="n">A3</span><span class="p">,</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>                <span class="s2">&quot;A4&quot;</span><span class="p">:</span> <span class="n">A4</span><span class="p">,</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>                <span class="s2">&quot;A5&quot;</span><span class="p">:</span> <span class="n">A5</span><span class="p">,</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>                <span class="s2">&quot;A6&quot;</span><span class="p">:</span> <span class="n">A6</span><span class="p">,</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>                <span class="s2">&quot;E1&quot;</span><span class="p">:</span> <span class="n">E1</span><span class="p">,</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>                <span class="s2">&quot;E2&quot;</span><span class="p">:</span> <span class="n">E2</span><span class="p">,</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>                <span class="s2">&quot;E3&quot;</span><span class="p">:</span> <span class="n">E3</span><span class="p">,</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>            <span class="p">}</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>    <span class="k">def</span> <span class="nf">set_motion_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">motion_type</span><span class="p">:</span> <span class="n">MotionType</span><span class="p">):</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set motion type</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a><span class="sd">        Parameters</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a><span class="sd">        ----------</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a><span class="sd">        motion_type : MotionType</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a><span class="sd">            motion type</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a><span class="sd">        Returns</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a><span class="sd">        -------</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a><span class="sd">        bool</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD MotionType</span><span class="si">{</span><span class="n">motion_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>                <span class="p">)</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in MotionType command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>    <span class="k">def</span> <span class="nf">set_override</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">override</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set override</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a><span class="sd">        Parameters</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a><span class="sd">        ----------</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a><span class="sd">        override : float</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a><span class="sd">            override percent</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a><span class="sd">        Returns</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a><span class="sd">        -------</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a><span class="sd">        bool</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD Override </span><span class="si">{</span><span class="n">override</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a>                <span class="p">)</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Override command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a>    <span class="k">def</span> <span class="nf">set_dout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set digital out</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a><span class="sd">        Parameters</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a><span class="sd">        ----------</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a><span class="sd">        id : int</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a><span class="sd">            index of DOUT (0 to 63)</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a><span class="sd">        value : bool</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a><span class="sd">            value to set DOUT to</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a><span class="sd">        Returns</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a><span class="sd">        -------</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a><span class="sd">        bool</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&gt;</span> <span class="mi">63</span><span class="p">):</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD DOUT </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>                <span class="p">)</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in DOUT command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>    <span class="k">def</span> <span class="nf">set_din</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set digital inout, only available in simulation</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a><span class="sd">        Parameters</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a><span class="sd">        ----------</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a><span class="sd">        id : int</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a><span class="sd">            index of DIN (0 to 63)</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a><span class="sd">        value : bool</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a><span class="sd">            value to set DIN to</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a><span class="sd">        Returns</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a><span class="sd">        -------</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a><span class="sd">        bool</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&gt;</span> <span class="mi">63</span><span class="p">):</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD DIN </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>                <span class="p">)</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in DIN command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>    <span class="k">def</span> <span class="nf">set_global_signal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set global signal</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a><span class="sd">        Parameters</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a><span class="sd">        ----------</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a><span class="sd">        id : int</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a><span class="sd">            index of signal (0 to 99)</span>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a><span class="sd">        value : bool</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a><span class="sd">            value to set signal to</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a><span class="sd">        Returns</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a><span class="sd">        -------</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a><span class="sd">        bool</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&gt;</span> <span class="mi">99</span><span class="p">):</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD GSIG </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a>                <span class="p">)</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in DIN command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a>    <span class="k">def</span> <span class="nf">load_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">program_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a program file from disk into the robot controller</span>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a><span class="sd">        Parameters</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a><span class="sd">        ----------</span>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a><span class="sd">        program_name : str</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a><span class="sd">            the name in the directory /Data/Programs/, e.g. “test.xml”</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a><span class="sd">        Returns</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a><span class="sd">        -------</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a><span class="sd">        bool</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD LoadProgram </span><span class="si">{</span><span class="n">program_name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>                <span class="p">)</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in load_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>    <span class="k">def</span> <span class="nf">load_logic_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">program_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a logic program file from disk into the robot controller</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a><span class="sd">        Parameters</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a><span class="sd">        ----------</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a><span class="sd">        program_name : str</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a><span class="sd">            the name in the directory /Data/Programs/, e.g. “test.xml”</span>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a><span class="sd">        Returns</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a><span class="sd">        -------</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a><span class="sd">        bool</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD LoadLogicProgram </span><span class="si">{</span><span class="n">program_name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>                <span class="p">)</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in load_logic_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>    <span class="k">def</span> <span class="nf">start_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Start currently loaded Program</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a><span class="sd">        Returns</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a><span class="sd">        -------</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a><span class="sd">        bool</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;CMD StartProgram&quot;</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a>                <span class="p">)</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in start_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>    <span class="k">def</span> <span class="nf">stop_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop currently running Program</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a><span class="sd">        Returns</span>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a><span class="sd">        -------</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a><span class="sd">        bool</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;CMD StopProgram&quot;</span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a>                <span class="p">)</span>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in stop_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a>    <span class="k">def</span> <span class="nf">pause_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pause currently running Program</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a><span class="sd">        Returns</span>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a><span class="sd">        -------</span>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a><span class="sd">        bool</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;CMD PauseProgram&quot;</span>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a>                <span class="p">)</span>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in pause_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a>    <span class="k">def</span> <span class="nf">upload_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span> <span class="n">target_directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Uploads file to iRC into `/Data/&lt;target_directory&gt;`</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a><span class="sd">        Parameters</span>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a><span class="sd">        ----------</span>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a><span class="sd">        path : str | Path</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a><span class="sd">            Path to file which should be uploaded</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a><span class="sd">        target_directory : str</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a><span class="sd">            directory on iRC `/Data/&lt;target_directory&gt;` into which file will be uploaded, e.g. `Programs` for normal robot programs</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a><span class="sd">        Returns</span>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a><span class="sd">        -------</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a><span class="sd">        bool</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a><span class="sd">            `True` file was uploaded successfully</span>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a><span class="sd">            `False` there was an error during upload</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">path</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a>                <span class="k">while</span> <span class="n">line</span> <span class="o">:=</span> <span class="n">fp</span><span class="o">.</span><span class="n">readline</span><span class="p">():</span>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a>                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a>        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error reading </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD UploadFileInit </span><span class="si">{</span><span class="n">target_directory</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;/&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span><span class="si">}</span><span class="s2"> 0&quot;</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a>            <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD UploadFileLine </span><span class="si">{</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;CMD UploadFileFinish&quot;</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a>    <span class="k">def</span> <span class="nf">enable_can_bridge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Enables or diables CAN bridge mode. All other functions are disabled in CAN bridge mode.</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a><span class="sd">        Parameters</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a><span class="sd">        ----------</span>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a><span class="sd">        enabled : bool</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a><span class="sd">            `True` bridge mode enabled</span>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a><span class="sd">            `False` bridge mode disabled</span>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a>        <span class="k">if</span> <span class="n">enabled</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CANBridge SwitchOn&quot;</span><span class="p">)</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CANBridge SwitchOff&quot;</span><span class="p">)</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>    <span class="k">def</span> <span class="nf">can_send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytearray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Send CAN message in CAN bridge mode.</span>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a><span class="sd">        Parameters</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a><span class="sd">        ----------</span>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a><span class="sd">        msg_id : int</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a><span class="sd">            message id of can message</span>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a><span class="sd">        length : int</span>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a><span class="sd">            length of data to send. Actual length used of the 8 data bytes</span>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a><span class="sd">        data : bytearray</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a><span class="sd">            data for CAN message always 8 bytes</span>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span><span class="p">:</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;can_send: CAN mode not enabled&quot;</span><span class="p">)</span>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>            <span class="k">return</span>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CANBridge Msg ID </span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2"> Len </span><span class="si">{</span><span class="n">length</span><span class="si">}</span><span class="s2"> Data &quot;</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a>            <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a>        <span class="p">)</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a>    <span class="k">def</span> <span class="nf">can_receive</span><span class="p">(</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Receive CAN message in CAN bridge mode from the recveive queue.</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a><span class="sd">        Returns</span>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a><span class="sd">        -------</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a><span class="sd">        tuple[int, int, bytearray] | None</span>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a><span class="sd">            Returns a tuple of (msg_id, length, data) if a message was received or None if nothing was received within the timeout.</span>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span><span class="p">:</span>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;can_receive: CAN mode not enabled&quot;</span><span class="p">)</span>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a>            <span class="k">return</span>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a>            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_queue</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">blocking</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a>        <span class="k">except</span> <span class="n">Empty</span><span class="p">:</span>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a>
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a>        <span class="k">return</span> <span class="n">item</span>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a>    <span class="k">def</span> <span class="nf">get_board_temperatures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Receive motor controller PCB temperatures and save in robot state</span>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a><span class="sd">            Parameters</span>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a><span class="sd">            ----------</span>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a><span class="sd">            blocking: bool</span>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a><span class="sd">                wait for response, always returns True if not waiting</span>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a><span class="sd">            </span>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a><span class="sd">            timeout: float | None</span>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a><span class="sd">                timeout for waiting in seconds or None for infinite waiting</span>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1383"><a href="#L-1383"><span class="linenos">1383</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;SYSTEM GetBoardTemp&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;info_boardtemp&quot;</span><span class="p">)</span>
</span><span id="L-1384"><a href="#L-1384"><span class="linenos">1384</span></a>            <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="L-1385"><a href="#L-1385"><span class="linenos">1385</span></a>        <span class="p">):</span>
</span><span id="L-1386"><a href="#L-1386"><span class="linenos">1386</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1387"><a href="#L-1387"><span class="linenos">1387</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-1388"><a href="#L-1388"><span class="linenos">1388</span></a>                    <span class="s2">&quot;info_boardtemp&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-1389"><a href="#L-1389"><span class="linenos">1389</span></a>                <span class="p">)</span>
</span><span id="L-1390"><a href="#L-1390"><span class="linenos">1390</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1391"><a href="#L-1391"><span class="linenos">1391</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in GetBoardTemp command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-1392"><a href="#L-1392"><span class="linenos">1392</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1393"><a href="#L-1393"><span class="linenos">1393</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1394"><a href="#L-1394"><span class="linenos">1394</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1395"><a href="#L-1395"><span class="linenos">1395</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1396"><a href="#L-1396"><span class="linenos">1396</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1397"><a href="#L-1397"><span class="linenos">1397</span></a>        
</span><span id="L-1398"><a href="#L-1398"><span class="linenos">1398</span></a>    <span class="k">def</span> <span class="nf">get_motor_temperatures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1399"><a href="#L-1399"><span class="linenos">1399</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Receive motor temperatures and save in robot state</span>
</span><span id="L-1400"><a href="#L-1400"><span class="linenos">1400</span></a>
</span><span id="L-1401"><a href="#L-1401"><span class="linenos">1401</span></a><span class="sd">            Parameters</span>
</span><span id="L-1402"><a href="#L-1402"><span class="linenos">1402</span></a><span class="sd">            ----------</span>
</span><span id="L-1403"><a href="#L-1403"><span class="linenos">1403</span></a><span class="sd">            blocking: bool</span>
</span><span id="L-1404"><a href="#L-1404"><span class="linenos">1404</span></a><span class="sd">                wait for response, always returns True if not waiting</span>
</span><span id="L-1405"><a href="#L-1405"><span class="linenos">1405</span></a><span class="sd">            </span>
</span><span id="L-1406"><a href="#L-1406"><span class="linenos">1406</span></a><span class="sd">            timeout: float | None</span>
</span><span id="L-1407"><a href="#L-1407"><span class="linenos">1407</span></a><span class="sd">                timeout for waiting in seconds or None for infinite waiting</span>
</span><span id="L-1408"><a href="#L-1408"><span class="linenos">1408</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1409"><a href="#L-1409"><span class="linenos">1409</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1410"><a href="#L-1410"><span class="linenos">1410</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;SYSTEM GetMotorTemp&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;info_motortemp&quot;</span><span class="p">)</span>
</span><span id="L-1411"><a href="#L-1411"><span class="linenos">1411</span></a>            <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="L-1412"><a href="#L-1412"><span class="linenos">1412</span></a>        <span class="p">):</span>
</span><span id="L-1413"><a href="#L-1413"><span class="linenos">1413</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1414"><a href="#L-1414"><span class="linenos">1414</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="L-1415"><a href="#L-1415"><span class="linenos">1415</span></a>                    <span class="s2">&quot;info_motortemp&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="L-1416"><a href="#L-1416"><span class="linenos">1416</span></a>                <span class="p">)</span>
</span><span id="L-1417"><a href="#L-1417"><span class="linenos">1417</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1418"><a href="#L-1418"><span class="linenos">1418</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in GetMotorTemp command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="L-1419"><a href="#L-1419"><span class="linenos">1419</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1420"><a href="#L-1420"><span class="linenos">1420</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1421"><a href="#L-1421"><span class="linenos">1421</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1422"><a href="#L-1422"><span class="linenos">1422</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1423"><a href="#L-1423"><span class="linenos">1423</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            </section>
                <section id="CRIController">
                            <input id="CRIController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">CRIController</span>:

                <label class="view-source-button" for="CRIController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController-18"><a href="#CRIController-18"><span class="linenos">  18</span></a><span class="k">class</span> <span class="nc">CRIController</span><span class="p">:</span>
</span><span id="CRIController-19"><a href="#CRIController-19"><span class="linenos">  19</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CRIController-20"><a href="#CRIController-20"><span class="linenos">  20</span></a><span class="sd">    Class implementing the CRI network protocol for igus Robot Control.</span>
</span><span id="CRIController-21"><a href="#CRIController-21"><span class="linenos">  21</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CRIController-22"><a href="#CRIController-22"><span class="linenos">  22</span></a>
</span><span id="CRIController-23"><a href="#CRIController-23"><span class="linenos">  23</span></a>    <span class="n">ALIVE_JOG_INTERVAL_SEC</span> <span class="o">=</span> <span class="mf">0.2</span>
</span><span id="CRIController-24"><a href="#CRIController-24"><span class="linenos">  24</span></a>    <span class="n">ACTIVE_JOG_INTERVAL_SEC</span> <span class="o">=</span> <span class="mf">0.02</span>
</span><span id="CRIController-25"><a href="#CRIController-25"><span class="linenos">  25</span></a>    <span class="n">RECEIVE_TIMEOUT_SEC</span> <span class="o">=</span> <span class="mi">5</span>
</span><span id="CRIController-26"><a href="#CRIController-26"><span class="linenos">  26</span></a>    <span class="n">DEFAULT_ANSWER_TIMEOUT</span> <span class="o">=</span> <span class="mf">10.0</span>
</span><span id="CRIController-27"><a href="#CRIController-27"><span class="linenos">  27</span></a>
</span><span id="CRIController-28"><a href="#CRIController-28"><span class="linenos">  28</span></a>    <span class="k">class</span> <span class="nc">MotionType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="CRIController-29"><a href="#CRIController-29"><span class="linenos">  29</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Robot Motion Type for Jogging&quot;&quot;&quot;</span>
</span><span id="CRIController-30"><a href="#CRIController-30"><span class="linenos">  30</span></a>
</span><span id="CRIController-31"><a href="#CRIController-31"><span class="linenos">  31</span></a>        <span class="n">Joint</span> <span class="o">=</span> <span class="s2">&quot;Joint&quot;</span>
</span><span id="CRIController-32"><a href="#CRIController-32"><span class="linenos">  32</span></a>        <span class="n">CartBase</span> <span class="o">=</span> <span class="s2">&quot;CartBase&quot;</span>
</span><span id="CRIController-33"><a href="#CRIController-33"><span class="linenos">  33</span></a>        <span class="n">CartTool</span> <span class="o">=</span> <span class="s2">&quot;CartTool&quot;</span>
</span><span id="CRIController-34"><a href="#CRIController-34"><span class="linenos">  34</span></a>        <span class="n">Platform</span> <span class="o">=</span> <span class="s2">&quot;Platform&quot;</span>
</span><span id="CRIController-35"><a href="#CRIController-35"><span class="linenos">  35</span></a>
</span><span id="CRIController-36"><a href="#CRIController-36"><span class="linenos">  36</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CRIController-37"><a href="#CRIController-37"><span class="linenos">  37</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">robot_state</span><span class="p">:</span> <span class="n">RobotState</span> <span class="o">=</span> <span class="n">RobotState</span><span class="p">()</span>
</span><span id="CRIController-38"><a href="#CRIController-38"><span class="linenos">  38</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">robot_state_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="CRIController-39"><a href="#CRIController-39"><span class="linenos">  39</span></a>
</span><span id="CRIController-40"><a href="#CRIController-40"><span class="linenos">  40</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">CRIProtocolParser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">robot_state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">robot_state_lock</span><span class="p">)</span>
</span><span id="CRIController-41"><a href="#CRIController-41"><span class="linenos">  41</span></a>
</span><span id="CRIController-42"><a href="#CRIController-42"><span class="linenos">  42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="CRIController-43"><a href="#CRIController-43"><span class="linenos">  43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sock</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CRIController-44"><a href="#CRIController-44"><span class="linenos">  44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">socket_write_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="CRIController-45"><a href="#CRIController-45"><span class="linenos">  45</span></a>
</span><span id="CRIController-46"><a href="#CRIController-46"><span class="linenos">  46</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="CRIController-47"><a href="#CRIController-47"><span class="linenos">  47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">can_queue</span><span class="p">:</span> <span class="n">Queue</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>
</span><span id="CRIController-48"><a href="#CRIController-48"><span class="linenos">  48</span></a>
</span><span id="CRIController-49"><a href="#CRIController-49"><span class="linenos">  49</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_bg_alivejog_thread</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="CRIController-50"><a href="#CRIController-50"><span class="linenos">  50</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">receive_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span>
</span><span id="CRIController-51"><a href="#CRIController-51"><span class="linenos">  51</span></a>            <span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_bg_receive_thread</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span>
</span><span id="CRIController-52"><a href="#CRIController-52"><span class="linenos">  52</span></a>        <span class="p">)</span>
</span><span id="CRIController-53"><a href="#CRIController-53"><span class="linenos">  53</span></a>
</span><span id="CRIController-54"><a href="#CRIController-54"><span class="linenos">  54</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="CRIController-55"><a href="#CRIController-55"><span class="linenos">  55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="CRIController-56"><a href="#CRIController-56"><span class="linenos">  56</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="CRIController-57"><a href="#CRIController-57"><span class="linenos">  57</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="CRIController-58"><a href="#CRIController-58"><span class="linenos">  58</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">error_messages</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="CRIController-59"><a href="#CRIController-59"><span class="linenos">  59</span></a>
</span><span id="CRIController-60"><a href="#CRIController-60"><span class="linenos">  60</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">status_callback</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CRIController-61"><a href="#CRIController-61"><span class="linenos">  61</span></a>
</span><span id="CRIController-62"><a href="#CRIController-62"><span class="linenos">  62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">live_jog_active</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="CRIController-63"><a href="#CRIController-63"><span class="linenos">  63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_intervall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ALIVE_JOG_INTERVAL_SEC</span>
</span><span id="CRIController-64"><a href="#CRIController-64"><span class="linenos">  64</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="CRIController-65"><a href="#CRIController-65"><span class="linenos">  65</span></a>            <span class="s2">&quot;A1&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-66"><a href="#CRIController-66"><span class="linenos">  66</span></a>            <span class="s2">&quot;A2&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-67"><a href="#CRIController-67"><span class="linenos">  67</span></a>            <span class="s2">&quot;A3&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-68"><a href="#CRIController-68"><span class="linenos">  68</span></a>            <span class="s2">&quot;A4&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-69"><a href="#CRIController-69"><span class="linenos">  69</span></a>            <span class="s2">&quot;A5&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-70"><a href="#CRIController-70"><span class="linenos">  70</span></a>            <span class="s2">&quot;A6&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-71"><a href="#CRIController-71"><span class="linenos">  71</span></a>            <span class="s2">&quot;E1&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-72"><a href="#CRIController-72"><span class="linenos">  72</span></a>            <span class="s2">&quot;E2&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-73"><a href="#CRIController-73"><span class="linenos">  73</span></a>            <span class="s2">&quot;E3&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-74"><a href="#CRIController-74"><span class="linenos">  74</span></a>        <span class="p">}</span>
</span><span id="CRIController-75"><a href="#CRIController-75"><span class="linenos">  75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="CRIController-76"><a href="#CRIController-76"><span class="linenos">  76</span></a>
</span><span id="CRIController-77"><a href="#CRIController-77"><span class="linenos">  77</span></a>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3920</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-78"><a href="#CRIController-78"><span class="linenos">  78</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CRIController-79"><a href="#CRIController-79"><span class="linenos">  79</span></a><span class="sd">        Connect to iRC.</span>
</span><span id="CRIController-80"><a href="#CRIController-80"><span class="linenos">  80</span></a>
</span><span id="CRIController-81"><a href="#CRIController-81"><span class="linenos">  81</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-82"><a href="#CRIController-82"><span class="linenos">  82</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-83"><a href="#CRIController-83"><span class="linenos">  83</span></a><span class="sd">        host : str</span>
</span><span id="CRIController-84"><a href="#CRIController-84"><span class="linenos">  84</span></a><span class="sd">            IP address or hostname of iRC</span>
</span><span id="CRIController-85"><a href="#CRIController-85"><span class="linenos">  85</span></a><span class="sd">        port : int</span>
</span><span id="CRIController-86"><a href="#CRIController-86"><span class="linenos">  86</span></a><span class="sd">            port of iRC</span>
</span><span id="CRIController-87"><a href="#CRIController-87"><span class="linenos">  87</span></a>
</span><span id="CRIController-88"><a href="#CRIController-88"><span class="linenos">  88</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-89"><a href="#CRIController-89"><span class="linenos">  89</span></a><span class="sd">        -------</span>
</span><span id="CRIController-90"><a href="#CRIController-90"><span class="linenos">  90</span></a><span class="sd">        bool</span>
</span><span id="CRIController-91"><a href="#CRIController-91"><span class="linenos">  91</span></a><span class="sd">            True if connected</span>
</span><span id="CRIController-92"><a href="#CRIController-92"><span class="linenos">  92</span></a><span class="sd">            False if not connected</span>
</span><span id="CRIController-93"><a href="#CRIController-93"><span class="linenos">  93</span></a>
</span><span id="CRIController-94"><a href="#CRIController-94"><span class="linenos">  94</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-95"><a href="#CRIController-95"><span class="linenos">  95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
</span><span id="CRIController-96"><a href="#CRIController-96"><span class="linenos">  96</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>  <span class="c1"># Set a timeout of 0.1 seconds</span>
</span><span id="CRIController-97"><a href="#CRIController-97"><span class="linenos">  97</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="CRIController-98"><a href="#CRIController-98"><span class="linenos">  98</span></a>            <span class="n">ip</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostbyname</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>
</span><span id="CRIController-99"><a href="#CRIController-99"><span class="linenos">  99</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">ip</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
</span><span id="CRIController-100"><a href="#CRIController-100"><span class="linenos"> 100</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> Robot connected: </span><span class="si">%s</span><span class="s2">:</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
</span><span id="CRIController-101"><a href="#CRIController-101"><span class="linenos"> 101</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="CRIController-102"><a href="#CRIController-102"><span class="linenos"> 102</span></a>
</span><span id="CRIController-103"><a href="#CRIController-103"><span class="linenos"> 103</span></a>            <span class="c1"># Start receiving commands</span>
</span><span id="CRIController-104"><a href="#CRIController-104"><span class="linenos"> 104</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">receive_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="CRIController-105"><a href="#CRIController-105"><span class="linenos"> 105</span></a>
</span><span id="CRIController-106"><a href="#CRIController-106"><span class="linenos"> 106</span></a>            <span class="c1"># Start sending ALIVEJOG message</span>
</span><span id="CRIController-107"><a href="#CRIController-107"><span class="linenos"> 107</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">jog_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="CRIController-108"><a href="#CRIController-108"><span class="linenos"> 108</span></a>
</span><span id="CRIController-109"><a href="#CRIController-109"><span class="linenos"> 109</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-110"><a href="#CRIController-110"><span class="linenos"> 110</span></a>
</span><span id="CRIController-111"><a href="#CRIController-111"><span class="linenos"> 111</span></a>        <span class="k">except</span> <span class="ne">ConnectionRefusedError</span><span class="p">:</span>
</span><span id="CRIController-112"><a href="#CRIController-112"><span class="linenos"> 112</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="CRIController-113"><a href="#CRIController-113"><span class="linenos"> 113</span></a>                <span class="sa">f</span><span class="s2">&quot;Connection refused: Unable to connect to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-114"><a href="#CRIController-114"><span class="linenos"> 114</span></a>            <span class="p">)</span>
</span><span id="CRIController-115"><a href="#CRIController-115"><span class="linenos"> 115</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-116"><a href="#CRIController-116"><span class="linenos"> 116</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="CRIController-117"><a href="#CRIController-117"><span class="linenos"> 117</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="CRIController-118"><a href="#CRIController-118"><span class="linenos"> 118</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-119"><a href="#CRIController-119"><span class="linenos"> 119</span></a>
</span><span id="CRIController-120"><a href="#CRIController-120"><span class="linenos"> 120</span></a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-121"><a href="#CRIController-121"><span class="linenos"> 121</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CRIController-122"><a href="#CRIController-122"><span class="linenos"> 122</span></a><span class="sd">        Close network connection. Might block for a while waiting for the threads to finish.</span>
</span><span id="CRIController-123"><a href="#CRIController-123"><span class="linenos"> 123</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-124"><a href="#CRIController-124"><span class="linenos"> 124</span></a>
</span><span id="CRIController-125"><a href="#CRIController-125"><span class="linenos"> 125</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
</span><span id="CRIController-126"><a href="#CRIController-126"><span class="linenos"> 126</span></a>            <span class="k">return</span>
</span><span id="CRIController-127"><a href="#CRIController-127"><span class="linenos"> 127</span></a>
</span><span id="CRIController-128"><a href="#CRIController-128"><span class="linenos"> 128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;QUIT&quot;</span><span class="p">)</span>
</span><span id="CRIController-129"><a href="#CRIController-129"><span class="linenos"> 129</span></a>
</span><span id="CRIController-130"><a href="#CRIController-130"><span class="linenos"> 130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="CRIController-131"><a href="#CRIController-131"><span class="linenos"> 131</span></a>
</span><span id="CRIController-132"><a href="#CRIController-132"><span class="linenos"> 132</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jog_thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
</span><span id="CRIController-133"><a href="#CRIController-133"><span class="linenos"> 133</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">jog_thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="CRIController-134"><a href="#CRIController-134"><span class="linenos"> 134</span></a>
</span><span id="CRIController-135"><a href="#CRIController-135"><span class="linenos"> 135</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">receive_thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
</span><span id="CRIController-136"><a href="#CRIController-136"><span class="linenos"> 136</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">receive_thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="CRIController-137"><a href="#CRIController-137"><span class="linenos"> 137</span></a>
</span><span id="CRIController-138"><a href="#CRIController-138"><span class="linenos"> 138</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="CRIController-139"><a href="#CRIController-139"><span class="linenos"> 139</span></a>
</span><span id="CRIController-140"><a href="#CRIController-140"><span class="linenos"> 140</span></a>    <span class="k">def</span> <span class="nf">_register_answer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">answer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-141"><a href="#CRIController-141"><span class="linenos"> 141</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span><span class="p">:</span>
</span><span id="CRIController-142"><a href="#CRIController-142"><span class="linenos"> 142</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="n">answer_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
</span><span id="CRIController-143"><a href="#CRIController-143"><span class="linenos"> 143</span></a>
</span><span id="CRIController-144"><a href="#CRIController-144"><span class="linenos"> 144</span></a>    <span class="k">def</span> <span class="nf">_send_command</span><span class="p">(</span>
</span><span id="CRIController-145"><a href="#CRIController-145"><span class="linenos"> 145</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CRIController-146"><a href="#CRIController-146"><span class="linenos"> 146</span></a>        <span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="CRIController-147"><a href="#CRIController-147"><span class="linenos"> 147</span></a>        <span class="n">register_answer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CRIController-148"><a href="#CRIController-148"><span class="linenos"> 148</span></a>        <span class="n">fixed_answer_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CRIController-149"><a href="#CRIController-149"><span class="linenos"> 149</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-150"><a href="#CRIController-150"><span class="linenos"> 150</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sends the given command to iRC.</span>
</span><span id="CRIController-151"><a href="#CRIController-151"><span class="linenos"> 151</span></a>
</span><span id="CRIController-152"><a href="#CRIController-152"><span class="linenos"> 152</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-153"><a href="#CRIController-153"><span class="linenos"> 153</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-154"><a href="#CRIController-154"><span class="linenos"> 154</span></a><span class="sd">        command : str</span>
</span><span id="CRIController-155"><a href="#CRIController-155"><span class="linenos"> 155</span></a><span class="sd">            Command to be sent without `CRISTART`, counter and `CRIEND`</span>
</span><span id="CRIController-156"><a href="#CRIController-156"><span class="linenos"> 156</span></a>
</span><span id="CRIController-157"><a href="#CRIController-157"><span class="linenos"> 157</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-158"><a href="#CRIController-158"><span class="linenos"> 158</span></a><span class="sd">        -------</span>
</span><span id="CRIController-159"><a href="#CRIController-159"><span class="linenos"> 159</span></a><span class="sd">        int | None</span>
</span><span id="CRIController-160"><a href="#CRIController-160"><span class="linenos"> 160</span></a><span class="sd">            If the command was sent the message_id gets returned or None if there was an error.</span>
</span><span id="CRIController-161"><a href="#CRIController-161"><span class="linenos"> 161</span></a>
</span><span id="CRIController-162"><a href="#CRIController-162"><span class="linenos"> 162</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-163"><a href="#CRIController-163"><span class="linenos"> 163</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
</span><span id="CRIController-164"><a href="#CRIController-164"><span class="linenos"> 164</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Not connected. Use connect() to establish a connection.&quot;</span><span class="p">)</span>
</span><span id="CRIController-165"><a href="#CRIController-165"><span class="linenos"> 165</span></a>            <span class="k">raise</span> <span class="n">CRIConnectionError</span><span class="p">(</span>
</span><span id="CRIController-166"><a href="#CRIController-166"><span class="linenos"> 166</span></a>                <span class="s2">&quot;Not connected. Use connect() to establish a connection.&quot;</span>
</span><span id="CRIController-167"><a href="#CRIController-167"><span class="linenos"> 167</span></a>            <span class="p">)</span>
</span><span id="CRIController-168"><a href="#CRIController-168"><span class="linenos"> 168</span></a>
</span><span id="CRIController-169"><a href="#CRIController-169"><span class="linenos"> 169</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter_lock</span><span class="p">:</span>
</span><span id="CRIController-170"><a href="#CRIController-170"><span class="linenos"> 170</span></a>            <span class="n">command_counter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter</span>
</span><span id="CRIController-171"><a href="#CRIController-171"><span class="linenos"> 171</span></a>
</span><span id="CRIController-172"><a href="#CRIController-172"><span class="linenos"> 172</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter</span> <span class="o">&gt;=</span> <span class="mi">9999</span><span class="p">:</span>
</span><span id="CRIController-173"><a href="#CRIController-173"><span class="linenos"> 173</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="CRIController-174"><a href="#CRIController-174"><span class="linenos"> 174</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-175"><a href="#CRIController-175"><span class="linenos"> 175</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">sent_command_counter</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="CRIController-176"><a href="#CRIController-176"><span class="linenos"> 176</span></a>
</span><span id="CRIController-177"><a href="#CRIController-177"><span class="linenos"> 177</span></a>        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CRISTART </span><span class="si">{</span><span class="n">command_counter</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">command</span><span class="si">}</span><span class="s2"> CRIEND&quot;</span>
</span><span id="CRIController-178"><a href="#CRIController-178"><span class="linenos"> 178</span></a>
</span><span id="CRIController-179"><a href="#CRIController-179"><span class="linenos"> 179</span></a>        <span class="k">if</span> <span class="n">register_answer</span><span class="p">:</span>
</span><span id="CRIController-180"><a href="#CRIController-180"><span class="linenos"> 180</span></a>            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span><span class="p">:</span>
</span><span id="CRIController-181"><a href="#CRIController-181"><span class="linenos"> 181</span></a>                <span class="k">if</span> <span class="n">fixed_answer_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-182"><a href="#CRIController-182"><span class="linenos"> 182</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="n">fixed_answer_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
</span><span id="CRIController-183"><a href="#CRIController-183"><span class="linenos"> 183</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-184"><a href="#CRIController-184"><span class="linenos"> 184</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">command_counter</span><span class="p">)]</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
</span><span id="CRIController-185"><a href="#CRIController-185"><span class="linenos"> 185</span></a>
</span><span id="CRIController-186"><a href="#CRIController-186"><span class="linenos"> 186</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="CRIController-187"><a href="#CRIController-187"><span class="linenos"> 187</span></a>            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket_write_lock</span><span class="p">:</span>
</span><span id="CRIController-188"><a href="#CRIController-188"><span class="linenos"> 188</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
</span><span id="CRIController-189"><a href="#CRIController-189"><span class="linenos"> 189</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Sent command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span id="CRIController-190"><a href="#CRIController-190"><span class="linenos"> 190</span></a>
</span><span id="CRIController-191"><a href="#CRIController-191"><span class="linenos"> 191</span></a>            <span class="k">return</span> <span class="n">command_counter</span>
</span><span id="CRIController-192"><a href="#CRIController-192"><span class="linenos"> 192</span></a>
</span><span id="CRIController-193"><a href="#CRIController-193"><span class="linenos"> 193</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="CRIController-194"><a href="#CRIController-194"><span class="linenos"> 194</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to send command: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="CRIController-195"><a href="#CRIController-195"><span class="linenos"> 195</span></a>            <span class="k">if</span> <span class="n">register_answer</span><span class="p">:</span>
</span><span id="CRIController-196"><a href="#CRIController-196"><span class="linenos"> 196</span></a>                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span><span class="p">:</span>
</span><span id="CRIController-197"><a href="#CRIController-197"><span class="linenos"> 197</span></a>                    <span class="k">if</span> <span class="n">fixed_answer_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-198"><a href="#CRIController-198"><span class="linenos"> 198</span></a>                        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="n">fixed_answer_name</span><span class="p">]</span>
</span><span id="CRIController-199"><a href="#CRIController-199"><span class="linenos"> 199</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-200"><a href="#CRIController-200"><span class="linenos"> 200</span></a>                        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">command_counter</span><span class="p">)]</span>
</span><span id="CRIController-201"><a href="#CRIController-201"><span class="linenos"> 201</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="CRIController-202"><a href="#CRIController-202"><span class="linenos"> 202</span></a>            <span class="k">raise</span> <span class="n">CRIConnectionError</span><span class="p">(</span><span class="s2">&quot;ConnectionLost&quot;</span><span class="p">)</span>
</span><span id="CRIController-203"><a href="#CRIController-203"><span class="linenos"> 203</span></a>
</span><span id="CRIController-204"><a href="#CRIController-204"><span class="linenos"> 204</span></a>    <span class="k">def</span> <span class="nf">_bg_alivejog_thread</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-205"><a href="#CRIController-205"><span class="linenos"> 205</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CRIController-206"><a href="#CRIController-206"><span class="linenos"> 206</span></a><span class="sd">        Background Thread sending alivejog messages to keep connection alive.</span>
</span><span id="CRIController-207"><a href="#CRIController-207"><span class="linenos"> 207</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-208"><a href="#CRIController-208"><span class="linenos"> 208</span></a>
</span><span id="CRIController-209"><a href="#CRIController-209"><span class="linenos"> 209</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
</span><span id="CRIController-210"><a href="#CRIController-210"><span class="linenos"> 210</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">live_jog_active</span><span class="p">:</span>
</span><span id="CRIController-211"><a href="#CRIController-211"><span class="linenos"> 211</span></a>                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds_lock</span><span class="p">:</span>
</span><span id="CRIController-212"><a href="#CRIController-212"><span class="linenos"> 212</span></a>                    <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;ALIVEJOG </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;A1&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;A2&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;A3&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;A4&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;A5&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;A6&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;E1&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;E2&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span><span class="p">[</span><span class="s1">&#39;E3&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-213"><a href="#CRIController-213"><span class="linenos"> 213</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-214"><a href="#CRIController-214"><span class="linenos"> 214</span></a>                <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;ALIVEJOG 0 0 0 0 0 0 0 0 0&quot;</span>
</span><span id="CRIController-215"><a href="#CRIController-215"><span class="linenos"> 215</span></a>
</span><span id="CRIController-216"><a href="#CRIController-216"><span class="linenos"> 216</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-217"><a href="#CRIController-217"><span class="linenos"> 217</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;AliveJog Thread: Connection lost.&quot;</span><span class="p">)</span>
</span><span id="CRIController-218"><a href="#CRIController-218"><span class="linenos"> 218</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="CRIController-219"><a href="#CRIController-219"><span class="linenos"> 219</span></a>                <span class="k">return</span>
</span><span id="CRIController-220"><a href="#CRIController-220"><span class="linenos"> 220</span></a>
</span><span id="CRIController-221"><a href="#CRIController-221"><span class="linenos"> 221</span></a>            <span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">jog_intervall</span><span class="p">)</span>
</span><span id="CRIController-222"><a href="#CRIController-222"><span class="linenos"> 222</span></a>
</span><span id="CRIController-223"><a href="#CRIController-223"><span class="linenos"> 223</span></a>    <span class="k">def</span> <span class="nf">_bg_receive_thread</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-224"><a href="#CRIController-224"><span class="linenos"> 224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CRIController-225"><a href="#CRIController-225"><span class="linenos"> 225</span></a><span class="sd">        Background thread receiving data and parsing it to the robot state.</span>
</span><span id="CRIController-226"><a href="#CRIController-226"><span class="linenos"> 226</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-227"><a href="#CRIController-227"><span class="linenos"> 227</span></a>        <span class="n">message_buffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
</span><span id="CRIController-228"><a href="#CRIController-228"><span class="linenos"> 228</span></a>
</span><span id="CRIController-229"><a href="#CRIController-229"><span class="linenos"> 229</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
</span><span id="CRIController-230"><a href="#CRIController-230"><span class="linenos"> 230</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="CRIController-231"><a href="#CRIController-231"><span class="linenos"> 231</span></a>                <span class="n">recv_buffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">4096</span><span class="p">)</span>
</span><span id="CRIController-232"><a href="#CRIController-232"><span class="linenos"> 232</span></a>            <span class="k">except</span> <span class="ne">TimeoutError</span><span class="p">:</span>
</span><span id="CRIController-233"><a href="#CRIController-233"><span class="linenos"> 233</span></a>                <span class="k">continue</span>
</span><span id="CRIController-234"><a href="#CRIController-234"><span class="linenos"> 234</span></a>
</span><span id="CRIController-235"><a href="#CRIController-235"><span class="linenos"> 235</span></a>            <span class="k">if</span> <span class="n">recv_buffer</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="CRIController-236"><a href="#CRIController-236"><span class="linenos"> 236</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="CRIController-237"><a href="#CRIController-237"><span class="linenos"> 237</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Receive Thread: Connection lost.&quot;</span><span class="p">)</span>
</span><span id="CRIController-238"><a href="#CRIController-238"><span class="linenos"> 238</span></a>                <span class="k">return</span>
</span><span id="CRIController-239"><a href="#CRIController-239"><span class="linenos"> 239</span></a>
</span><span id="CRIController-240"><a href="#CRIController-240"><span class="linenos"> 240</span></a>            <span class="n">message_buffer</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">recv_buffer</span><span class="p">)</span>
</span><span id="CRIController-241"><a href="#CRIController-241"><span class="linenos"> 241</span></a>
</span><span id="CRIController-242"><a href="#CRIController-242"><span class="linenos"> 242</span></a>            <span class="n">continue_parsing</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="CRIController-243"><a href="#CRIController-243"><span class="linenos"> 243</span></a>            <span class="k">while</span> <span class="n">continue_parsing</span><span class="p">:</span>
</span><span id="CRIController-244"><a href="#CRIController-244"><span class="linenos"> 244</span></a>                <span class="c1"># check for an end of message</span>
</span><span id="CRIController-245"><a href="#CRIController-245"><span class="linenos"> 245</span></a>                <span class="n">end_idx</span> <span class="o">=</span> <span class="n">message_buffer</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;CRIEND&quot;</span><span class="p">)</span>
</span><span id="CRIController-246"><a href="#CRIController-246"><span class="linenos"> 246</span></a>                <span class="k">if</span> <span class="n">end_idx</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="CRIController-247"><a href="#CRIController-247"><span class="linenos"> 247</span></a>                    <span class="n">start_idx</span> <span class="o">=</span> <span class="n">message_buffer</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;CRISTART&quot;</span><span class="p">)</span>
</span><span id="CRIController-248"><a href="#CRIController-248"><span class="linenos"> 248</span></a>
</span><span id="CRIController-249"><a href="#CRIController-249"><span class="linenos"> 249</span></a>                    <span class="c1"># check if there is a complete message</span>
</span><span id="CRIController-250"><a href="#CRIController-250"><span class="linenos"> 250</span></a>                    <span class="k">if</span> <span class="n">start_idx</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="CRIController-251"><a href="#CRIController-251"><span class="linenos"> 251</span></a>                        <span class="n">message</span> <span class="o">=</span> <span class="n">message_buffer</span><span class="p">[</span><span class="n">start_idx</span> <span class="p">:</span> <span class="n">end_idx</span> <span class="o">+</span> <span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</span><span id="CRIController-252"><a href="#CRIController-252"><span class="linenos"> 252</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="CRIController-253"><a href="#CRIController-253"><span class="linenos"> 253</span></a>
</span><span id="CRIController-254"><a href="#CRIController-254"><span class="linenos"> 254</span></a>                    <span class="c1"># check if there is data left in the buffer</span>
</span><span id="CRIController-255"><a href="#CRIController-255"><span class="linenos"> 255</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">message_buffer</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">end_idx</span> <span class="o">+</span> <span class="mi">7</span><span class="p">:</span>
</span><span id="CRIController-256"><a href="#CRIController-256"><span class="linenos"> 256</span></a>                        <span class="n">message_buffer</span> <span class="o">=</span> <span class="n">message_buffer</span><span class="p">[</span><span class="n">end_idx</span> <span class="o">+</span> <span class="mi">7</span> <span class="p">:]</span>
</span><span id="CRIController-257"><a href="#CRIController-257"><span class="linenos"> 257</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-258"><a href="#CRIController-258"><span class="linenos"> 258</span></a>                        <span class="n">message_buffer</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="CRIController-259"><a href="#CRIController-259"><span class="linenos"> 259</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-260"><a href="#CRIController-260"><span class="linenos"> 260</span></a>                    <span class="n">continue_parsing</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="CRIController-261"><a href="#CRIController-261"><span class="linenos"> 261</span></a>
</span><span id="CRIController-262"><a href="#CRIController-262"><span class="linenos"> 262</span></a>    <span class="k">def</span> <span class="nf">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-263"><a href="#CRIController-263"><span class="linenos"> 263</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CRIController-264"><a href="#CRIController-264"><span class="linenos"> 264</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CRIController-265"><a href="#CRIController-265"><span class="linenos"> 265</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Waits for an answer to a message.</span>
</span><span id="CRIController-266"><a href="#CRIController-266"><span class="linenos"> 266</span></a><span class="sd">        The answer event will be removed after the call, even if there was a timeout. Choose timeout accordingly.</span>
</span><span id="CRIController-267"><a href="#CRIController-267"><span class="linenos"> 267</span></a>
</span><span id="CRIController-268"><a href="#CRIController-268"><span class="linenos"> 268</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-269"><a href="#CRIController-269"><span class="linenos"> 269</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-270"><a href="#CRIController-270"><span class="linenos"> 270</span></a><span class="sd">        message_id : int</span>
</span><span id="CRIController-271"><a href="#CRIController-271"><span class="linenos"> 271</span></a><span class="sd">            message id of sent message of which an answer is expected</span>
</span><span id="CRIController-272"><a href="#CRIController-272"><span class="linenos"> 272</span></a>
</span><span id="CRIController-273"><a href="#CRIController-273"><span class="linenos"> 273</span></a><span class="sd">        timeout : float | None</span>
</span><span id="CRIController-274"><a href="#CRIController-274"><span class="linenos"> 274</span></a><span class="sd">            timeout for wait in seconds. `None` will wait indefinetly</span>
</span><span id="CRIController-275"><a href="#CRIController-275"><span class="linenos"> 275</span></a>
</span><span id="CRIController-276"><a href="#CRIController-276"><span class="linenos"> 276</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-277"><a href="#CRIController-277"><span class="linenos"> 277</span></a><span class="sd">        -------</span>
</span><span id="CRIController-278"><a href="#CRIController-278"><span class="linenos"> 278</span></a><span class="sd">        None | str</span>
</span><span id="CRIController-279"><a href="#CRIController-279"><span class="linenos"> 279</span></a><span class="sd">            returns `None` if an answer was received with no error</span>
</span><span id="CRIController-280"><a href="#CRIController-280"><span class="linenos"> 280</span></a><span class="sd">            returns an error message if an `CMDERROR` was received</span>
</span><span id="CRIController-281"><a href="#CRIController-281"><span class="linenos"> 281</span></a>
</span><span id="CRIController-282"><a href="#CRIController-282"><span class="linenos"> 282</span></a><span class="sd">        Raises</span>
</span><span id="CRIController-283"><a href="#CRIController-283"><span class="linenos"> 283</span></a><span class="sd">        ------</span>
</span><span id="CRIController-284"><a href="#CRIController-284"><span class="linenos"> 284</span></a><span class="sd">        CRITimeoutError</span>
</span><span id="CRIController-285"><a href="#CRIController-285"><span class="linenos"> 285</span></a><span class="sd">            raised if no answer was received in given timeout</span>
</span><span id="CRIController-286"><a href="#CRIController-286"><span class="linenos"> 286</span></a>
</span><span id="CRIController-287"><a href="#CRIController-287"><span class="linenos"> 287</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-288"><a href="#CRIController-288"><span class="linenos"> 288</span></a>
</span><span id="CRIController-289"><a href="#CRIController-289"><span class="linenos"> 289</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span><span class="p">:</span>
</span><span id="CRIController-290"><a href="#CRIController-290"><span class="linenos"> 290</span></a>            <span class="k">if</span> <span class="n">message_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">:</span>
</span><span id="CRIController-291"><a href="#CRIController-291"><span class="linenos"> 291</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-292"><a href="#CRIController-292"><span class="linenos"> 292</span></a>            <span class="n">wait_event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="n">message_id</span><span class="p">]</span>
</span><span id="CRIController-293"><a href="#CRIController-293"><span class="linenos"> 293</span></a>
</span><span id="CRIController-294"><a href="#CRIController-294"><span class="linenos"> 294</span></a>        <span class="c1"># prevent deadlock through answer_events_lock</span>
</span><span id="CRIController-295"><a href="#CRIController-295"><span class="linenos"> 295</span></a>        <span class="n">success</span> <span class="o">=</span> <span class="n">wait_event</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</span><span id="CRIController-296"><a href="#CRIController-296"><span class="linenos"> 296</span></a>
</span><span id="CRIController-297"><a href="#CRIController-297"><span class="linenos"> 297</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
</span><span id="CRIController-298"><a href="#CRIController-298"><span class="linenos"> 298</span></a>            <span class="k">raise</span> <span class="n">CRICommandTimeOutError</span><span class="p">()</span>
</span><span id="CRIController-299"><a href="#CRIController-299"><span class="linenos"> 299</span></a>
</span><span id="CRIController-300"><a href="#CRIController-300"><span class="linenos"> 300</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span><span class="p">:</span>
</span><span id="CRIController-301"><a href="#CRIController-301"><span class="linenos"> 301</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="n">message_id</span><span class="p">]</span>
</span><span id="CRIController-302"><a href="#CRIController-302"><span class="linenos"> 302</span></a>
</span><span id="CRIController-303"><a href="#CRIController-303"><span class="linenos"> 303</span></a>            <span class="k">if</span> <span class="n">message_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_messages</span><span class="p">:</span>
</span><span id="CRIController-304"><a href="#CRIController-304"><span class="linenos"> 304</span></a>                <span class="n">error_msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="n">message_id</span><span class="p">]</span>
</span><span id="CRIController-305"><a href="#CRIController-305"><span class="linenos"> 305</span></a>                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="n">message_id</span><span class="p">]</span>
</span><span id="CRIController-306"><a href="#CRIController-306"><span class="linenos"> 306</span></a>                <span class="k">return</span> <span class="n">error_msg</span>
</span><span id="CRIController-307"><a href="#CRIController-307"><span class="linenos"> 307</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-308"><a href="#CRIController-308"><span class="linenos"> 308</span></a>                <span class="k">return</span> <span class="kc">None</span>
</span><span id="CRIController-309"><a href="#CRIController-309"><span class="linenos"> 309</span></a>
</span><span id="CRIController-310"><a href="#CRIController-310"><span class="linenos"> 310</span></a>    <span class="k">def</span> <span class="nf">_parse_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-311"><a href="#CRIController-311"><span class="linenos"> 311</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal function to parse a message. If an answer event is registered for a certain msg_id it is triggered.&quot;&quot;&quot;</span>
</span><span id="CRIController-312"><a href="#CRIController-312"><span class="linenos"> 312</span></a>        <span class="k">if</span> <span class="s2">&quot;STATUS&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">message</span><span class="p">:</span>
</span><span id="CRIController-313"><a href="#CRIController-313"><span class="linenos"> 313</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Received: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span id="CRIController-314"><a href="#CRIController-314"><span class="linenos"> 314</span></a>
</span><span id="CRIController-315"><a href="#CRIController-315"><span class="linenos"> 315</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">notification</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_message</span><span class="p">(</span><span class="n">message</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-316"><a href="#CRIController-316"><span class="linenos"> 316</span></a>            <span class="k">if</span> <span class="n">notification</span><span class="p">[</span><span class="s2">&quot;answer&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;status&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-317"><a href="#CRIController-317"><span class="linenos"> 317</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">status_callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">robot_state</span><span class="p">)</span>
</span><span id="CRIController-318"><a href="#CRIController-318"><span class="linenos"> 318</span></a>
</span><span id="CRIController-319"><a href="#CRIController-319"><span class="linenos"> 319</span></a>            <span class="k">if</span> <span class="n">notification</span><span class="p">[</span><span class="s2">&quot;answer&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;CAN&quot;</span><span class="p">:</span>
</span><span id="CRIController-320"><a href="#CRIController-320"><span class="linenos"> 320</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">can_queue</span><span class="o">.</span><span class="n">put_nowait</span><span class="p">(</span><span class="n">notification</span><span class="p">[</span><span class="s2">&quot;can&quot;</span><span class="p">])</span>
</span><span id="CRIController-321"><a href="#CRIController-321"><span class="linenos"> 321</span></a>
</span><span id="CRIController-322"><a href="#CRIController-322"><span class="linenos"> 322</span></a>            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events_lock</span><span class="p">:</span>
</span><span id="CRIController-323"><a href="#CRIController-323"><span class="linenos"> 323</span></a>                <span class="n">msg_id</span> <span class="o">=</span> <span class="n">notification</span><span class="p">[</span><span class="s2">&quot;answer&quot;</span><span class="p">]</span>
</span><span id="CRIController-324"><a href="#CRIController-324"><span class="linenos"> 324</span></a>
</span><span id="CRIController-325"><a href="#CRIController-325"><span class="linenos"> 325</span></a>                <span class="k">if</span> <span class="n">msg_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">:</span>
</span><span id="CRIController-326"><a href="#CRIController-326"><span class="linenos"> 326</span></a>                    <span class="k">if</span> <span class="s2">&quot;error&quot;</span> <span class="ow">in</span> <span class="n">notification</span><span class="p">:</span>
</span><span id="CRIController-327"><a href="#CRIController-327"><span class="linenos"> 327</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="n">msg_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">notification</span><span class="p">[</span><span class="s2">&quot;error&quot;</span><span class="p">]</span>
</span><span id="CRIController-328"><a href="#CRIController-328"><span class="linenos"> 328</span></a>
</span><span id="CRIController-329"><a href="#CRIController-329"><span class="linenos"> 329</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">answer_events</span><span class="p">[</span><span class="n">msg_id</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</span><span id="CRIController-330"><a href="#CRIController-330"><span class="linenos"> 330</span></a>
</span><span id="CRIController-331"><a href="#CRIController-331"><span class="linenos"> 331</span></a>    <span class="k">def</span> <span class="nf">wait_for_status_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-332"><a href="#CRIController-332"><span class="linenos"> 332</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for next STATUS message.</span>
</span><span id="CRIController-333"><a href="#CRIController-333"><span class="linenos"> 333</span></a>
</span><span id="CRIController-334"><a href="#CRIController-334"><span class="linenos"> 334</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-335"><a href="#CRIController-335"><span class="linenos"> 335</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-336"><a href="#CRIController-336"><span class="linenos"> 336</span></a><span class="sd">        timeout : float | None</span>
</span><span id="CRIController-337"><a href="#CRIController-337"><span class="linenos"> 337</span></a><span class="sd">            Maximum wait time, infinite if `None`</span>
</span><span id="CRIController-338"><a href="#CRIController-338"><span class="linenos"> 338</span></a>
</span><span id="CRIController-339"><a href="#CRIController-339"><span class="linenos"> 339</span></a><span class="sd">        Raises</span>
</span><span id="CRIController-340"><a href="#CRIController-340"><span class="linenos"> 340</span></a><span class="sd">        ------</span>
</span><span id="CRIController-341"><a href="#CRIController-341"><span class="linenos"> 341</span></a><span class="sd">        CRITimeoutError</span>
</span><span id="CRIController-342"><a href="#CRIController-342"><span class="linenos"> 342</span></a><span class="sd">            raised if no status update was received in given timeout</span>
</span><span id="CRIController-343"><a href="#CRIController-343"><span class="linenos"> 343</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-344"><a href="#CRIController-344"><span class="linenos"> 344</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">)</span>
</span><span id="CRIController-345"><a href="#CRIController-345"><span class="linenos"> 345</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
</span><span id="CRIController-346"><a href="#CRIController-346"><span class="linenos"> 346</span></a>
</span><span id="CRIController-347"><a href="#CRIController-347"><span class="linenos"> 347</span></a>    <span class="k">def</span> <span class="nf">register_status_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-348"><a href="#CRIController-348"><span class="linenos"> 348</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a callback which is called every time a STATUS message was parsed to the state.</span>
</span><span id="CRIController-349"><a href="#CRIController-349"><span class="linenos"> 349</span></a><span class="sd">        The callback must have the following definition:</span>
</span><span id="CRIController-350"><a href="#CRIController-350"><span class="linenos"> 350</span></a><span class="sd">        def callback(state: RobotState)</span>
</span><span id="CRIController-351"><a href="#CRIController-351"><span class="linenos"> 351</span></a><span class="sd">        Keep the callback as fast as possible as it will be excute by the receive thread and no messages will be processed, while is runs.</span>
</span><span id="CRIController-352"><a href="#CRIController-352"><span class="linenos"> 352</span></a><span class="sd">        Also keep thread safety in mind, as the callback will be excuted by the receive thread.</span>
</span><span id="CRIController-353"><a href="#CRIController-353"><span class="linenos"> 353</span></a>
</span><span id="CRIController-354"><a href="#CRIController-354"><span class="linenos"> 354</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-355"><a href="#CRIController-355"><span class="linenos"> 355</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-356"><a href="#CRIController-356"><span class="linenos"> 356</span></a><span class="sd">        callback : Callable</span>
</span><span id="CRIController-357"><a href="#CRIController-357"><span class="linenos"> 357</span></a><span class="sd">            callback function to be called, pass `None` to deregister a callback</span>
</span><span id="CRIController-358"><a href="#CRIController-358"><span class="linenos"> 358</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-359"><a href="#CRIController-359"><span class="linenos"> 359</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">status_callback</span> <span class="o">=</span> <span class="n">callback</span>
</span><span id="CRIController-360"><a href="#CRIController-360"><span class="linenos"> 360</span></a>
</span><span id="CRIController-361"><a href="#CRIController-361"><span class="linenos"> 361</span></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-362"><a href="#CRIController-362"><span class="linenos"> 362</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset robot</span>
</span><span id="CRIController-363"><a href="#CRIController-363"><span class="linenos"> 363</span></a>
</span><span id="CRIController-364"><a href="#CRIController-364"><span class="linenos"> 364</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-365"><a href="#CRIController-365"><span class="linenos"> 365</span></a><span class="sd">        -------</span>
</span><span id="CRIController-366"><a href="#CRIController-366"><span class="linenos"> 366</span></a><span class="sd">        bool:</span>
</span><span id="CRIController-367"><a href="#CRIController-367"><span class="linenos"> 367</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-368"><a href="#CRIController-368"><span class="linenos"> 368</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-369"><a href="#CRIController-369"><span class="linenos"> 369</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-370"><a href="#CRIController-370"><span class="linenos"> 370</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD Reset&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-371"><a href="#CRIController-371"><span class="linenos"> 371</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-372"><a href="#CRIController-372"><span class="linenos"> 372</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-373"><a href="#CRIController-373"><span class="linenos"> 373</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-374"><a href="#CRIController-374"><span class="linenos"> 374</span></a>                <span class="p">)</span>
</span><span id="CRIController-375"><a href="#CRIController-375"><span class="linenos"> 375</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-376"><a href="#CRIController-376"><span class="linenos"> 376</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in RESET command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-377"><a href="#CRIController-377"><span class="linenos"> 377</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-378"><a href="#CRIController-378"><span class="linenos"> 378</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-379"><a href="#CRIController-379"><span class="linenos"> 379</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-380"><a href="#CRIController-380"><span class="linenos"> 380</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-381"><a href="#CRIController-381"><span class="linenos"> 381</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-382"><a href="#CRIController-382"><span class="linenos"> 382</span></a>
</span><span id="CRIController-383"><a href="#CRIController-383"><span class="linenos"> 383</span></a>    <span class="k">def</span> <span class="nf">enable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-384"><a href="#CRIController-384"><span class="linenos"> 384</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Enable robot</span>
</span><span id="CRIController-385"><a href="#CRIController-385"><span class="linenos"> 385</span></a><span class="sd">           An potential error message received from the robot will be logged with priority DEBUG</span>
</span><span id="CRIController-386"><a href="#CRIController-386"><span class="linenos"> 386</span></a>
</span><span id="CRIController-387"><a href="#CRIController-387"><span class="linenos"> 387</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-388"><a href="#CRIController-388"><span class="linenos"> 388</span></a><span class="sd">        -------</span>
</span><span id="CRIController-389"><a href="#CRIController-389"><span class="linenos"> 389</span></a><span class="sd">        bool</span>
</span><span id="CRIController-390"><a href="#CRIController-390"><span class="linenos"> 390</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-391"><a href="#CRIController-391"><span class="linenos"> 391</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-392"><a href="#CRIController-392"><span class="linenos"> 392</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-393"><a href="#CRIController-393"><span class="linenos"> 393</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD Enable&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-394"><a href="#CRIController-394"><span class="linenos"> 394</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-395"><a href="#CRIController-395"><span class="linenos"> 395</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-396"><a href="#CRIController-396"><span class="linenos"> 396</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-397"><a href="#CRIController-397"><span class="linenos"> 397</span></a>                <span class="p">)</span>
</span><span id="CRIController-398"><a href="#CRIController-398"><span class="linenos"> 398</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-399"><a href="#CRIController-399"><span class="linenos"> 399</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in ENABLE command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-400"><a href="#CRIController-400"><span class="linenos"> 400</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-401"><a href="#CRIController-401"><span class="linenos"> 401</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-402"><a href="#CRIController-402"><span class="linenos"> 402</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-403"><a href="#CRIController-403"><span class="linenos"> 403</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-404"><a href="#CRIController-404"><span class="linenos"> 404</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-405"><a href="#CRIController-405"><span class="linenos"> 405</span></a>
</span><span id="CRIController-406"><a href="#CRIController-406"><span class="linenos"> 406</span></a>    <span class="k">def</span> <span class="nf">disable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-407"><a href="#CRIController-407"><span class="linenos"> 407</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Disable robot</span>
</span><span id="CRIController-408"><a href="#CRIController-408"><span class="linenos"> 408</span></a>
</span><span id="CRIController-409"><a href="#CRIController-409"><span class="linenos"> 409</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-410"><a href="#CRIController-410"><span class="linenos"> 410</span></a><span class="sd">        -------</span>
</span><span id="CRIController-411"><a href="#CRIController-411"><span class="linenos"> 411</span></a><span class="sd">        bool</span>
</span><span id="CRIController-412"><a href="#CRIController-412"><span class="linenos"> 412</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-413"><a href="#CRIController-413"><span class="linenos"> 413</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-414"><a href="#CRIController-414"><span class="linenos"> 414</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-415"><a href="#CRIController-415"><span class="linenos"> 415</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD Disable&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-416"><a href="#CRIController-416"><span class="linenos"> 416</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-417"><a href="#CRIController-417"><span class="linenos"> 417</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-418"><a href="#CRIController-418"><span class="linenos"> 418</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-419"><a href="#CRIController-419"><span class="linenos"> 419</span></a>                <span class="p">)</span>
</span><span id="CRIController-420"><a href="#CRIController-420"><span class="linenos"> 420</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-421"><a href="#CRIController-421"><span class="linenos"> 421</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in DISABLE command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-422"><a href="#CRIController-422"><span class="linenos"> 422</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-423"><a href="#CRIController-423"><span class="linenos"> 423</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-424"><a href="#CRIController-424"><span class="linenos"> 424</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-425"><a href="#CRIController-425"><span class="linenos"> 425</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-426"><a href="#CRIController-426"><span class="linenos"> 426</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-427"><a href="#CRIController-427"><span class="linenos"> 427</span></a>
</span><span id="CRIController-428"><a href="#CRIController-428"><span class="linenos"> 428</span></a>    <span class="k">def</span> <span class="nf">set_active_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">active</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-429"><a href="#CRIController-429"><span class="linenos"> 429</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Acquire or return active control of robot</span>
</span><span id="CRIController-430"><a href="#CRIController-430"><span class="linenos"> 430</span></a>
</span><span id="CRIController-431"><a href="#CRIController-431"><span class="linenos"> 431</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-432"><a href="#CRIController-432"><span class="linenos"> 432</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-433"><a href="#CRIController-433"><span class="linenos"> 433</span></a><span class="sd">        active : bool</span>
</span><span id="CRIController-434"><a href="#CRIController-434"><span class="linenos"> 434</span></a><span class="sd">            `True` acquire active control</span>
</span><span id="CRIController-435"><a href="#CRIController-435"><span class="linenos"> 435</span></a><span class="sd">            `False` return active control</span>
</span><span id="CRIController-436"><a href="#CRIController-436"><span class="linenos"> 436</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-437"><a href="#CRIController-437"><span class="linenos"> 437</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-438"><a href="#CRIController-438"><span class="linenos"> 438</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span>
</span><span id="CRIController-439"><a href="#CRIController-439"><span class="linenos"> 439</span></a>                <span class="sa">f</span><span class="s2">&quot;CMD SetActive </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">active</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="CRIController-440"><a href="#CRIController-440"><span class="linenos"> 440</span></a>                <span class="kc">True</span><span class="p">,</span>
</span><span id="CRIController-441"><a href="#CRIController-441"><span class="linenos"> 441</span></a>                <span class="sa">f</span><span class="s2">&quot;Active_</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">active</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="CRIController-442"><a href="#CRIController-442"><span class="linenos"> 442</span></a>            <span class="p">)</span>
</span><span id="CRIController-443"><a href="#CRIController-443"><span class="linenos"> 443</span></a>            <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="CRIController-444"><a href="#CRIController-444"><span class="linenos"> 444</span></a>        <span class="p">):</span>
</span><span id="CRIController-445"><a href="#CRIController-445"><span class="linenos"> 445</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-446"><a href="#CRIController-446"><span class="linenos"> 446</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-447"><a href="#CRIController-447"><span class="linenos"> 447</span></a>                    <span class="sa">f</span><span class="s2">&quot;Active_</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">active</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-448"><a href="#CRIController-448"><span class="linenos"> 448</span></a>                <span class="p">)</span>
</span><span id="CRIController-449"><a href="#CRIController-449"><span class="linenos"> 449</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-450"><a href="#CRIController-450"><span class="linenos"> 450</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in set active control command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-451"><a href="#CRIController-451"><span class="linenos"> 451</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-452"><a href="#CRIController-452"><span class="linenos"> 452</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-453"><a href="#CRIController-453"><span class="linenos"> 453</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-454"><a href="#CRIController-454"><span class="linenos"> 454</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-455"><a href="#CRIController-455"><span class="linenos"> 455</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-456"><a href="#CRIController-456"><span class="linenos"> 456</span></a>
</span><span id="CRIController-457"><a href="#CRIController-457"><span class="linenos"> 457</span></a>    <span class="k">def</span> <span class="nf">zero_all_joints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-458"><a href="#CRIController-458"><span class="linenos"> 458</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set all joints to zero</span>
</span><span id="CRIController-459"><a href="#CRIController-459"><span class="linenos"> 459</span></a>
</span><span id="CRIController-460"><a href="#CRIController-460"><span class="linenos"> 460</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-461"><a href="#CRIController-461"><span class="linenos"> 461</span></a><span class="sd">        -------</span>
</span><span id="CRIController-462"><a href="#CRIController-462"><span class="linenos"> 462</span></a><span class="sd">        bool</span>
</span><span id="CRIController-463"><a href="#CRIController-463"><span class="linenos"> 463</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-464"><a href="#CRIController-464"><span class="linenos"> 464</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-465"><a href="#CRIController-465"><span class="linenos"> 465</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-466"><a href="#CRIController-466"><span class="linenos"> 466</span></a>
</span><span id="CRIController-467"><a href="#CRIController-467"><span class="linenos"> 467</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD SetJointsToZero&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-468"><a href="#CRIController-468"><span class="linenos"> 468</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-469"><a href="#CRIController-469"><span class="linenos"> 469</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-470"><a href="#CRIController-470"><span class="linenos"> 470</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-471"><a href="#CRIController-471"><span class="linenos"> 471</span></a>                <span class="p">)</span>
</span><span id="CRIController-472"><a href="#CRIController-472"><span class="linenos"> 472</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-473"><a href="#CRIController-473"><span class="linenos"> 473</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in SetJointsToZero command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-474"><a href="#CRIController-474"><span class="linenos"> 474</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-475"><a href="#CRIController-475"><span class="linenos"> 475</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-476"><a href="#CRIController-476"><span class="linenos"> 476</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-477"><a href="#CRIController-477"><span class="linenos"> 477</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-478"><a href="#CRIController-478"><span class="linenos"> 478</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-479"><a href="#CRIController-479"><span class="linenos"> 479</span></a>
</span><span id="CRIController-480"><a href="#CRIController-480"><span class="linenos"> 480</span></a>    <span class="k">def</span> <span class="nf">reference_all_joints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-481"><a href="#CRIController-481"><span class="linenos"> 481</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reference all joints. Long timout of 30 seconds.</span>
</span><span id="CRIController-482"><a href="#CRIController-482"><span class="linenos"> 482</span></a>
</span><span id="CRIController-483"><a href="#CRIController-483"><span class="linenos"> 483</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-484"><a href="#CRIController-484"><span class="linenos"> 484</span></a><span class="sd">        -------</span>
</span><span id="CRIController-485"><a href="#CRIController-485"><span class="linenos"> 485</span></a><span class="sd">        bool</span>
</span><span id="CRIController-486"><a href="#CRIController-486"><span class="linenos"> 486</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-487"><a href="#CRIController-487"><span class="linenos"> 487</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-488"><a href="#CRIController-488"><span class="linenos"> 488</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-489"><a href="#CRIController-489"><span class="linenos"> 489</span></a>
</span><span id="CRIController-490"><a href="#CRIController-490"><span class="linenos"> 490</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD ReferenceAllJoints&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-491"><a href="#CRIController-491"><span class="linenos"> 491</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-492"><a href="#CRIController-492"><span class="linenos"> 492</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController-493"><a href="#CRIController-493"><span class="linenos"> 493</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-494"><a href="#CRIController-494"><span class="linenos"> 494</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in ReferenceAllJoints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-495"><a href="#CRIController-495"><span class="linenos"> 495</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-496"><a href="#CRIController-496"><span class="linenos"> 496</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-497"><a href="#CRIController-497"><span class="linenos"> 497</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-498"><a href="#CRIController-498"><span class="linenos"> 498</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-499"><a href="#CRIController-499"><span class="linenos"> 499</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-500"><a href="#CRIController-500"><span class="linenos"> 500</span></a>
</span><span id="CRIController-501"><a href="#CRIController-501"><span class="linenos"> 501</span></a>    <span class="k">def</span> <span class="nf">reference_single_joint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">joint</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-502"><a href="#CRIController-502"><span class="linenos"> 502</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reference a single joint. Long timout of 30 seconds.</span>
</span><span id="CRIController-503"><a href="#CRIController-503"><span class="linenos"> 503</span></a>
</span><span id="CRIController-504"><a href="#CRIController-504"><span class="linenos"> 504</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-505"><a href="#CRIController-505"><span class="linenos"> 505</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-506"><a href="#CRIController-506"><span class="linenos"> 506</span></a><span class="sd">        joint : str</span>
</span><span id="CRIController-507"><a href="#CRIController-507"><span class="linenos"> 507</span></a><span class="sd">            joint name with either &#39;A&#39;, &#39;E&#39;, &#39;T&#39; or &#39;P&#39; as first character and an corresponding index as second</span>
</span><span id="CRIController-508"><a href="#CRIController-508"><span class="linenos"> 508</span></a>
</span><span id="CRIController-509"><a href="#CRIController-509"><span class="linenos"> 509</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-510"><a href="#CRIController-510"><span class="linenos"> 510</span></a><span class="sd">        -------</span>
</span><span id="CRIController-511"><a href="#CRIController-511"><span class="linenos"> 511</span></a><span class="sd">        bool</span>
</span><span id="CRIController-512"><a href="#CRIController-512"><span class="linenos"> 512</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-513"><a href="#CRIController-513"><span class="linenos"> 513</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-514"><a href="#CRIController-514"><span class="linenos"> 514</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-515"><a href="#CRIController-515"><span class="linenos"> 515</span></a>
</span><span id="CRIController-516"><a href="#CRIController-516"><span class="linenos"> 516</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-517"><a href="#CRIController-517"><span class="linenos"> 517</span></a>            <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;A&quot;</span> <span class="ow">or</span> <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;E&quot;</span> <span class="ow">or</span> <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;T&quot;</span> <span class="ow">or</span> <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;P&quot;</span>
</span><span id="CRIController-518"><a href="#CRIController-518"><span class="linenos"> 518</span></a>        <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">joint</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="CRIController-519"><a href="#CRIController-519"><span class="linenos"> 519</span></a>            <span class="n">joint_msg</span> <span class="o">=</span> <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">joint</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="CRIController-520"><a href="#CRIController-520"><span class="linenos"> 520</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-521"><a href="#CRIController-521"><span class="linenos"> 521</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-522"><a href="#CRIController-522"><span class="linenos"> 522</span></a>
</span><span id="CRIController-523"><a href="#CRIController-523"><span class="linenos"> 523</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-524"><a href="#CRIController-524"><span class="linenos"> 524</span></a>            <span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CMD ReferenceSingleJoint </span><span class="si">{</span><span class="n">joint_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="CRIController-525"><a href="#CRIController-525"><span class="linenos"> 525</span></a>        <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-526"><a href="#CRIController-526"><span class="linenos"> 526</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-527"><a href="#CRIController-527"><span class="linenos"> 527</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController-528"><a href="#CRIController-528"><span class="linenos"> 528</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-529"><a href="#CRIController-529"><span class="linenos"> 529</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in ReferenceSingleJoint command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-530"><a href="#CRIController-530"><span class="linenos"> 530</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-531"><a href="#CRIController-531"><span class="linenos"> 531</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-532"><a href="#CRIController-532"><span class="linenos"> 532</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-533"><a href="#CRIController-533"><span class="linenos"> 533</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-534"><a href="#CRIController-534"><span class="linenos"> 534</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-535"><a href="#CRIController-535"><span class="linenos"> 535</span></a>
</span><span id="CRIController-536"><a href="#CRIController-536"><span class="linenos"> 536</span></a>    <span class="k">def</span> <span class="nf">get_referencing_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CRIController-537"><a href="#CRIController-537"><span class="linenos"> 537</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reference all joints. Long timout of 30 seconds.</span>
</span><span id="CRIController-538"><a href="#CRIController-538"><span class="linenos"> 538</span></a>
</span><span id="CRIController-539"><a href="#CRIController-539"><span class="linenos"> 539</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-540"><a href="#CRIController-540"><span class="linenos"> 540</span></a><span class="sd">        -------</span>
</span><span id="CRIController-541"><a href="#CRIController-541"><span class="linenos"> 541</span></a><span class="sd">        bool</span>
</span><span id="CRIController-542"><a href="#CRIController-542"><span class="linenos"> 542</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-543"><a href="#CRIController-543"><span class="linenos"> 543</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-544"><a href="#CRIController-544"><span class="linenos"> 544</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-545"><a href="#CRIController-545"><span class="linenos"> 545</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-546"><a href="#CRIController-546"><span class="linenos"> 546</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD GetReferencingInfo&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;info_referencing&quot;</span><span class="p">)</span>
</span><span id="CRIController-547"><a href="#CRIController-547"><span class="linenos"> 547</span></a>            <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="CRIController-548"><a href="#CRIController-548"><span class="linenos"> 548</span></a>        <span class="p">):</span>
</span><span id="CRIController-549"><a href="#CRIController-549"><span class="linenos"> 549</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-550"><a href="#CRIController-550"><span class="linenos"> 550</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-551"><a href="#CRIController-551"><span class="linenos"> 551</span></a>                    <span class="s2">&quot;info_referencing&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-552"><a href="#CRIController-552"><span class="linenos"> 552</span></a>                <span class="p">)</span>
</span><span id="CRIController-553"><a href="#CRIController-553"><span class="linenos"> 553</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-554"><a href="#CRIController-554"><span class="linenos"> 554</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in GetReferencingInfo command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-555"><a href="#CRIController-555"><span class="linenos"> 555</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-556"><a href="#CRIController-556"><span class="linenos"> 556</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-557"><a href="#CRIController-557"><span class="linenos"> 557</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-558"><a href="#CRIController-558"><span class="linenos"> 558</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-559"><a href="#CRIController-559"><span class="linenos"> 559</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-560"><a href="#CRIController-560"><span class="linenos"> 560</span></a>
</span><span id="CRIController-561"><a href="#CRIController-561"><span class="linenos"> 561</span></a>    <span class="k">def</span> <span class="nf">wait_for_kinematics_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-562"><a href="#CRIController-562"><span class="linenos"> 562</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait until drive state is indicated as ready.</span>
</span><span id="CRIController-563"><a href="#CRIController-563"><span class="linenos"> 563</span></a>
</span><span id="CRIController-564"><a href="#CRIController-564"><span class="linenos"> 564</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-565"><a href="#CRIController-565"><span class="linenos"> 565</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-566"><a href="#CRIController-566"><span class="linenos"> 566</span></a><span class="sd">        timeout : float</span>
</span><span id="CRIController-567"><a href="#CRIController-567"><span class="linenos"> 567</span></a><span class="sd">            maximum time to wait in seconds</span>
</span><span id="CRIController-568"><a href="#CRIController-568"><span class="linenos"> 568</span></a>
</span><span id="CRIController-569"><a href="#CRIController-569"><span class="linenos"> 569</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-570"><a href="#CRIController-570"><span class="linenos"> 570</span></a><span class="sd">        -------</span>
</span><span id="CRIController-571"><a href="#CRIController-571"><span class="linenos"> 571</span></a><span class="sd">        bool</span>
</span><span id="CRIController-572"><a href="#CRIController-572"><span class="linenos"> 572</span></a><span class="sd">            `True`if drives are ready, `False` if not ready or timeout</span>
</span><span id="CRIController-573"><a href="#CRIController-573"><span class="linenos"> 573</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-574"><a href="#CRIController-574"><span class="linenos"> 574</span></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
</span><span id="CRIController-575"><a href="#CRIController-575"><span class="linenos"> 575</span></a>        <span class="n">new_timeout</span> <span class="o">=</span> <span class="n">timeout</span>
</span><span id="CRIController-576"><a href="#CRIController-576"><span class="linenos"> 576</span></a>        <span class="k">while</span> <span class="n">new_timeout</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="CRIController-577"><a href="#CRIController-577"><span class="linenos"> 577</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_status_update</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">new_timeout</span><span class="p">)</span>
</span><span id="CRIController-578"><a href="#CRIController-578"><span class="linenos"> 578</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">robot_state</span><span class="o">.</span><span class="n">kinematics_state</span> <span class="o">==</span> <span class="n">KinematicsState</span><span class="o">.</span><span class="n">NO_ERROR</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="CRIController-579"><a href="#CRIController-579"><span class="linenos"> 579</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">robot_state</span><span class="o">.</span><span class="n">combined_axes_error</span> <span class="o">==</span> <span class="s2">&quot;NoError&quot;</span>
</span><span id="CRIController-580"><a href="#CRIController-580"><span class="linenos"> 580</span></a>            <span class="p">):</span>
</span><span id="CRIController-581"><a href="#CRIController-581"><span class="linenos"> 581</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-582"><a href="#CRIController-582"><span class="linenos"> 582</span></a>
</span><span id="CRIController-583"><a href="#CRIController-583"><span class="linenos"> 583</span></a>            <span class="n">new_timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="o">-</span> <span class="p">(</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
</span><span id="CRIController-584"><a href="#CRIController-584"><span class="linenos"> 584</span></a>
</span><span id="CRIController-585"><a href="#CRIController-585"><span class="linenos"> 585</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-586"><a href="#CRIController-586"><span class="linenos"> 586</span></a>
</span><span id="CRIController-587"><a href="#CRIController-587"><span class="linenos"> 587</span></a>    <span class="k">def</span> <span class="nf">move_joints</span><span class="p">(</span>
</span><span id="CRIController-588"><a href="#CRIController-588"><span class="linenos"> 588</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CRIController-589"><a href="#CRIController-589"><span class="linenos"> 589</span></a>        <span class="n">A1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-590"><a href="#CRIController-590"><span class="linenos"> 590</span></a>        <span class="n">A2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-591"><a href="#CRIController-591"><span class="linenos"> 591</span></a>        <span class="n">A3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-592"><a href="#CRIController-592"><span class="linenos"> 592</span></a>        <span class="n">A4</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-593"><a href="#CRIController-593"><span class="linenos"> 593</span></a>        <span class="n">A5</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-594"><a href="#CRIController-594"><span class="linenos"> 594</span></a>        <span class="n">A6</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-595"><a href="#CRIController-595"><span class="linenos"> 595</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-596"><a href="#CRIController-596"><span class="linenos"> 596</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-597"><a href="#CRIController-597"><span class="linenos"> 597</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-598"><a href="#CRIController-598"><span class="linenos"> 598</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-599"><a href="#CRIController-599"><span class="linenos"> 599</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CRIController-600"><a href="#CRIController-600"><span class="linenos"> 600</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="CRIController-601"><a href="#CRIController-601"><span class="linenos"> 601</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-602"><a href="#CRIController-602"><span class="linenos"> 602</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Absolute joint move</span>
</span><span id="CRIController-603"><a href="#CRIController-603"><span class="linenos"> 603</span></a>
</span><span id="CRIController-604"><a href="#CRIController-604"><span class="linenos"> 604</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-605"><a href="#CRIController-605"><span class="linenos"> 605</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-606"><a href="#CRIController-606"><span class="linenos"> 606</span></a><span class="sd">        A1-A6, E1-E3 : float</span>
</span><span id="CRIController-607"><a href="#CRIController-607"><span class="linenos"> 607</span></a><span class="sd">            Target angles of axes</span>
</span><span id="CRIController-608"><a href="#CRIController-608"><span class="linenos"> 608</span></a>
</span><span id="CRIController-609"><a href="#CRIController-609"><span class="linenos"> 609</span></a><span class="sd">        velocity : float</span>
</span><span id="CRIController-610"><a href="#CRIController-610"><span class="linenos"> 610</span></a><span class="sd">            Velocity in percent of maximum velocity, range 1.0-100.0</span>
</span><span id="CRIController-611"><a href="#CRIController-611"><span class="linenos"> 611</span></a>
</span><span id="CRIController-612"><a href="#CRIController-612"><span class="linenos"> 612</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="CRIController-613"><a href="#CRIController-613"><span class="linenos"> 613</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="CRIController-614"><a href="#CRIController-614"><span class="linenos"> 614</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="CRIController-615"><a href="#CRIController-615"><span class="linenos"> 615</span></a>
</span><span id="CRIController-616"><a href="#CRIController-616"><span class="linenos"> 616</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="CRIController-617"><a href="#CRIController-617"><span class="linenos"> 617</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="CRIController-618"><a href="#CRIController-618"><span class="linenos"> 618</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-619"><a href="#CRIController-619"><span class="linenos"> 619</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="CRIController-620"><a href="#CRIController-620"><span class="linenos"> 620</span></a>            <span class="sa">f</span><span class="s2">&quot;CMD Move Joint </span><span class="si">{</span><span class="n">A1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A4</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A5</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A6</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-621"><a href="#CRIController-621"><span class="linenos"> 621</span></a>        <span class="p">)</span>
</span><span id="CRIController-622"><a href="#CRIController-622"><span class="linenos"> 622</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController-623"><a href="#CRIController-623"><span class="linenos"> 623</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="CRIController-624"><a href="#CRIController-624"><span class="linenos"> 624</span></a>
</span><span id="CRIController-625"><a href="#CRIController-625"><span class="linenos"> 625</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-626"><a href="#CRIController-626"><span class="linenos"> 626</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-627"><a href="#CRIController-627"><span class="linenos"> 627</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController-628"><a href="#CRIController-628"><span class="linenos"> 628</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-629"><a href="#CRIController-629"><span class="linenos"> 629</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-630"><a href="#CRIController-630"><span class="linenos"> 630</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-631"><a href="#CRIController-631"><span class="linenos"> 631</span></a>
</span><span id="CRIController-632"><a href="#CRIController-632"><span class="linenos"> 632</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController-633"><a href="#CRIController-633"><span class="linenos"> 633</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-634"><a href="#CRIController-634"><span class="linenos"> 634</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-635"><a href="#CRIController-635"><span class="linenos"> 635</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="CRIController-636"><a href="#CRIController-636"><span class="linenos"> 636</span></a>                    <span class="p">)</span>
</span><span id="CRIController-637"><a href="#CRIController-637"><span class="linenos"> 637</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-638"><a href="#CRIController-638"><span class="linenos"> 638</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exec Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-639"><a href="#CRIController-639"><span class="linenos"> 639</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-640"><a href="#CRIController-640"><span class="linenos"> 640</span></a>
</span><span id="CRIController-641"><a href="#CRIController-641"><span class="linenos"> 641</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-642"><a href="#CRIController-642"><span class="linenos"> 642</span></a>
</span><span id="CRIController-643"><a href="#CRIController-643"><span class="linenos"> 643</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-644"><a href="#CRIController-644"><span class="linenos"> 644</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-645"><a href="#CRIController-645"><span class="linenos"> 645</span></a>
</span><span id="CRIController-646"><a href="#CRIController-646"><span class="linenos"> 646</span></a>    <span class="k">def</span> <span class="nf">move_joints_relative</span><span class="p">(</span>
</span><span id="CRIController-647"><a href="#CRIController-647"><span class="linenos"> 647</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CRIController-648"><a href="#CRIController-648"><span class="linenos"> 648</span></a>        <span class="n">A1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-649"><a href="#CRIController-649"><span class="linenos"> 649</span></a>        <span class="n">A2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-650"><a href="#CRIController-650"><span class="linenos"> 650</span></a>        <span class="n">A3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-651"><a href="#CRIController-651"><span class="linenos"> 651</span></a>        <span class="n">A4</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-652"><a href="#CRIController-652"><span class="linenos"> 652</span></a>        <span class="n">A5</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-653"><a href="#CRIController-653"><span class="linenos"> 653</span></a>        <span class="n">A6</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-654"><a href="#CRIController-654"><span class="linenos"> 654</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-655"><a href="#CRIController-655"><span class="linenos"> 655</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-656"><a href="#CRIController-656"><span class="linenos"> 656</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-657"><a href="#CRIController-657"><span class="linenos"> 657</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-658"><a href="#CRIController-658"><span class="linenos"> 658</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CRIController-659"><a href="#CRIController-659"><span class="linenos"> 659</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="CRIController-660"><a href="#CRIController-660"><span class="linenos"> 660</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-661"><a href="#CRIController-661"><span class="linenos"> 661</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Relative joint move</span>
</span><span id="CRIController-662"><a href="#CRIController-662"><span class="linenos"> 662</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-663"><a href="#CRIController-663"><span class="linenos"> 663</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-664"><a href="#CRIController-664"><span class="linenos"> 664</span></a><span class="sd">        A1-A6, E1-E3 : float</span>
</span><span id="CRIController-665"><a href="#CRIController-665"><span class="linenos"> 665</span></a><span class="sd">            Target angles of axes</span>
</span><span id="CRIController-666"><a href="#CRIController-666"><span class="linenos"> 666</span></a>
</span><span id="CRIController-667"><a href="#CRIController-667"><span class="linenos"> 667</span></a><span class="sd">        velocity : float</span>
</span><span id="CRIController-668"><a href="#CRIController-668"><span class="linenos"> 668</span></a><span class="sd">            Velocity in percent of maximum velocity, range 1.0-100.0</span>
</span><span id="CRIController-669"><a href="#CRIController-669"><span class="linenos"> 669</span></a>
</span><span id="CRIController-670"><a href="#CRIController-670"><span class="linenos"> 670</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="CRIController-671"><a href="#CRIController-671"><span class="linenos"> 671</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="CRIController-672"><a href="#CRIController-672"><span class="linenos"> 672</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="CRIController-673"><a href="#CRIController-673"><span class="linenos"> 673</span></a>
</span><span id="CRIController-674"><a href="#CRIController-674"><span class="linenos"> 674</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="CRIController-675"><a href="#CRIController-675"><span class="linenos"> 675</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="CRIController-676"><a href="#CRIController-676"><span class="linenos"> 676</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-677"><a href="#CRIController-677"><span class="linenos"> 677</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD Move RelativeJoint </span><span class="si">{</span><span class="n">A1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A4</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A5</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A6</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-678"><a href="#CRIController-678"><span class="linenos"> 678</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController-679"><a href="#CRIController-679"><span class="linenos"> 679</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="CRIController-680"><a href="#CRIController-680"><span class="linenos"> 680</span></a>
</span><span id="CRIController-681"><a href="#CRIController-681"><span class="linenos"> 681</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-682"><a href="#CRIController-682"><span class="linenos"> 682</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-683"><a href="#CRIController-683"><span class="linenos"> 683</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController-684"><a href="#CRIController-684"><span class="linenos"> 684</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-685"><a href="#CRIController-685"><span class="linenos"> 685</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-686"><a href="#CRIController-686"><span class="linenos"> 686</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-687"><a href="#CRIController-687"><span class="linenos"> 687</span></a>
</span><span id="CRIController-688"><a href="#CRIController-688"><span class="linenos"> 688</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController-689"><a href="#CRIController-689"><span class="linenos"> 689</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-690"><a href="#CRIController-690"><span class="linenos"> 690</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-691"><a href="#CRIController-691"><span class="linenos"> 691</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="CRIController-692"><a href="#CRIController-692"><span class="linenos"> 692</span></a>                    <span class="p">)</span>
</span><span id="CRIController-693"><a href="#CRIController-693"><span class="linenos"> 693</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-694"><a href="#CRIController-694"><span class="linenos"> 694</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="CRIController-695"><a href="#CRIController-695"><span class="linenos"> 695</span></a>                        <span class="s2">&quot;Exec Error in Move Joints Relative command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span>
</span><span id="CRIController-696"><a href="#CRIController-696"><span class="linenos"> 696</span></a>                    <span class="p">)</span>
</span><span id="CRIController-697"><a href="#CRIController-697"><span class="linenos"> 697</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-698"><a href="#CRIController-698"><span class="linenos"> 698</span></a>
</span><span id="CRIController-699"><a href="#CRIController-699"><span class="linenos"> 699</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-700"><a href="#CRIController-700"><span class="linenos"> 700</span></a>
</span><span id="CRIController-701"><a href="#CRIController-701"><span class="linenos"> 701</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-702"><a href="#CRIController-702"><span class="linenos"> 702</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-703"><a href="#CRIController-703"><span class="linenos"> 703</span></a>
</span><span id="CRIController-704"><a href="#CRIController-704"><span class="linenos"> 704</span></a>    <span class="k">def</span> <span class="nf">move_cartesian</span><span class="p">(</span>
</span><span id="CRIController-705"><a href="#CRIController-705"><span class="linenos"> 705</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CRIController-706"><a href="#CRIController-706"><span class="linenos"> 706</span></a>        <span class="n">X</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-707"><a href="#CRIController-707"><span class="linenos"> 707</span></a>        <span class="n">Y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-708"><a href="#CRIController-708"><span class="linenos"> 708</span></a>        <span class="n">Z</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-709"><a href="#CRIController-709"><span class="linenos"> 709</span></a>        <span class="n">A</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-710"><a href="#CRIController-710"><span class="linenos"> 710</span></a>        <span class="n">B</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-711"><a href="#CRIController-711"><span class="linenos"> 711</span></a>        <span class="n">C</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-712"><a href="#CRIController-712"><span class="linenos"> 712</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-713"><a href="#CRIController-713"><span class="linenos"> 713</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-714"><a href="#CRIController-714"><span class="linenos"> 714</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-715"><a href="#CRIController-715"><span class="linenos"> 715</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-716"><a href="#CRIController-716"><span class="linenos"> 716</span></a>        <span class="n">frame</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#base&quot;</span><span class="p">,</span>
</span><span id="CRIController-717"><a href="#CRIController-717"><span class="linenos"> 717</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CRIController-718"><a href="#CRIController-718"><span class="linenos"> 718</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="CRIController-719"><a href="#CRIController-719"><span class="linenos"> 719</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-720"><a href="#CRIController-720"><span class="linenos"> 720</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cartesian move</span>
</span><span id="CRIController-721"><a href="#CRIController-721"><span class="linenos"> 721</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-722"><a href="#CRIController-722"><span class="linenos"> 722</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-723"><a href="#CRIController-723"><span class="linenos"> 723</span></a><span class="sd">        X,Y,Z,A,B,C,E1-E3 : float</span>
</span><span id="CRIController-724"><a href="#CRIController-724"><span class="linenos"> 724</span></a><span class="sd">            Target angles of axes</span>
</span><span id="CRIController-725"><a href="#CRIController-725"><span class="linenos"> 725</span></a>
</span><span id="CRIController-726"><a href="#CRIController-726"><span class="linenos"> 726</span></a><span class="sd">        velocity : float</span>
</span><span id="CRIController-727"><a href="#CRIController-727"><span class="linenos"> 727</span></a><span class="sd">            Velocity in mm/s</span>
</span><span id="CRIController-728"><a href="#CRIController-728"><span class="linenos"> 728</span></a>
</span><span id="CRIController-729"><a href="#CRIController-729"><span class="linenos"> 729</span></a><span class="sd">        frame : str</span>
</span><span id="CRIController-730"><a href="#CRIController-730"><span class="linenos"> 730</span></a><span class="sd">            frame of the coordinates, default is `#base`</span>
</span><span id="CRIController-731"><a href="#CRIController-731"><span class="linenos"> 731</span></a>
</span><span id="CRIController-732"><a href="#CRIController-732"><span class="linenos"> 732</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="CRIController-733"><a href="#CRIController-733"><span class="linenos"> 733</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="CRIController-734"><a href="#CRIController-734"><span class="linenos"> 734</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="CRIController-735"><a href="#CRIController-735"><span class="linenos"> 735</span></a>
</span><span id="CRIController-736"><a href="#CRIController-736"><span class="linenos"> 736</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="CRIController-737"><a href="#CRIController-737"><span class="linenos"> 737</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="CRIController-738"><a href="#CRIController-738"><span class="linenos"> 738</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-739"><a href="#CRIController-739"><span class="linenos"> 739</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="CRIController-740"><a href="#CRIController-740"><span class="linenos"> 740</span></a>            <span class="sa">f</span><span class="s2">&quot;CMD Move Cart </span><span class="si">{</span><span class="n">X</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Y</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Z</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">B</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">C</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">frame</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-741"><a href="#CRIController-741"><span class="linenos"> 741</span></a>        <span class="p">)</span>
</span><span id="CRIController-742"><a href="#CRIController-742"><span class="linenos"> 742</span></a>
</span><span id="CRIController-743"><a href="#CRIController-743"><span class="linenos"> 743</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController-744"><a href="#CRIController-744"><span class="linenos"> 744</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="CRIController-745"><a href="#CRIController-745"><span class="linenos"> 745</span></a>
</span><span id="CRIController-746"><a href="#CRIController-746"><span class="linenos"> 746</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-747"><a href="#CRIController-747"><span class="linenos"> 747</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-748"><a href="#CRIController-748"><span class="linenos"> 748</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController-749"><a href="#CRIController-749"><span class="linenos"> 749</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-750"><a href="#CRIController-750"><span class="linenos"> 750</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-751"><a href="#CRIController-751"><span class="linenos"> 751</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-752"><a href="#CRIController-752"><span class="linenos"> 752</span></a>
</span><span id="CRIController-753"><a href="#CRIController-753"><span class="linenos"> 753</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController-754"><a href="#CRIController-754"><span class="linenos"> 754</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-755"><a href="#CRIController-755"><span class="linenos"> 755</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-756"><a href="#CRIController-756"><span class="linenos"> 756</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="CRIController-757"><a href="#CRIController-757"><span class="linenos"> 757</span></a>                    <span class="p">)</span>
</span><span id="CRIController-758"><a href="#CRIController-758"><span class="linenos"> 758</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-759"><a href="#CRIController-759"><span class="linenos"> 759</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exec Error in Move Cartesian command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-760"><a href="#CRIController-760"><span class="linenos"> 760</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-761"><a href="#CRIController-761"><span class="linenos"> 761</span></a>
</span><span id="CRIController-762"><a href="#CRIController-762"><span class="linenos"> 762</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-763"><a href="#CRIController-763"><span class="linenos"> 763</span></a>
</span><span id="CRIController-764"><a href="#CRIController-764"><span class="linenos"> 764</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-765"><a href="#CRIController-765"><span class="linenos"> 765</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-766"><a href="#CRIController-766"><span class="linenos"> 766</span></a>
</span><span id="CRIController-767"><a href="#CRIController-767"><span class="linenos"> 767</span></a>    <span class="k">def</span> <span class="nf">move_base_relative</span><span class="p">(</span>
</span><span id="CRIController-768"><a href="#CRIController-768"><span class="linenos"> 768</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CRIController-769"><a href="#CRIController-769"><span class="linenos"> 769</span></a>        <span class="n">X</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-770"><a href="#CRIController-770"><span class="linenos"> 770</span></a>        <span class="n">Y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-771"><a href="#CRIController-771"><span class="linenos"> 771</span></a>        <span class="n">Z</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-772"><a href="#CRIController-772"><span class="linenos"> 772</span></a>        <span class="n">A</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-773"><a href="#CRIController-773"><span class="linenos"> 773</span></a>        <span class="n">B</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-774"><a href="#CRIController-774"><span class="linenos"> 774</span></a>        <span class="n">C</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-775"><a href="#CRIController-775"><span class="linenos"> 775</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-776"><a href="#CRIController-776"><span class="linenos"> 776</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-777"><a href="#CRIController-777"><span class="linenos"> 777</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-778"><a href="#CRIController-778"><span class="linenos"> 778</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-779"><a href="#CRIController-779"><span class="linenos"> 779</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CRIController-780"><a href="#CRIController-780"><span class="linenos"> 780</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="CRIController-781"><a href="#CRIController-781"><span class="linenos"> 781</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-782"><a href="#CRIController-782"><span class="linenos"> 782</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Relative cartesian move in base coordinate system</span>
</span><span id="CRIController-783"><a href="#CRIController-783"><span class="linenos"> 783</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-784"><a href="#CRIController-784"><span class="linenos"> 784</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-785"><a href="#CRIController-785"><span class="linenos"> 785</span></a><span class="sd">        X,Y,Z,A,B,C,E1-E3 : float</span>
</span><span id="CRIController-786"><a href="#CRIController-786"><span class="linenos"> 786</span></a><span class="sd">            Target angles of axes</span>
</span><span id="CRIController-787"><a href="#CRIController-787"><span class="linenos"> 787</span></a>
</span><span id="CRIController-788"><a href="#CRIController-788"><span class="linenos"> 788</span></a><span class="sd">        velocity : float</span>
</span><span id="CRIController-789"><a href="#CRIController-789"><span class="linenos"> 789</span></a><span class="sd">            Velocity in mm/s</span>
</span><span id="CRIController-790"><a href="#CRIController-790"><span class="linenos"> 790</span></a>
</span><span id="CRIController-791"><a href="#CRIController-791"><span class="linenos"> 791</span></a><span class="sd">        frame : str</span>
</span><span id="CRIController-792"><a href="#CRIController-792"><span class="linenos"> 792</span></a><span class="sd">            frame of the coordinates, default is `#base`</span>
</span><span id="CRIController-793"><a href="#CRIController-793"><span class="linenos"> 793</span></a>
</span><span id="CRIController-794"><a href="#CRIController-794"><span class="linenos"> 794</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="CRIController-795"><a href="#CRIController-795"><span class="linenos"> 795</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="CRIController-796"><a href="#CRIController-796"><span class="linenos"> 796</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="CRIController-797"><a href="#CRIController-797"><span class="linenos"> 797</span></a>
</span><span id="CRIController-798"><a href="#CRIController-798"><span class="linenos"> 798</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="CRIController-799"><a href="#CRIController-799"><span class="linenos"> 799</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="CRIController-800"><a href="#CRIController-800"><span class="linenos"> 800</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-801"><a href="#CRIController-801"><span class="linenos"> 801</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="CRIController-802"><a href="#CRIController-802"><span class="linenos"> 802</span></a>            <span class="sa">f</span><span class="s2">&quot;CMD Move RelativeBase </span><span class="si">{</span><span class="n">X</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Y</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Z</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">B</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">C</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-803"><a href="#CRIController-803"><span class="linenos"> 803</span></a>        <span class="p">)</span>
</span><span id="CRIController-804"><a href="#CRIController-804"><span class="linenos"> 804</span></a>
</span><span id="CRIController-805"><a href="#CRIController-805"><span class="linenos"> 805</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController-806"><a href="#CRIController-806"><span class="linenos"> 806</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="CRIController-807"><a href="#CRIController-807"><span class="linenos"> 807</span></a>
</span><span id="CRIController-808"><a href="#CRIController-808"><span class="linenos"> 808</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-809"><a href="#CRIController-809"><span class="linenos"> 809</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-810"><a href="#CRIController-810"><span class="linenos"> 810</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController-811"><a href="#CRIController-811"><span class="linenos"> 811</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-812"><a href="#CRIController-812"><span class="linenos"> 812</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-813"><a href="#CRIController-813"><span class="linenos"> 813</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-814"><a href="#CRIController-814"><span class="linenos"> 814</span></a>
</span><span id="CRIController-815"><a href="#CRIController-815"><span class="linenos"> 815</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController-816"><a href="#CRIController-816"><span class="linenos"> 816</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-817"><a href="#CRIController-817"><span class="linenos"> 817</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-818"><a href="#CRIController-818"><span class="linenos"> 818</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="CRIController-819"><a href="#CRIController-819"><span class="linenos"> 819</span></a>                    <span class="p">)</span>
</span><span id="CRIController-820"><a href="#CRIController-820"><span class="linenos"> 820</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-821"><a href="#CRIController-821"><span class="linenos"> 821</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="CRIController-822"><a href="#CRIController-822"><span class="linenos"> 822</span></a>                        <span class="s2">&quot;Exec Error in Move BaseRelative command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span>
</span><span id="CRIController-823"><a href="#CRIController-823"><span class="linenos"> 823</span></a>                    <span class="p">)</span>
</span><span id="CRIController-824"><a href="#CRIController-824"><span class="linenos"> 824</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-825"><a href="#CRIController-825"><span class="linenos"> 825</span></a>
</span><span id="CRIController-826"><a href="#CRIController-826"><span class="linenos"> 826</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-827"><a href="#CRIController-827"><span class="linenos"> 827</span></a>
</span><span id="CRIController-828"><a href="#CRIController-828"><span class="linenos"> 828</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-829"><a href="#CRIController-829"><span class="linenos"> 829</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-830"><a href="#CRIController-830"><span class="linenos"> 830</span></a>
</span><span id="CRIController-831"><a href="#CRIController-831"><span class="linenos"> 831</span></a>    <span class="k">def</span> <span class="nf">move_tool_relative</span><span class="p">(</span>
</span><span id="CRIController-832"><a href="#CRIController-832"><span class="linenos"> 832</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CRIController-833"><a href="#CRIController-833"><span class="linenos"> 833</span></a>        <span class="n">X</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-834"><a href="#CRIController-834"><span class="linenos"> 834</span></a>        <span class="n">Y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-835"><a href="#CRIController-835"><span class="linenos"> 835</span></a>        <span class="n">Z</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-836"><a href="#CRIController-836"><span class="linenos"> 836</span></a>        <span class="n">A</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-837"><a href="#CRIController-837"><span class="linenos"> 837</span></a>        <span class="n">B</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-838"><a href="#CRIController-838"><span class="linenos"> 838</span></a>        <span class="n">C</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-839"><a href="#CRIController-839"><span class="linenos"> 839</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-840"><a href="#CRIController-840"><span class="linenos"> 840</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-841"><a href="#CRIController-841"><span class="linenos"> 841</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-842"><a href="#CRIController-842"><span class="linenos"> 842</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-843"><a href="#CRIController-843"><span class="linenos"> 843</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CRIController-844"><a href="#CRIController-844"><span class="linenos"> 844</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="CRIController-845"><a href="#CRIController-845"><span class="linenos"> 845</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-846"><a href="#CRIController-846"><span class="linenos"> 846</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Relative cartesian move in tool coordinate system</span>
</span><span id="CRIController-847"><a href="#CRIController-847"><span class="linenos"> 847</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-848"><a href="#CRIController-848"><span class="linenos"> 848</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-849"><a href="#CRIController-849"><span class="linenos"> 849</span></a><span class="sd">        X,Y,Z,A,B,C,E1-E3 : float</span>
</span><span id="CRIController-850"><a href="#CRIController-850"><span class="linenos"> 850</span></a><span class="sd">            Target angles of axes</span>
</span><span id="CRIController-851"><a href="#CRIController-851"><span class="linenos"> 851</span></a>
</span><span id="CRIController-852"><a href="#CRIController-852"><span class="linenos"> 852</span></a><span class="sd">        velocity : float</span>
</span><span id="CRIController-853"><a href="#CRIController-853"><span class="linenos"> 853</span></a><span class="sd">            Velocity in mm/s</span>
</span><span id="CRIController-854"><a href="#CRIController-854"><span class="linenos"> 854</span></a>
</span><span id="CRIController-855"><a href="#CRIController-855"><span class="linenos"> 855</span></a><span class="sd">        frame : str</span>
</span><span id="CRIController-856"><a href="#CRIController-856"><span class="linenos"> 856</span></a><span class="sd">            frame of the coordinates, default is `#base`</span>
</span><span id="CRIController-857"><a href="#CRIController-857"><span class="linenos"> 857</span></a>
</span><span id="CRIController-858"><a href="#CRIController-858"><span class="linenos"> 858</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="CRIController-859"><a href="#CRIController-859"><span class="linenos"> 859</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="CRIController-860"><a href="#CRIController-860"><span class="linenos"> 860</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="CRIController-861"><a href="#CRIController-861"><span class="linenos"> 861</span></a>
</span><span id="CRIController-862"><a href="#CRIController-862"><span class="linenos"> 862</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="CRIController-863"><a href="#CRIController-863"><span class="linenos"> 863</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="CRIController-864"><a href="#CRIController-864"><span class="linenos"> 864</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-865"><a href="#CRIController-865"><span class="linenos"> 865</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="CRIController-866"><a href="#CRIController-866"><span class="linenos"> 866</span></a>            <span class="sa">f</span><span class="s2">&quot;CMD Move RelativeTool </span><span class="si">{</span><span class="n">X</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Y</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Z</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">B</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">C</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-867"><a href="#CRIController-867"><span class="linenos"> 867</span></a>        <span class="p">)</span>
</span><span id="CRIController-868"><a href="#CRIController-868"><span class="linenos"> 868</span></a>
</span><span id="CRIController-869"><a href="#CRIController-869"><span class="linenos"> 869</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController-870"><a href="#CRIController-870"><span class="linenos"> 870</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="CRIController-871"><a href="#CRIController-871"><span class="linenos"> 871</span></a>
</span><span id="CRIController-872"><a href="#CRIController-872"><span class="linenos"> 872</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-873"><a href="#CRIController-873"><span class="linenos"> 873</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-874"><a href="#CRIController-874"><span class="linenos"> 874</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController-875"><a href="#CRIController-875"><span class="linenos"> 875</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-876"><a href="#CRIController-876"><span class="linenos"> 876</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-877"><a href="#CRIController-877"><span class="linenos"> 877</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-878"><a href="#CRIController-878"><span class="linenos"> 878</span></a>
</span><span id="CRIController-879"><a href="#CRIController-879"><span class="linenos"> 879</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController-880"><a href="#CRIController-880"><span class="linenos"> 880</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-881"><a href="#CRIController-881"><span class="linenos"> 881</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-882"><a href="#CRIController-882"><span class="linenos"> 882</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="CRIController-883"><a href="#CRIController-883"><span class="linenos"> 883</span></a>                    <span class="p">)</span>
</span><span id="CRIController-884"><a href="#CRIController-884"><span class="linenos"> 884</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-885"><a href="#CRIController-885"><span class="linenos"> 885</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exec Error in Move BaseTool command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-886"><a href="#CRIController-886"><span class="linenos"> 886</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-887"><a href="#CRIController-887"><span class="linenos"> 887</span></a>
</span><span id="CRIController-888"><a href="#CRIController-888"><span class="linenos"> 888</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-889"><a href="#CRIController-889"><span class="linenos"> 889</span></a>
</span><span id="CRIController-890"><a href="#CRIController-890"><span class="linenos"> 890</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-891"><a href="#CRIController-891"><span class="linenos"> 891</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-892"><a href="#CRIController-892"><span class="linenos"> 892</span></a>
</span><span id="CRIController-893"><a href="#CRIController-893"><span class="linenos"> 893</span></a>    <span class="k">def</span> <span class="nf">stop_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-894"><a href="#CRIController-894"><span class="linenos"> 894</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop movement</span>
</span><span id="CRIController-895"><a href="#CRIController-895"><span class="linenos"> 895</span></a>
</span><span id="CRIController-896"><a href="#CRIController-896"><span class="linenos"> 896</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-897"><a href="#CRIController-897"><span class="linenos"> 897</span></a><span class="sd">        -------</span>
</span><span id="CRIController-898"><a href="#CRIController-898"><span class="linenos"> 898</span></a><span class="sd">        bool</span>
</span><span id="CRIController-899"><a href="#CRIController-899"><span class="linenos"> 899</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-900"><a href="#CRIController-900"><span class="linenos"> 900</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-901"><a href="#CRIController-901"><span class="linenos"> 901</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-902"><a href="#CRIController-902"><span class="linenos"> 902</span></a>
</span><span id="CRIController-903"><a href="#CRIController-903"><span class="linenos"> 903</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD Move Stop&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-904"><a href="#CRIController-904"><span class="linenos"> 904</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-905"><a href="#CRIController-905"><span class="linenos"> 905</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span>
</span><span id="CRIController-906"><a href="#CRIController-906"><span class="linenos"> 906</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-907"><a href="#CRIController-907"><span class="linenos"> 907</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Stop command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-908"><a href="#CRIController-908"><span class="linenos"> 908</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-909"><a href="#CRIController-909"><span class="linenos"> 909</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-910"><a href="#CRIController-910"><span class="linenos"> 910</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-911"><a href="#CRIController-911"><span class="linenos"> 911</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-912"><a href="#CRIController-912"><span class="linenos"> 912</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-913"><a href="#CRIController-913"><span class="linenos"> 913</span></a>
</span><span id="CRIController-914"><a href="#CRIController-914"><span class="linenos"> 914</span></a>    <span class="k">def</span> <span class="nf">start_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CRIController-915"><a href="#CRIController-915"><span class="linenos"> 915</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;starts live jog. Set speeds via set_jog_values&quot;&quot;&quot;</span>
</span><span id="CRIController-916"><a href="#CRIController-916"><span class="linenos"> 916</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_intervall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ACTIVE_JOG_INTERVAL_SEC</span>
</span><span id="CRIController-917"><a href="#CRIController-917"><span class="linenos"> 917</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">live_jog_active</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="CRIController-918"><a href="#CRIController-918"><span class="linenos"> 918</span></a>
</span><span id="CRIController-919"><a href="#CRIController-919"><span class="linenos"> 919</span></a>    <span class="k">def</span> <span class="nf">stop_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CRIController-920"><a href="#CRIController-920"><span class="linenos"> 920</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;stops live jog.&quot;&quot;&quot;</span>
</span><span id="CRIController-921"><a href="#CRIController-921"><span class="linenos"> 921</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">live_jog_active</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="CRIController-922"><a href="#CRIController-922"><span class="linenos"> 922</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_intervall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ALIVE_JOG_INTERVAL_SEC</span>
</span><span id="CRIController-923"><a href="#CRIController-923"><span class="linenos"> 923</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="CRIController-924"><a href="#CRIController-924"><span class="linenos"> 924</span></a>            <span class="s2">&quot;A1&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-925"><a href="#CRIController-925"><span class="linenos"> 925</span></a>            <span class="s2">&quot;A2&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-926"><a href="#CRIController-926"><span class="linenos"> 926</span></a>            <span class="s2">&quot;A3&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-927"><a href="#CRIController-927"><span class="linenos"> 927</span></a>            <span class="s2">&quot;A4&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-928"><a href="#CRIController-928"><span class="linenos"> 928</span></a>            <span class="s2">&quot;A5&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-929"><a href="#CRIController-929"><span class="linenos"> 929</span></a>            <span class="s2">&quot;A6&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-930"><a href="#CRIController-930"><span class="linenos"> 930</span></a>            <span class="s2">&quot;E1&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-931"><a href="#CRIController-931"><span class="linenos"> 931</span></a>            <span class="s2">&quot;E2&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-932"><a href="#CRIController-932"><span class="linenos"> 932</span></a>            <span class="s2">&quot;E3&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController-933"><a href="#CRIController-933"><span class="linenos"> 933</span></a>        <span class="p">}</span>
</span><span id="CRIController-934"><a href="#CRIController-934"><span class="linenos"> 934</span></a>
</span><span id="CRIController-935"><a href="#CRIController-935"><span class="linenos"> 935</span></a>    <span class="k">def</span> <span class="nf">set_jog_values</span><span class="p">(</span>
</span><span id="CRIController-936"><a href="#CRIController-936"><span class="linenos"> 936</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CRIController-937"><a href="#CRIController-937"><span class="linenos"> 937</span></a>        <span class="n">A1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-938"><a href="#CRIController-938"><span class="linenos"> 938</span></a>        <span class="n">A2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-939"><a href="#CRIController-939"><span class="linenos"> 939</span></a>        <span class="n">A3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-940"><a href="#CRIController-940"><span class="linenos"> 940</span></a>        <span class="n">A4</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-941"><a href="#CRIController-941"><span class="linenos"> 941</span></a>        <span class="n">A5</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-942"><a href="#CRIController-942"><span class="linenos"> 942</span></a>        <span class="n">A6</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-943"><a href="#CRIController-943"><span class="linenos"> 943</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-944"><a href="#CRIController-944"><span class="linenos"> 944</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-945"><a href="#CRIController-945"><span class="linenos"> 945</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController-946"><a href="#CRIController-946"><span class="linenos"> 946</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-947"><a href="#CRIController-947"><span class="linenos"> 947</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CRIController-948"><a href="#CRIController-948"><span class="linenos"> 948</span></a><span class="sd">        Sets live jog axes speeds.</span>
</span><span id="CRIController-949"><a href="#CRIController-949"><span class="linenos"> 949</span></a>
</span><span id="CRIController-950"><a href="#CRIController-950"><span class="linenos"> 950</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-951"><a href="#CRIController-951"><span class="linenos"> 951</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-952"><a href="#CRIController-952"><span class="linenos"> 952</span></a><span class="sd">            A1-A6, E1-3 : float</span>
</span><span id="CRIController-953"><a href="#CRIController-953"><span class="linenos"> 953</span></a><span class="sd">                axes speeds in percent of maximum speed</span>
</span><span id="CRIController-954"><a href="#CRIController-954"><span class="linenos"> 954</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-955"><a href="#CRIController-955"><span class="linenos"> 955</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds_lock</span><span class="p">:</span>
</span><span id="CRIController-956"><a href="#CRIController-956"><span class="linenos"> 956</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="CRIController-957"><a href="#CRIController-957"><span class="linenos"> 957</span></a>                <span class="s2">&quot;A1&quot;</span><span class="p">:</span> <span class="n">A1</span><span class="p">,</span>
</span><span id="CRIController-958"><a href="#CRIController-958"><span class="linenos"> 958</span></a>                <span class="s2">&quot;A2&quot;</span><span class="p">:</span> <span class="n">A2</span><span class="p">,</span>
</span><span id="CRIController-959"><a href="#CRIController-959"><span class="linenos"> 959</span></a>                <span class="s2">&quot;A3&quot;</span><span class="p">:</span> <span class="n">A3</span><span class="p">,</span>
</span><span id="CRIController-960"><a href="#CRIController-960"><span class="linenos"> 960</span></a>                <span class="s2">&quot;A4&quot;</span><span class="p">:</span> <span class="n">A4</span><span class="p">,</span>
</span><span id="CRIController-961"><a href="#CRIController-961"><span class="linenos"> 961</span></a>                <span class="s2">&quot;A5&quot;</span><span class="p">:</span> <span class="n">A5</span><span class="p">,</span>
</span><span id="CRIController-962"><a href="#CRIController-962"><span class="linenos"> 962</span></a>                <span class="s2">&quot;A6&quot;</span><span class="p">:</span> <span class="n">A6</span><span class="p">,</span>
</span><span id="CRIController-963"><a href="#CRIController-963"><span class="linenos"> 963</span></a>                <span class="s2">&quot;E1&quot;</span><span class="p">:</span> <span class="n">E1</span><span class="p">,</span>
</span><span id="CRIController-964"><a href="#CRIController-964"><span class="linenos"> 964</span></a>                <span class="s2">&quot;E2&quot;</span><span class="p">:</span> <span class="n">E2</span><span class="p">,</span>
</span><span id="CRIController-965"><a href="#CRIController-965"><span class="linenos"> 965</span></a>                <span class="s2">&quot;E3&quot;</span><span class="p">:</span> <span class="n">E3</span><span class="p">,</span>
</span><span id="CRIController-966"><a href="#CRIController-966"><span class="linenos"> 966</span></a>            <span class="p">}</span>
</span><span id="CRIController-967"><a href="#CRIController-967"><span class="linenos"> 967</span></a>
</span><span id="CRIController-968"><a href="#CRIController-968"><span class="linenos"> 968</span></a>    <span class="k">def</span> <span class="nf">set_motion_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">motion_type</span><span class="p">:</span> <span class="n">MotionType</span><span class="p">):</span>
</span><span id="CRIController-969"><a href="#CRIController-969"><span class="linenos"> 969</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set motion type</span>
</span><span id="CRIController-970"><a href="#CRIController-970"><span class="linenos"> 970</span></a>
</span><span id="CRIController-971"><a href="#CRIController-971"><span class="linenos"> 971</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-972"><a href="#CRIController-972"><span class="linenos"> 972</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-973"><a href="#CRIController-973"><span class="linenos"> 973</span></a><span class="sd">        motion_type : MotionType</span>
</span><span id="CRIController-974"><a href="#CRIController-974"><span class="linenos"> 974</span></a><span class="sd">            motion type</span>
</span><span id="CRIController-975"><a href="#CRIController-975"><span class="linenos"> 975</span></a>
</span><span id="CRIController-976"><a href="#CRIController-976"><span class="linenos"> 976</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-977"><a href="#CRIController-977"><span class="linenos"> 977</span></a><span class="sd">        -------</span>
</span><span id="CRIController-978"><a href="#CRIController-978"><span class="linenos"> 978</span></a><span class="sd">        bool</span>
</span><span id="CRIController-979"><a href="#CRIController-979"><span class="linenos"> 979</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-980"><a href="#CRIController-980"><span class="linenos"> 980</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-981"><a href="#CRIController-981"><span class="linenos"> 981</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-982"><a href="#CRIController-982"><span class="linenos"> 982</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD MotionType</span><span class="si">{</span><span class="n">motion_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-983"><a href="#CRIController-983"><span class="linenos"> 983</span></a>
</span><span id="CRIController-984"><a href="#CRIController-984"><span class="linenos"> 984</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-985"><a href="#CRIController-985"><span class="linenos"> 985</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-986"><a href="#CRIController-986"><span class="linenos"> 986</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-987"><a href="#CRIController-987"><span class="linenos"> 987</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-988"><a href="#CRIController-988"><span class="linenos"> 988</span></a>                <span class="p">)</span>
</span><span id="CRIController-989"><a href="#CRIController-989"><span class="linenos"> 989</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-990"><a href="#CRIController-990"><span class="linenos"> 990</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in MotionType command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-991"><a href="#CRIController-991"><span class="linenos"> 991</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-992"><a href="#CRIController-992"><span class="linenos"> 992</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-993"><a href="#CRIController-993"><span class="linenos"> 993</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-994"><a href="#CRIController-994"><span class="linenos"> 994</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-995"><a href="#CRIController-995"><span class="linenos"> 995</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-996"><a href="#CRIController-996"><span class="linenos"> 996</span></a>
</span><span id="CRIController-997"><a href="#CRIController-997"><span class="linenos"> 997</span></a>    <span class="k">def</span> <span class="nf">set_override</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">override</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="CRIController-998"><a href="#CRIController-998"><span class="linenos"> 998</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set override</span>
</span><span id="CRIController-999"><a href="#CRIController-999"><span class="linenos"> 999</span></a>
</span><span id="CRIController-1000"><a href="#CRIController-1000"><span class="linenos">1000</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-1001"><a href="#CRIController-1001"><span class="linenos">1001</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-1002"><a href="#CRIController-1002"><span class="linenos">1002</span></a><span class="sd">        override : float</span>
</span><span id="CRIController-1003"><a href="#CRIController-1003"><span class="linenos">1003</span></a><span class="sd">            override percent</span>
</span><span id="CRIController-1004"><a href="#CRIController-1004"><span class="linenos">1004</span></a>
</span><span id="CRIController-1005"><a href="#CRIController-1005"><span class="linenos">1005</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-1006"><a href="#CRIController-1006"><span class="linenos">1006</span></a><span class="sd">        -------</span>
</span><span id="CRIController-1007"><a href="#CRIController-1007"><span class="linenos">1007</span></a><span class="sd">        bool</span>
</span><span id="CRIController-1008"><a href="#CRIController-1008"><span class="linenos">1008</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-1009"><a href="#CRIController-1009"><span class="linenos">1009</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-1010"><a href="#CRIController-1010"><span class="linenos">1010</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1011"><a href="#CRIController-1011"><span class="linenos">1011</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD Override </span><span class="si">{</span><span class="n">override</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-1012"><a href="#CRIController-1012"><span class="linenos">1012</span></a>
</span><span id="CRIController-1013"><a href="#CRIController-1013"><span class="linenos">1013</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1014"><a href="#CRIController-1014"><span class="linenos">1014</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-1015"><a href="#CRIController-1015"><span class="linenos">1015</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-1016"><a href="#CRIController-1016"><span class="linenos">1016</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-1017"><a href="#CRIController-1017"><span class="linenos">1017</span></a>                <span class="p">)</span>
</span><span id="CRIController-1018"><a href="#CRIController-1018"><span class="linenos">1018</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1019"><a href="#CRIController-1019"><span class="linenos">1019</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Override command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-1020"><a href="#CRIController-1020"><span class="linenos">1020</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1021"><a href="#CRIController-1021"><span class="linenos">1021</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1022"><a href="#CRIController-1022"><span class="linenos">1022</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-1023"><a href="#CRIController-1023"><span class="linenos">1023</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1024"><a href="#CRIController-1024"><span class="linenos">1024</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1025"><a href="#CRIController-1025"><span class="linenos">1025</span></a>
</span><span id="CRIController-1026"><a href="#CRIController-1026"><span class="linenos">1026</span></a>    <span class="k">def</span> <span class="nf">set_dout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="CRIController-1027"><a href="#CRIController-1027"><span class="linenos">1027</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set digital out</span>
</span><span id="CRIController-1028"><a href="#CRIController-1028"><span class="linenos">1028</span></a>
</span><span id="CRIController-1029"><a href="#CRIController-1029"><span class="linenos">1029</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-1030"><a href="#CRIController-1030"><span class="linenos">1030</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-1031"><a href="#CRIController-1031"><span class="linenos">1031</span></a><span class="sd">        id : int</span>
</span><span id="CRIController-1032"><a href="#CRIController-1032"><span class="linenos">1032</span></a><span class="sd">            index of DOUT (0 to 63)</span>
</span><span id="CRIController-1033"><a href="#CRIController-1033"><span class="linenos">1033</span></a>
</span><span id="CRIController-1034"><a href="#CRIController-1034"><span class="linenos">1034</span></a><span class="sd">        value : bool</span>
</span><span id="CRIController-1035"><a href="#CRIController-1035"><span class="linenos">1035</span></a><span class="sd">            value to set DOUT to</span>
</span><span id="CRIController-1036"><a href="#CRIController-1036"><span class="linenos">1036</span></a>
</span><span id="CRIController-1037"><a href="#CRIController-1037"><span class="linenos">1037</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-1038"><a href="#CRIController-1038"><span class="linenos">1038</span></a><span class="sd">        -------</span>
</span><span id="CRIController-1039"><a href="#CRIController-1039"><span class="linenos">1039</span></a><span class="sd">        bool</span>
</span><span id="CRIController-1040"><a href="#CRIController-1040"><span class="linenos">1040</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-1041"><a href="#CRIController-1041"><span class="linenos">1041</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-1042"><a href="#CRIController-1042"><span class="linenos">1042</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1043"><a href="#CRIController-1043"><span class="linenos">1043</span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&gt;</span> <span class="mi">63</span><span class="p">):</span>
</span><span id="CRIController-1044"><a href="#CRIController-1044"><span class="linenos">1044</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span>
</span><span id="CRIController-1045"><a href="#CRIController-1045"><span class="linenos">1045</span></a>
</span><span id="CRIController-1046"><a href="#CRIController-1046"><span class="linenos">1046</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD DOUT </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-1047"><a href="#CRIController-1047"><span class="linenos">1047</span></a>
</span><span id="CRIController-1048"><a href="#CRIController-1048"><span class="linenos">1048</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1049"><a href="#CRIController-1049"><span class="linenos">1049</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-1050"><a href="#CRIController-1050"><span class="linenos">1050</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-1051"><a href="#CRIController-1051"><span class="linenos">1051</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-1052"><a href="#CRIController-1052"><span class="linenos">1052</span></a>                <span class="p">)</span>
</span><span id="CRIController-1053"><a href="#CRIController-1053"><span class="linenos">1053</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1054"><a href="#CRIController-1054"><span class="linenos">1054</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in DOUT command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-1055"><a href="#CRIController-1055"><span class="linenos">1055</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1056"><a href="#CRIController-1056"><span class="linenos">1056</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1057"><a href="#CRIController-1057"><span class="linenos">1057</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-1058"><a href="#CRIController-1058"><span class="linenos">1058</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1059"><a href="#CRIController-1059"><span class="linenos">1059</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1060"><a href="#CRIController-1060"><span class="linenos">1060</span></a>
</span><span id="CRIController-1061"><a href="#CRIController-1061"><span class="linenos">1061</span></a>    <span class="k">def</span> <span class="nf">set_din</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="CRIController-1062"><a href="#CRIController-1062"><span class="linenos">1062</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set digital inout, only available in simulation</span>
</span><span id="CRIController-1063"><a href="#CRIController-1063"><span class="linenos">1063</span></a>
</span><span id="CRIController-1064"><a href="#CRIController-1064"><span class="linenos">1064</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-1065"><a href="#CRIController-1065"><span class="linenos">1065</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-1066"><a href="#CRIController-1066"><span class="linenos">1066</span></a><span class="sd">        id : int</span>
</span><span id="CRIController-1067"><a href="#CRIController-1067"><span class="linenos">1067</span></a><span class="sd">            index of DIN (0 to 63)</span>
</span><span id="CRIController-1068"><a href="#CRIController-1068"><span class="linenos">1068</span></a>
</span><span id="CRIController-1069"><a href="#CRIController-1069"><span class="linenos">1069</span></a><span class="sd">        value : bool</span>
</span><span id="CRIController-1070"><a href="#CRIController-1070"><span class="linenos">1070</span></a><span class="sd">            value to set DIN to</span>
</span><span id="CRIController-1071"><a href="#CRIController-1071"><span class="linenos">1071</span></a>
</span><span id="CRIController-1072"><a href="#CRIController-1072"><span class="linenos">1072</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-1073"><a href="#CRIController-1073"><span class="linenos">1073</span></a><span class="sd">        -------</span>
</span><span id="CRIController-1074"><a href="#CRIController-1074"><span class="linenos">1074</span></a><span class="sd">        bool</span>
</span><span id="CRIController-1075"><a href="#CRIController-1075"><span class="linenos">1075</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-1076"><a href="#CRIController-1076"><span class="linenos">1076</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-1077"><a href="#CRIController-1077"><span class="linenos">1077</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1078"><a href="#CRIController-1078"><span class="linenos">1078</span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&gt;</span> <span class="mi">63</span><span class="p">):</span>
</span><span id="CRIController-1079"><a href="#CRIController-1079"><span class="linenos">1079</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span>
</span><span id="CRIController-1080"><a href="#CRIController-1080"><span class="linenos">1080</span></a>
</span><span id="CRIController-1081"><a href="#CRIController-1081"><span class="linenos">1081</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD DIN </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-1082"><a href="#CRIController-1082"><span class="linenos">1082</span></a>
</span><span id="CRIController-1083"><a href="#CRIController-1083"><span class="linenos">1083</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1084"><a href="#CRIController-1084"><span class="linenos">1084</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-1085"><a href="#CRIController-1085"><span class="linenos">1085</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-1086"><a href="#CRIController-1086"><span class="linenos">1086</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-1087"><a href="#CRIController-1087"><span class="linenos">1087</span></a>                <span class="p">)</span>
</span><span id="CRIController-1088"><a href="#CRIController-1088"><span class="linenos">1088</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1089"><a href="#CRIController-1089"><span class="linenos">1089</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in DIN command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-1090"><a href="#CRIController-1090"><span class="linenos">1090</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1091"><a href="#CRIController-1091"><span class="linenos">1091</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1092"><a href="#CRIController-1092"><span class="linenos">1092</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-1093"><a href="#CRIController-1093"><span class="linenos">1093</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1094"><a href="#CRIController-1094"><span class="linenos">1094</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1095"><a href="#CRIController-1095"><span class="linenos">1095</span></a>
</span><span id="CRIController-1096"><a href="#CRIController-1096"><span class="linenos">1096</span></a>    <span class="k">def</span> <span class="nf">set_global_signal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="CRIController-1097"><a href="#CRIController-1097"><span class="linenos">1097</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set global signal</span>
</span><span id="CRIController-1098"><a href="#CRIController-1098"><span class="linenos">1098</span></a>
</span><span id="CRIController-1099"><a href="#CRIController-1099"><span class="linenos">1099</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-1100"><a href="#CRIController-1100"><span class="linenos">1100</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-1101"><a href="#CRIController-1101"><span class="linenos">1101</span></a><span class="sd">        id : int</span>
</span><span id="CRIController-1102"><a href="#CRIController-1102"><span class="linenos">1102</span></a><span class="sd">            index of signal (0 to 99)</span>
</span><span id="CRIController-1103"><a href="#CRIController-1103"><span class="linenos">1103</span></a>
</span><span id="CRIController-1104"><a href="#CRIController-1104"><span class="linenos">1104</span></a><span class="sd">        value : bool</span>
</span><span id="CRIController-1105"><a href="#CRIController-1105"><span class="linenos">1105</span></a><span class="sd">            value to set signal to</span>
</span><span id="CRIController-1106"><a href="#CRIController-1106"><span class="linenos">1106</span></a>
</span><span id="CRIController-1107"><a href="#CRIController-1107"><span class="linenos">1107</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-1108"><a href="#CRIController-1108"><span class="linenos">1108</span></a><span class="sd">        -------</span>
</span><span id="CRIController-1109"><a href="#CRIController-1109"><span class="linenos">1109</span></a><span class="sd">        bool</span>
</span><span id="CRIController-1110"><a href="#CRIController-1110"><span class="linenos">1110</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-1111"><a href="#CRIController-1111"><span class="linenos">1111</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-1112"><a href="#CRIController-1112"><span class="linenos">1112</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1113"><a href="#CRIController-1113"><span class="linenos">1113</span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&gt;</span> <span class="mi">99</span><span class="p">):</span>
</span><span id="CRIController-1114"><a href="#CRIController-1114"><span class="linenos">1114</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span>
</span><span id="CRIController-1115"><a href="#CRIController-1115"><span class="linenos">1115</span></a>
</span><span id="CRIController-1116"><a href="#CRIController-1116"><span class="linenos">1116</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD GSIG </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-1117"><a href="#CRIController-1117"><span class="linenos">1117</span></a>
</span><span id="CRIController-1118"><a href="#CRIController-1118"><span class="linenos">1118</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1119"><a href="#CRIController-1119"><span class="linenos">1119</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-1120"><a href="#CRIController-1120"><span class="linenos">1120</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-1121"><a href="#CRIController-1121"><span class="linenos">1121</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-1122"><a href="#CRIController-1122"><span class="linenos">1122</span></a>                <span class="p">)</span>
</span><span id="CRIController-1123"><a href="#CRIController-1123"><span class="linenos">1123</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1124"><a href="#CRIController-1124"><span class="linenos">1124</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in DIN command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-1125"><a href="#CRIController-1125"><span class="linenos">1125</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1126"><a href="#CRIController-1126"><span class="linenos">1126</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1127"><a href="#CRIController-1127"><span class="linenos">1127</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-1128"><a href="#CRIController-1128"><span class="linenos">1128</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1129"><a href="#CRIController-1129"><span class="linenos">1129</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1130"><a href="#CRIController-1130"><span class="linenos">1130</span></a>
</span><span id="CRIController-1131"><a href="#CRIController-1131"><span class="linenos">1131</span></a>    <span class="k">def</span> <span class="nf">load_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">program_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-1132"><a href="#CRIController-1132"><span class="linenos">1132</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a program file from disk into the robot controller</span>
</span><span id="CRIController-1133"><a href="#CRIController-1133"><span class="linenos">1133</span></a>
</span><span id="CRIController-1134"><a href="#CRIController-1134"><span class="linenos">1134</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-1135"><a href="#CRIController-1135"><span class="linenos">1135</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-1136"><a href="#CRIController-1136"><span class="linenos">1136</span></a><span class="sd">        program_name : str</span>
</span><span id="CRIController-1137"><a href="#CRIController-1137"><span class="linenos">1137</span></a><span class="sd">            the name in the directory /Data/Programs/, e.g. “test.xml”</span>
</span><span id="CRIController-1138"><a href="#CRIController-1138"><span class="linenos">1138</span></a>
</span><span id="CRIController-1139"><a href="#CRIController-1139"><span class="linenos">1139</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-1140"><a href="#CRIController-1140"><span class="linenos">1140</span></a><span class="sd">        -------</span>
</span><span id="CRIController-1141"><a href="#CRIController-1141"><span class="linenos">1141</span></a><span class="sd">        bool</span>
</span><span id="CRIController-1142"><a href="#CRIController-1142"><span class="linenos">1142</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-1143"><a href="#CRIController-1143"><span class="linenos">1143</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-1144"><a href="#CRIController-1144"><span class="linenos">1144</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1145"><a href="#CRIController-1145"><span class="linenos">1145</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD LoadProgram </span><span class="si">{</span><span class="n">program_name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-1146"><a href="#CRIController-1146"><span class="linenos">1146</span></a>
</span><span id="CRIController-1147"><a href="#CRIController-1147"><span class="linenos">1147</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1148"><a href="#CRIController-1148"><span class="linenos">1148</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-1149"><a href="#CRIController-1149"><span class="linenos">1149</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-1150"><a href="#CRIController-1150"><span class="linenos">1150</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-1151"><a href="#CRIController-1151"><span class="linenos">1151</span></a>                <span class="p">)</span>
</span><span id="CRIController-1152"><a href="#CRIController-1152"><span class="linenos">1152</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1153"><a href="#CRIController-1153"><span class="linenos">1153</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in load_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-1154"><a href="#CRIController-1154"><span class="linenos">1154</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1155"><a href="#CRIController-1155"><span class="linenos">1155</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1156"><a href="#CRIController-1156"><span class="linenos">1156</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-1157"><a href="#CRIController-1157"><span class="linenos">1157</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1158"><a href="#CRIController-1158"><span class="linenos">1158</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1159"><a href="#CRIController-1159"><span class="linenos">1159</span></a>
</span><span id="CRIController-1160"><a href="#CRIController-1160"><span class="linenos">1160</span></a>    <span class="k">def</span> <span class="nf">load_logic_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">program_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-1161"><a href="#CRIController-1161"><span class="linenos">1161</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a logic program file from disk into the robot controller</span>
</span><span id="CRIController-1162"><a href="#CRIController-1162"><span class="linenos">1162</span></a>
</span><span id="CRIController-1163"><a href="#CRIController-1163"><span class="linenos">1163</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-1164"><a href="#CRIController-1164"><span class="linenos">1164</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-1165"><a href="#CRIController-1165"><span class="linenos">1165</span></a><span class="sd">        program_name : str</span>
</span><span id="CRIController-1166"><a href="#CRIController-1166"><span class="linenos">1166</span></a><span class="sd">            the name in the directory /Data/Programs/, e.g. “test.xml”</span>
</span><span id="CRIController-1167"><a href="#CRIController-1167"><span class="linenos">1167</span></a>
</span><span id="CRIController-1168"><a href="#CRIController-1168"><span class="linenos">1168</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-1169"><a href="#CRIController-1169"><span class="linenos">1169</span></a><span class="sd">        -------</span>
</span><span id="CRIController-1170"><a href="#CRIController-1170"><span class="linenos">1170</span></a><span class="sd">        bool</span>
</span><span id="CRIController-1171"><a href="#CRIController-1171"><span class="linenos">1171</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-1172"><a href="#CRIController-1172"><span class="linenos">1172</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-1173"><a href="#CRIController-1173"><span class="linenos">1173</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1174"><a href="#CRIController-1174"><span class="linenos">1174</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD LoadLogicProgram </span><span class="si">{</span><span class="n">program_name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-1175"><a href="#CRIController-1175"><span class="linenos">1175</span></a>
</span><span id="CRIController-1176"><a href="#CRIController-1176"><span class="linenos">1176</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1177"><a href="#CRIController-1177"><span class="linenos">1177</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-1178"><a href="#CRIController-1178"><span class="linenos">1178</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-1179"><a href="#CRIController-1179"><span class="linenos">1179</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-1180"><a href="#CRIController-1180"><span class="linenos">1180</span></a>                <span class="p">)</span>
</span><span id="CRIController-1181"><a href="#CRIController-1181"><span class="linenos">1181</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1182"><a href="#CRIController-1182"><span class="linenos">1182</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in load_logic_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-1183"><a href="#CRIController-1183"><span class="linenos">1183</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1184"><a href="#CRIController-1184"><span class="linenos">1184</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1185"><a href="#CRIController-1185"><span class="linenos">1185</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-1186"><a href="#CRIController-1186"><span class="linenos">1186</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1187"><a href="#CRIController-1187"><span class="linenos">1187</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1188"><a href="#CRIController-1188"><span class="linenos">1188</span></a>
</span><span id="CRIController-1189"><a href="#CRIController-1189"><span class="linenos">1189</span></a>    <span class="k">def</span> <span class="nf">start_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-1190"><a href="#CRIController-1190"><span class="linenos">1190</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Start currently loaded Program</span>
</span><span id="CRIController-1191"><a href="#CRIController-1191"><span class="linenos">1191</span></a>
</span><span id="CRIController-1192"><a href="#CRIController-1192"><span class="linenos">1192</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-1193"><a href="#CRIController-1193"><span class="linenos">1193</span></a><span class="sd">        -------</span>
</span><span id="CRIController-1194"><a href="#CRIController-1194"><span class="linenos">1194</span></a><span class="sd">        bool</span>
</span><span id="CRIController-1195"><a href="#CRIController-1195"><span class="linenos">1195</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-1196"><a href="#CRIController-1196"><span class="linenos">1196</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-1197"><a href="#CRIController-1197"><span class="linenos">1197</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1198"><a href="#CRIController-1198"><span class="linenos">1198</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;CMD StartProgram&quot;</span>
</span><span id="CRIController-1199"><a href="#CRIController-1199"><span class="linenos">1199</span></a>
</span><span id="CRIController-1200"><a href="#CRIController-1200"><span class="linenos">1200</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1201"><a href="#CRIController-1201"><span class="linenos">1201</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-1202"><a href="#CRIController-1202"><span class="linenos">1202</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-1203"><a href="#CRIController-1203"><span class="linenos">1203</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-1204"><a href="#CRIController-1204"><span class="linenos">1204</span></a>                <span class="p">)</span>
</span><span id="CRIController-1205"><a href="#CRIController-1205"><span class="linenos">1205</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1206"><a href="#CRIController-1206"><span class="linenos">1206</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in start_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-1207"><a href="#CRIController-1207"><span class="linenos">1207</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1208"><a href="#CRIController-1208"><span class="linenos">1208</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1209"><a href="#CRIController-1209"><span class="linenos">1209</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-1210"><a href="#CRIController-1210"><span class="linenos">1210</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1211"><a href="#CRIController-1211"><span class="linenos">1211</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1212"><a href="#CRIController-1212"><span class="linenos">1212</span></a>
</span><span id="CRIController-1213"><a href="#CRIController-1213"><span class="linenos">1213</span></a>    <span class="k">def</span> <span class="nf">stop_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-1214"><a href="#CRIController-1214"><span class="linenos">1214</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop currently running Program</span>
</span><span id="CRIController-1215"><a href="#CRIController-1215"><span class="linenos">1215</span></a>
</span><span id="CRIController-1216"><a href="#CRIController-1216"><span class="linenos">1216</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-1217"><a href="#CRIController-1217"><span class="linenos">1217</span></a><span class="sd">        -------</span>
</span><span id="CRIController-1218"><a href="#CRIController-1218"><span class="linenos">1218</span></a><span class="sd">        bool</span>
</span><span id="CRIController-1219"><a href="#CRIController-1219"><span class="linenos">1219</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-1220"><a href="#CRIController-1220"><span class="linenos">1220</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-1221"><a href="#CRIController-1221"><span class="linenos">1221</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1222"><a href="#CRIController-1222"><span class="linenos">1222</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;CMD StopProgram&quot;</span>
</span><span id="CRIController-1223"><a href="#CRIController-1223"><span class="linenos">1223</span></a>
</span><span id="CRIController-1224"><a href="#CRIController-1224"><span class="linenos">1224</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1225"><a href="#CRIController-1225"><span class="linenos">1225</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-1226"><a href="#CRIController-1226"><span class="linenos">1226</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-1227"><a href="#CRIController-1227"><span class="linenos">1227</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-1228"><a href="#CRIController-1228"><span class="linenos">1228</span></a>                <span class="p">)</span>
</span><span id="CRIController-1229"><a href="#CRIController-1229"><span class="linenos">1229</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1230"><a href="#CRIController-1230"><span class="linenos">1230</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in stop_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-1231"><a href="#CRIController-1231"><span class="linenos">1231</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1232"><a href="#CRIController-1232"><span class="linenos">1232</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1233"><a href="#CRIController-1233"><span class="linenos">1233</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-1234"><a href="#CRIController-1234"><span class="linenos">1234</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1235"><a href="#CRIController-1235"><span class="linenos">1235</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1236"><a href="#CRIController-1236"><span class="linenos">1236</span></a>
</span><span id="CRIController-1237"><a href="#CRIController-1237"><span class="linenos">1237</span></a>    <span class="k">def</span> <span class="nf">pause_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-1238"><a href="#CRIController-1238"><span class="linenos">1238</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pause currently running Program</span>
</span><span id="CRIController-1239"><a href="#CRIController-1239"><span class="linenos">1239</span></a>
</span><span id="CRIController-1240"><a href="#CRIController-1240"><span class="linenos">1240</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-1241"><a href="#CRIController-1241"><span class="linenos">1241</span></a><span class="sd">        -------</span>
</span><span id="CRIController-1242"><a href="#CRIController-1242"><span class="linenos">1242</span></a><span class="sd">        bool</span>
</span><span id="CRIController-1243"><a href="#CRIController-1243"><span class="linenos">1243</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController-1244"><a href="#CRIController-1244"><span class="linenos">1244</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController-1245"><a href="#CRIController-1245"><span class="linenos">1245</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1246"><a href="#CRIController-1246"><span class="linenos">1246</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;CMD PauseProgram&quot;</span>
</span><span id="CRIController-1247"><a href="#CRIController-1247"><span class="linenos">1247</span></a>
</span><span id="CRIController-1248"><a href="#CRIController-1248"><span class="linenos">1248</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1249"><a href="#CRIController-1249"><span class="linenos">1249</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-1250"><a href="#CRIController-1250"><span class="linenos">1250</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-1251"><a href="#CRIController-1251"><span class="linenos">1251</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-1252"><a href="#CRIController-1252"><span class="linenos">1252</span></a>                <span class="p">)</span>
</span><span id="CRIController-1253"><a href="#CRIController-1253"><span class="linenos">1253</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1254"><a href="#CRIController-1254"><span class="linenos">1254</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in pause_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-1255"><a href="#CRIController-1255"><span class="linenos">1255</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1256"><a href="#CRIController-1256"><span class="linenos">1256</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1257"><a href="#CRIController-1257"><span class="linenos">1257</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-1258"><a href="#CRIController-1258"><span class="linenos">1258</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1259"><a href="#CRIController-1259"><span class="linenos">1259</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1260"><a href="#CRIController-1260"><span class="linenos">1260</span></a>
</span><span id="CRIController-1261"><a href="#CRIController-1261"><span class="linenos">1261</span></a>    <span class="k">def</span> <span class="nf">upload_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span> <span class="n">target_directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-1262"><a href="#CRIController-1262"><span class="linenos">1262</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Uploads file to iRC into `/Data/&lt;target_directory&gt;`</span>
</span><span id="CRIController-1263"><a href="#CRIController-1263"><span class="linenos">1263</span></a>
</span><span id="CRIController-1264"><a href="#CRIController-1264"><span class="linenos">1264</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-1265"><a href="#CRIController-1265"><span class="linenos">1265</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-1266"><a href="#CRIController-1266"><span class="linenos">1266</span></a><span class="sd">        path : str | Path</span>
</span><span id="CRIController-1267"><a href="#CRIController-1267"><span class="linenos">1267</span></a><span class="sd">            Path to file which should be uploaded</span>
</span><span id="CRIController-1268"><a href="#CRIController-1268"><span class="linenos">1268</span></a>
</span><span id="CRIController-1269"><a href="#CRIController-1269"><span class="linenos">1269</span></a><span class="sd">        target_directory : str</span>
</span><span id="CRIController-1270"><a href="#CRIController-1270"><span class="linenos">1270</span></a><span class="sd">            directory on iRC `/Data/&lt;target_directory&gt;` into which file will be uploaded, e.g. `Programs` for normal robot programs</span>
</span><span id="CRIController-1271"><a href="#CRIController-1271"><span class="linenos">1271</span></a>
</span><span id="CRIController-1272"><a href="#CRIController-1272"><span class="linenos">1272</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-1273"><a href="#CRIController-1273"><span class="linenos">1273</span></a><span class="sd">        -------</span>
</span><span id="CRIController-1274"><a href="#CRIController-1274"><span class="linenos">1274</span></a><span class="sd">        bool</span>
</span><span id="CRIController-1275"><a href="#CRIController-1275"><span class="linenos">1275</span></a><span class="sd">            `True` file was uploaded successfully</span>
</span><span id="CRIController-1276"><a href="#CRIController-1276"><span class="linenos">1276</span></a><span class="sd">            `False` there was an error during upload</span>
</span><span id="CRIController-1277"><a href="#CRIController-1277"><span class="linenos">1277</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1278"><a href="#CRIController-1278"><span class="linenos">1278</span></a>
</span><span id="CRIController-1279"><a href="#CRIController-1279"><span class="linenos">1279</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
</span><span id="CRIController-1280"><a href="#CRIController-1280"><span class="linenos">1280</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">path</span>
</span><span id="CRIController-1281"><a href="#CRIController-1281"><span class="linenos">1281</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="CRIController-1282"><a href="#CRIController-1282"><span class="linenos">1282</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="CRIController-1283"><a href="#CRIController-1283"><span class="linenos">1283</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1284"><a href="#CRIController-1284"><span class="linenos">1284</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1285"><a href="#CRIController-1285"><span class="linenos">1285</span></a>
</span><span id="CRIController-1286"><a href="#CRIController-1286"><span class="linenos">1286</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="CRIController-1287"><a href="#CRIController-1287"><span class="linenos">1287</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span><span id="CRIController-1288"><a href="#CRIController-1288"><span class="linenos">1288</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="CRIController-1289"><a href="#CRIController-1289"><span class="linenos">1289</span></a>                <span class="k">while</span> <span class="n">line</span> <span class="o">:=</span> <span class="n">fp</span><span class="o">.</span><span class="n">readline</span><span class="p">():</span>
</span><span id="CRIController-1290"><a href="#CRIController-1290"><span class="linenos">1290</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="CRIController-1291"><a href="#CRIController-1291"><span class="linenos">1291</span></a>                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="CRIController-1292"><a href="#CRIController-1292"><span class="linenos">1292</span></a>
</span><span id="CRIController-1293"><a href="#CRIController-1293"><span class="linenos">1293</span></a>        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="CRIController-1294"><a href="#CRIController-1294"><span class="linenos">1294</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error reading </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="CRIController-1295"><a href="#CRIController-1295"><span class="linenos">1295</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1296"><a href="#CRIController-1296"><span class="linenos">1296</span></a>
</span><span id="CRIController-1297"><a href="#CRIController-1297"><span class="linenos">1297</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD UploadFileInit </span><span class="si">{</span><span class="n">target_directory</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;/&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span><span class="si">}</span><span class="s2"> 0&quot;</span>
</span><span id="CRIController-1298"><a href="#CRIController-1298"><span class="linenos">1298</span></a>
</span><span id="CRIController-1299"><a href="#CRIController-1299"><span class="linenos">1299</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1300"><a href="#CRIController-1300"><span class="linenos">1300</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1301"><a href="#CRIController-1301"><span class="linenos">1301</span></a>
</span><span id="CRIController-1302"><a href="#CRIController-1302"><span class="linenos">1302</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
</span><span id="CRIController-1303"><a href="#CRIController-1303"><span class="linenos">1303</span></a>            <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD UploadFileLine </span><span class="si">{</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController-1304"><a href="#CRIController-1304"><span class="linenos">1304</span></a>
</span><span id="CRIController-1305"><a href="#CRIController-1305"><span class="linenos">1305</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1306"><a href="#CRIController-1306"><span class="linenos">1306</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1307"><a href="#CRIController-1307"><span class="linenos">1307</span></a>
</span><span id="CRIController-1308"><a href="#CRIController-1308"><span class="linenos">1308</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;CMD UploadFileFinish&quot;</span>
</span><span id="CRIController-1309"><a href="#CRIController-1309"><span class="linenos">1309</span></a>
</span><span id="CRIController-1310"><a href="#CRIController-1310"><span class="linenos">1310</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1311"><a href="#CRIController-1311"><span class="linenos">1311</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1312"><a href="#CRIController-1312"><span class="linenos">1312</span></a>
</span><span id="CRIController-1313"><a href="#CRIController-1313"><span class="linenos">1313</span></a>    <span class="k">def</span> <span class="nf">enable_can_bridge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1314"><a href="#CRIController-1314"><span class="linenos">1314</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Enables or diables CAN bridge mode. All other functions are disabled in CAN bridge mode.</span>
</span><span id="CRIController-1315"><a href="#CRIController-1315"><span class="linenos">1315</span></a>
</span><span id="CRIController-1316"><a href="#CRIController-1316"><span class="linenos">1316</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-1317"><a href="#CRIController-1317"><span class="linenos">1317</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-1318"><a href="#CRIController-1318"><span class="linenos">1318</span></a><span class="sd">        enabled : bool</span>
</span><span id="CRIController-1319"><a href="#CRIController-1319"><span class="linenos">1319</span></a><span class="sd">            `True` bridge mode enabled</span>
</span><span id="CRIController-1320"><a href="#CRIController-1320"><span class="linenos">1320</span></a><span class="sd">            `False` bridge mode disabled</span>
</span><span id="CRIController-1321"><a href="#CRIController-1321"><span class="linenos">1321</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1322"><a href="#CRIController-1322"><span class="linenos">1322</span></a>        <span class="k">if</span> <span class="n">enabled</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="CRIController-1323"><a href="#CRIController-1323"><span class="linenos">1323</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="CRIController-1324"><a href="#CRIController-1324"><span class="linenos">1324</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CANBridge SwitchOn&quot;</span><span class="p">)</span>
</span><span id="CRIController-1325"><a href="#CRIController-1325"><span class="linenos">1325</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1326"><a href="#CRIController-1326"><span class="linenos">1326</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CANBridge SwitchOff&quot;</span><span class="p">)</span>
</span><span id="CRIController-1327"><a href="#CRIController-1327"><span class="linenos">1327</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="CRIController-1328"><a href="#CRIController-1328"><span class="linenos">1328</span></a>
</span><span id="CRIController-1329"><a href="#CRIController-1329"><span class="linenos">1329</span></a>    <span class="k">def</span> <span class="nf">can_send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytearray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1330"><a href="#CRIController-1330"><span class="linenos">1330</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Send CAN message in CAN bridge mode.</span>
</span><span id="CRIController-1331"><a href="#CRIController-1331"><span class="linenos">1331</span></a>
</span><span id="CRIController-1332"><a href="#CRIController-1332"><span class="linenos">1332</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController-1333"><a href="#CRIController-1333"><span class="linenos">1333</span></a><span class="sd">        ----------</span>
</span><span id="CRIController-1334"><a href="#CRIController-1334"><span class="linenos">1334</span></a><span class="sd">        msg_id : int</span>
</span><span id="CRIController-1335"><a href="#CRIController-1335"><span class="linenos">1335</span></a><span class="sd">            message id of can message</span>
</span><span id="CRIController-1336"><a href="#CRIController-1336"><span class="linenos">1336</span></a><span class="sd">        length : int</span>
</span><span id="CRIController-1337"><a href="#CRIController-1337"><span class="linenos">1337</span></a><span class="sd">            length of data to send. Actual length used of the 8 data bytes</span>
</span><span id="CRIController-1338"><a href="#CRIController-1338"><span class="linenos">1338</span></a><span class="sd">        data : bytearray</span>
</span><span id="CRIController-1339"><a href="#CRIController-1339"><span class="linenos">1339</span></a><span class="sd">            data for CAN message always 8 bytes</span>
</span><span id="CRIController-1340"><a href="#CRIController-1340"><span class="linenos">1340</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1341"><a href="#CRIController-1341"><span class="linenos">1341</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span><span class="p">:</span>
</span><span id="CRIController-1342"><a href="#CRIController-1342"><span class="linenos">1342</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;can_send: CAN mode not enabled&quot;</span><span class="p">)</span>
</span><span id="CRIController-1343"><a href="#CRIController-1343"><span class="linenos">1343</span></a>            <span class="k">return</span>
</span><span id="CRIController-1344"><a href="#CRIController-1344"><span class="linenos">1344</span></a>
</span><span id="CRIController-1345"><a href="#CRIController-1345"><span class="linenos">1345</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CANBridge Msg ID </span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2"> Len </span><span class="si">{</span><span class="n">length</span><span class="si">}</span><span class="s2"> Data &quot;</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="CRIController-1346"><a href="#CRIController-1346"><span class="linenos">1346</span></a>            <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
</span><span id="CRIController-1347"><a href="#CRIController-1347"><span class="linenos">1347</span></a>        <span class="p">)</span>
</span><span id="CRIController-1348"><a href="#CRIController-1348"><span class="linenos">1348</span></a>
</span><span id="CRIController-1349"><a href="#CRIController-1349"><span class="linenos">1349</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</span><span id="CRIController-1350"><a href="#CRIController-1350"><span class="linenos">1350</span></a>
</span><span id="CRIController-1351"><a href="#CRIController-1351"><span class="linenos">1351</span></a>    <span class="k">def</span> <span class="nf">can_receive</span><span class="p">(</span>
</span><span id="CRIController-1352"><a href="#CRIController-1352"><span class="linenos">1352</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CRIController-1353"><a href="#CRIController-1353"><span class="linenos">1353</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1354"><a href="#CRIController-1354"><span class="linenos">1354</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Receive CAN message in CAN bridge mode from the recveive queue.</span>
</span><span id="CRIController-1355"><a href="#CRIController-1355"><span class="linenos">1355</span></a>
</span><span id="CRIController-1356"><a href="#CRIController-1356"><span class="linenos">1356</span></a><span class="sd">        Returns</span>
</span><span id="CRIController-1357"><a href="#CRIController-1357"><span class="linenos">1357</span></a><span class="sd">        -------</span>
</span><span id="CRIController-1358"><a href="#CRIController-1358"><span class="linenos">1358</span></a><span class="sd">        tuple[int, int, bytearray] | None</span>
</span><span id="CRIController-1359"><a href="#CRIController-1359"><span class="linenos">1359</span></a><span class="sd">            Returns a tuple of (msg_id, length, data) if a message was received or None if nothing was received within the timeout.</span>
</span><span id="CRIController-1360"><a href="#CRIController-1360"><span class="linenos">1360</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1361"><a href="#CRIController-1361"><span class="linenos">1361</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span><span class="p">:</span>
</span><span id="CRIController-1362"><a href="#CRIController-1362"><span class="linenos">1362</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;can_receive: CAN mode not enabled&quot;</span><span class="p">)</span>
</span><span id="CRIController-1363"><a href="#CRIController-1363"><span class="linenos">1363</span></a>            <span class="k">return</span>
</span><span id="CRIController-1364"><a href="#CRIController-1364"><span class="linenos">1364</span></a>
</span><span id="CRIController-1365"><a href="#CRIController-1365"><span class="linenos">1365</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="CRIController-1366"><a href="#CRIController-1366"><span class="linenos">1366</span></a>            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_queue</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">blocking</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
</span><span id="CRIController-1367"><a href="#CRIController-1367"><span class="linenos">1367</span></a>        <span class="k">except</span> <span class="n">Empty</span><span class="p">:</span>
</span><span id="CRIController-1368"><a href="#CRIController-1368"><span class="linenos">1368</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="CRIController-1369"><a href="#CRIController-1369"><span class="linenos">1369</span></a>
</span><span id="CRIController-1370"><a href="#CRIController-1370"><span class="linenos">1370</span></a>        <span class="k">return</span> <span class="n">item</span>
</span><span id="CRIController-1371"><a href="#CRIController-1371"><span class="linenos">1371</span></a>
</span><span id="CRIController-1372"><a href="#CRIController-1372"><span class="linenos">1372</span></a>    <span class="k">def</span> <span class="nf">get_board_temperatures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-1373"><a href="#CRIController-1373"><span class="linenos">1373</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Receive motor controller PCB temperatures and save in robot state</span>
</span><span id="CRIController-1374"><a href="#CRIController-1374"><span class="linenos">1374</span></a>
</span><span id="CRIController-1375"><a href="#CRIController-1375"><span class="linenos">1375</span></a><span class="sd">            Parameters</span>
</span><span id="CRIController-1376"><a href="#CRIController-1376"><span class="linenos">1376</span></a><span class="sd">            ----------</span>
</span><span id="CRIController-1377"><a href="#CRIController-1377"><span class="linenos">1377</span></a><span class="sd">            blocking: bool</span>
</span><span id="CRIController-1378"><a href="#CRIController-1378"><span class="linenos">1378</span></a><span class="sd">                wait for response, always returns True if not waiting</span>
</span><span id="CRIController-1379"><a href="#CRIController-1379"><span class="linenos">1379</span></a><span class="sd">            </span>
</span><span id="CRIController-1380"><a href="#CRIController-1380"><span class="linenos">1380</span></a><span class="sd">            timeout: float | None</span>
</span><span id="CRIController-1381"><a href="#CRIController-1381"><span class="linenos">1381</span></a><span class="sd">                timeout for waiting in seconds or None for infinite waiting</span>
</span><span id="CRIController-1382"><a href="#CRIController-1382"><span class="linenos">1382</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1383"><a href="#CRIController-1383"><span class="linenos">1383</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-1384"><a href="#CRIController-1384"><span class="linenos">1384</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;SYSTEM GetBoardTemp&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;info_boardtemp&quot;</span><span class="p">)</span>
</span><span id="CRIController-1385"><a href="#CRIController-1385"><span class="linenos">1385</span></a>            <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="CRIController-1386"><a href="#CRIController-1386"><span class="linenos">1386</span></a>        <span class="p">):</span>
</span><span id="CRIController-1387"><a href="#CRIController-1387"><span class="linenos">1387</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-1388"><a href="#CRIController-1388"><span class="linenos">1388</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-1389"><a href="#CRIController-1389"><span class="linenos">1389</span></a>                    <span class="s2">&quot;info_boardtemp&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-1390"><a href="#CRIController-1390"><span class="linenos">1390</span></a>                <span class="p">)</span>
</span><span id="CRIController-1391"><a href="#CRIController-1391"><span class="linenos">1391</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1392"><a href="#CRIController-1392"><span class="linenos">1392</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in GetBoardTemp command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-1393"><a href="#CRIController-1393"><span class="linenos">1393</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1394"><a href="#CRIController-1394"><span class="linenos">1394</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1395"><a href="#CRIController-1395"><span class="linenos">1395</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-1396"><a href="#CRIController-1396"><span class="linenos">1396</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1397"><a href="#CRIController-1397"><span class="linenos">1397</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1398"><a href="#CRIController-1398"><span class="linenos">1398</span></a>        
</span><span id="CRIController-1399"><a href="#CRIController-1399"><span class="linenos">1399</span></a>    <span class="k">def</span> <span class="nf">get_motor_temperatures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController-1400"><a href="#CRIController-1400"><span class="linenos">1400</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Receive motor temperatures and save in robot state</span>
</span><span id="CRIController-1401"><a href="#CRIController-1401"><span class="linenos">1401</span></a>
</span><span id="CRIController-1402"><a href="#CRIController-1402"><span class="linenos">1402</span></a><span class="sd">            Parameters</span>
</span><span id="CRIController-1403"><a href="#CRIController-1403"><span class="linenos">1403</span></a><span class="sd">            ----------</span>
</span><span id="CRIController-1404"><a href="#CRIController-1404"><span class="linenos">1404</span></a><span class="sd">            blocking: bool</span>
</span><span id="CRIController-1405"><a href="#CRIController-1405"><span class="linenos">1405</span></a><span class="sd">                wait for response, always returns True if not waiting</span>
</span><span id="CRIController-1406"><a href="#CRIController-1406"><span class="linenos">1406</span></a><span class="sd">            </span>
</span><span id="CRIController-1407"><a href="#CRIController-1407"><span class="linenos">1407</span></a><span class="sd">            timeout: float | None</span>
</span><span id="CRIController-1408"><a href="#CRIController-1408"><span class="linenos">1408</span></a><span class="sd">                timeout for waiting in seconds or None for infinite waiting</span>
</span><span id="CRIController-1409"><a href="#CRIController-1409"><span class="linenos">1409</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController-1410"><a href="#CRIController-1410"><span class="linenos">1410</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-1411"><a href="#CRIController-1411"><span class="linenos">1411</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;SYSTEM GetMotorTemp&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;info_motortemp&quot;</span><span class="p">)</span>
</span><span id="CRIController-1412"><a href="#CRIController-1412"><span class="linenos">1412</span></a>            <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="CRIController-1413"><a href="#CRIController-1413"><span class="linenos">1413</span></a>        <span class="p">):</span>
</span><span id="CRIController-1414"><a href="#CRIController-1414"><span class="linenos">1414</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController-1415"><a href="#CRIController-1415"><span class="linenos">1415</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController-1416"><a href="#CRIController-1416"><span class="linenos">1416</span></a>                    <span class="s2">&quot;info_motortemp&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController-1417"><a href="#CRIController-1417"><span class="linenos">1417</span></a>                <span class="p">)</span>
</span><span id="CRIController-1418"><a href="#CRIController-1418"><span class="linenos">1418</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController-1419"><a href="#CRIController-1419"><span class="linenos">1419</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in GetMotorTemp command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController-1420"><a href="#CRIController-1420"><span class="linenos">1420</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController-1421"><a href="#CRIController-1421"><span class="linenos">1421</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1422"><a href="#CRIController-1422"><span class="linenos">1422</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController-1423"><a href="#CRIController-1423"><span class="linenos">1423</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController-1424"><a href="#CRIController-1424"><span class="linenos">1424</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Class implementing the CRI network protocol for igus Robot Control.</p>
</div>


                            <div id="CRIController.ALIVE_JOG_INTERVAL_SEC" class="classattr">
                                <div class="attr variable">
            <span class="name">ALIVE_JOG_INTERVAL_SEC</span>        =
<span class="default_value">0.2</span>

        
    </div>
    <a class="headerlink" href="#CRIController.ALIVE_JOG_INTERVAL_SEC"></a>
    
    

                            </div>
                            <div id="CRIController.ACTIVE_JOG_INTERVAL_SEC" class="classattr">
                                <div class="attr variable">
            <span class="name">ACTIVE_JOG_INTERVAL_SEC</span>        =
<span class="default_value">0.02</span>

        
    </div>
    <a class="headerlink" href="#CRIController.ACTIVE_JOG_INTERVAL_SEC"></a>
    
    

                            </div>
                            <div id="CRIController.RECEIVE_TIMEOUT_SEC" class="classattr">
                                <div class="attr variable">
            <span class="name">RECEIVE_TIMEOUT_SEC</span>        =
<span class="default_value">5</span>

        
    </div>
    <a class="headerlink" href="#CRIController.RECEIVE_TIMEOUT_SEC"></a>
    
    

                            </div>
                            <div id="CRIController.DEFAULT_ANSWER_TIMEOUT" class="classattr">
                                <div class="attr variable">
            <span class="name">DEFAULT_ANSWER_TIMEOUT</span>        =
<span class="default_value">10.0</span>

        
    </div>
    <a class="headerlink" href="#CRIController.DEFAULT_ANSWER_TIMEOUT"></a>
    
    

                            </div>
                            <div id="CRIController.robot_state" class="classattr">
                                <div class="attr variable">
            <span class="name">robot_state</span><span class="annotation">: <a href="robot_state.html#RobotState">cri_lib.robot_state.RobotState</a></span>

        
    </div>
    <a class="headerlink" href="#CRIController.robot_state"></a>
    
    

                            </div>
                            <div id="CRIController.robot_state_lock" class="classattr">
                                <div class="attr variable">
            <span class="name">robot_state_lock</span>

        
    </div>
    <a class="headerlink" href="#CRIController.robot_state_lock"></a>
    
    

                            </div>
                            <div id="CRIController.parser" class="classattr">
                                <div class="attr variable">
            <span class="name">parser</span>

        
    </div>
    <a class="headerlink" href="#CRIController.parser"></a>
    
    

                            </div>
                            <div id="CRIController.connected" class="classattr">
                                <div class="attr variable">
            <span class="name">connected</span>

        
    </div>
    <a class="headerlink" href="#CRIController.connected"></a>
    
    

                            </div>
                            <div id="CRIController.sock" class="classattr">
                                <div class="attr variable">
            <span class="name">sock</span>

        
    </div>
    <a class="headerlink" href="#CRIController.sock"></a>
    
    

                            </div>
                            <div id="CRIController.socket_write_lock" class="classattr">
                                <div class="attr variable">
            <span class="name">socket_write_lock</span>

        
    </div>
    <a class="headerlink" href="#CRIController.socket_write_lock"></a>
    
    

                            </div>
                            <div id="CRIController.can_mode" class="classattr">
                                <div class="attr variable">
            <span class="name">can_mode</span><span class="annotation">: bool</span>

        
    </div>
    <a class="headerlink" href="#CRIController.can_mode"></a>
    
    

                            </div>
                            <div id="CRIController.can_queue" class="classattr">
                                <div class="attr variable">
            <span class="name">can_queue</span><span class="annotation">: queue.Queue</span>

        
    </div>
    <a class="headerlink" href="#CRIController.can_queue"></a>
    
    

                            </div>
                            <div id="CRIController.jog_thread" class="classattr">
                                <div class="attr variable">
            <span class="name">jog_thread</span>

        
    </div>
    <a class="headerlink" href="#CRIController.jog_thread"></a>
    
    

                            </div>
                            <div id="CRIController.receive_thread" class="classattr">
                                <div class="attr variable">
            <span class="name">receive_thread</span>

        
    </div>
    <a class="headerlink" href="#CRIController.receive_thread"></a>
    
    

                            </div>
                            <div id="CRIController.sent_command_counter_lock" class="classattr">
                                <div class="attr variable">
            <span class="name">sent_command_counter_lock</span>

        
    </div>
    <a class="headerlink" href="#CRIController.sent_command_counter_lock"></a>
    
    

                            </div>
                            <div id="CRIController.sent_command_counter" class="classattr">
                                <div class="attr variable">
            <span class="name">sent_command_counter</span>

        
    </div>
    <a class="headerlink" href="#CRIController.sent_command_counter"></a>
    
    

                            </div>
                            <div id="CRIController.answer_events_lock" class="classattr">
                                <div class="attr variable">
            <span class="name">answer_events_lock</span>

        
    </div>
    <a class="headerlink" href="#CRIController.answer_events_lock"></a>
    
    

                            </div>
                            <div id="CRIController.answer_events" class="classattr">
                                <div class="attr variable">
            <span class="name">answer_events</span><span class="annotation">: dict[str, threading.Event]</span>

        
    </div>
    <a class="headerlink" href="#CRIController.answer_events"></a>
    
    

                            </div>
                            <div id="CRIController.error_messages" class="classattr">
                                <div class="attr variable">
            <span class="name">error_messages</span><span class="annotation">: dict[str, str]</span>

        
    </div>
    <a class="headerlink" href="#CRIController.error_messages"></a>
    
    

                            </div>
                            <div id="CRIController.status_callback" class="classattr">
                                <div class="attr variable">
            <span class="name">status_callback</span>

        
    </div>
    <a class="headerlink" href="#CRIController.status_callback"></a>
    
    

                            </div>
                            <div id="CRIController.live_jog_active" class="classattr">
                                <div class="attr variable">
            <span class="name">live_jog_active</span><span class="annotation">: bool</span>

        
    </div>
    <a class="headerlink" href="#CRIController.live_jog_active"></a>
    
    

                            </div>
                            <div id="CRIController.jog_intervall" class="classattr">
                                <div class="attr variable">
            <span class="name">jog_intervall</span>

        
    </div>
    <a class="headerlink" href="#CRIController.jog_intervall"></a>
    
    

                            </div>
                            <div id="CRIController.jog_speeds" class="classattr">
                                <div class="attr variable">
            <span class="name">jog_speeds</span><span class="annotation">: dict[str, float]</span>

        
    </div>
    <a class="headerlink" href="#CRIController.jog_speeds"></a>
    
    

                            </div>
                            <div id="CRIController.jog_speeds_lock" class="classattr">
                                <div class="attr variable">
            <span class="name">jog_speeds_lock</span>

        
    </div>
    <a class="headerlink" href="#CRIController.jog_speeds_lock"></a>
    
    

                            </div>
                            <div id="CRIController.connect" class="classattr">
                                        <input id="CRIController.connect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">connect</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">host</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3920</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.connect-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.connect"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.connect-77"><a href="#CRIController.connect-77"><span class="linenos"> 77</span></a>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3920</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.connect-78"><a href="#CRIController.connect-78"><span class="linenos"> 78</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CRIController.connect-79"><a href="#CRIController.connect-79"><span class="linenos"> 79</span></a><span class="sd">        Connect to iRC.</span>
</span><span id="CRIController.connect-80"><a href="#CRIController.connect-80"><span class="linenos"> 80</span></a>
</span><span id="CRIController.connect-81"><a href="#CRIController.connect-81"><span class="linenos"> 81</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.connect-82"><a href="#CRIController.connect-82"><span class="linenos"> 82</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.connect-83"><a href="#CRIController.connect-83"><span class="linenos"> 83</span></a><span class="sd">        host : str</span>
</span><span id="CRIController.connect-84"><a href="#CRIController.connect-84"><span class="linenos"> 84</span></a><span class="sd">            IP address or hostname of iRC</span>
</span><span id="CRIController.connect-85"><a href="#CRIController.connect-85"><span class="linenos"> 85</span></a><span class="sd">        port : int</span>
</span><span id="CRIController.connect-86"><a href="#CRIController.connect-86"><span class="linenos"> 86</span></a><span class="sd">            port of iRC</span>
</span><span id="CRIController.connect-87"><a href="#CRIController.connect-87"><span class="linenos"> 87</span></a>
</span><span id="CRIController.connect-88"><a href="#CRIController.connect-88"><span class="linenos"> 88</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.connect-89"><a href="#CRIController.connect-89"><span class="linenos"> 89</span></a><span class="sd">        -------</span>
</span><span id="CRIController.connect-90"><a href="#CRIController.connect-90"><span class="linenos"> 90</span></a><span class="sd">        bool</span>
</span><span id="CRIController.connect-91"><a href="#CRIController.connect-91"><span class="linenos"> 91</span></a><span class="sd">            True if connected</span>
</span><span id="CRIController.connect-92"><a href="#CRIController.connect-92"><span class="linenos"> 92</span></a><span class="sd">            False if not connected</span>
</span><span id="CRIController.connect-93"><a href="#CRIController.connect-93"><span class="linenos"> 93</span></a>
</span><span id="CRIController.connect-94"><a href="#CRIController.connect-94"><span class="linenos"> 94</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.connect-95"><a href="#CRIController.connect-95"><span class="linenos"> 95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
</span><span id="CRIController.connect-96"><a href="#CRIController.connect-96"><span class="linenos"> 96</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>  <span class="c1"># Set a timeout of 0.1 seconds</span>
</span><span id="CRIController.connect-97"><a href="#CRIController.connect-97"><span class="linenos"> 97</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="CRIController.connect-98"><a href="#CRIController.connect-98"><span class="linenos"> 98</span></a>            <span class="n">ip</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostbyname</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>
</span><span id="CRIController.connect-99"><a href="#CRIController.connect-99"><span class="linenos"> 99</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">ip</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
</span><span id="CRIController.connect-100"><a href="#CRIController.connect-100"><span class="linenos">100</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> Robot connected: </span><span class="si">%s</span><span class="s2">:</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
</span><span id="CRIController.connect-101"><a href="#CRIController.connect-101"><span class="linenos">101</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="CRIController.connect-102"><a href="#CRIController.connect-102"><span class="linenos">102</span></a>
</span><span id="CRIController.connect-103"><a href="#CRIController.connect-103"><span class="linenos">103</span></a>            <span class="c1"># Start receiving commands</span>
</span><span id="CRIController.connect-104"><a href="#CRIController.connect-104"><span class="linenos">104</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">receive_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="CRIController.connect-105"><a href="#CRIController.connect-105"><span class="linenos">105</span></a>
</span><span id="CRIController.connect-106"><a href="#CRIController.connect-106"><span class="linenos">106</span></a>            <span class="c1"># Start sending ALIVEJOG message</span>
</span><span id="CRIController.connect-107"><a href="#CRIController.connect-107"><span class="linenos">107</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">jog_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="CRIController.connect-108"><a href="#CRIController.connect-108"><span class="linenos">108</span></a>
</span><span id="CRIController.connect-109"><a href="#CRIController.connect-109"><span class="linenos">109</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.connect-110"><a href="#CRIController.connect-110"><span class="linenos">110</span></a>
</span><span id="CRIController.connect-111"><a href="#CRIController.connect-111"><span class="linenos">111</span></a>        <span class="k">except</span> <span class="ne">ConnectionRefusedError</span><span class="p">:</span>
</span><span id="CRIController.connect-112"><a href="#CRIController.connect-112"><span class="linenos">112</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="CRIController.connect-113"><a href="#CRIController.connect-113"><span class="linenos">113</span></a>                <span class="sa">f</span><span class="s2">&quot;Connection refused: Unable to connect to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.connect-114"><a href="#CRIController.connect-114"><span class="linenos">114</span></a>            <span class="p">)</span>
</span><span id="CRIController.connect-115"><a href="#CRIController.connect-115"><span class="linenos">115</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.connect-116"><a href="#CRIController.connect-116"><span class="linenos">116</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="CRIController.connect-117"><a href="#CRIController.connect-117"><span class="linenos">117</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="CRIController.connect-118"><a href="#CRIController.connect-118"><span class="linenos">118</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Connect to iRC.</p>

<h2 id="parameters">Parameters</h2>

<p>host : str
    IP address or hostname of iRC
port : int
    port of iRC</p>

<h2 id="returns">Returns</h2>

<p>bool
    True if connected
    False if not connected</p>
</div>


                            </div>
                            <div id="CRIController.close" class="classattr">
                                        <input id="CRIController.close-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">close</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="CRIController.close-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.close"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.close-120"><a href="#CRIController.close-120"><span class="linenos">120</span></a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.close-121"><a href="#CRIController.close-121"><span class="linenos">121</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CRIController.close-122"><a href="#CRIController.close-122"><span class="linenos">122</span></a><span class="sd">        Close network connection. Might block for a while waiting for the threads to finish.</span>
</span><span id="CRIController.close-123"><a href="#CRIController.close-123"><span class="linenos">123</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.close-124"><a href="#CRIController.close-124"><span class="linenos">124</span></a>
</span><span id="CRIController.close-125"><a href="#CRIController.close-125"><span class="linenos">125</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
</span><span id="CRIController.close-126"><a href="#CRIController.close-126"><span class="linenos">126</span></a>            <span class="k">return</span>
</span><span id="CRIController.close-127"><a href="#CRIController.close-127"><span class="linenos">127</span></a>
</span><span id="CRIController.close-128"><a href="#CRIController.close-128"><span class="linenos">128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;QUIT&quot;</span><span class="p">)</span>
</span><span id="CRIController.close-129"><a href="#CRIController.close-129"><span class="linenos">129</span></a>
</span><span id="CRIController.close-130"><a href="#CRIController.close-130"><span class="linenos">130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="CRIController.close-131"><a href="#CRIController.close-131"><span class="linenos">131</span></a>
</span><span id="CRIController.close-132"><a href="#CRIController.close-132"><span class="linenos">132</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jog_thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
</span><span id="CRIController.close-133"><a href="#CRIController.close-133"><span class="linenos">133</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">jog_thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="CRIController.close-134"><a href="#CRIController.close-134"><span class="linenos">134</span></a>
</span><span id="CRIController.close-135"><a href="#CRIController.close-135"><span class="linenos">135</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">receive_thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
</span><span id="CRIController.close-136"><a href="#CRIController.close-136"><span class="linenos">136</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">receive_thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="CRIController.close-137"><a href="#CRIController.close-137"><span class="linenos">137</span></a>
</span><span id="CRIController.close-138"><a href="#CRIController.close-138"><span class="linenos">138</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Close network connection. Might block for a while waiting for the threads to finish.</p>
</div>


                            </div>
                            <div id="CRIController.wait_for_status_update" class="classattr">
                                        <input id="CRIController.wait_for_status_update-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">wait_for_status_update</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="CRIController.wait_for_status_update-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.wait_for_status_update"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.wait_for_status_update-331"><a href="#CRIController.wait_for_status_update-331"><span class="linenos">331</span></a>    <span class="k">def</span> <span class="nf">wait_for_status_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.wait_for_status_update-332"><a href="#CRIController.wait_for_status_update-332"><span class="linenos">332</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for next STATUS message.</span>
</span><span id="CRIController.wait_for_status_update-333"><a href="#CRIController.wait_for_status_update-333"><span class="linenos">333</span></a>
</span><span id="CRIController.wait_for_status_update-334"><a href="#CRIController.wait_for_status_update-334"><span class="linenos">334</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.wait_for_status_update-335"><a href="#CRIController.wait_for_status_update-335"><span class="linenos">335</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.wait_for_status_update-336"><a href="#CRIController.wait_for_status_update-336"><span class="linenos">336</span></a><span class="sd">        timeout : float | None</span>
</span><span id="CRIController.wait_for_status_update-337"><a href="#CRIController.wait_for_status_update-337"><span class="linenos">337</span></a><span class="sd">            Maximum wait time, infinite if `None`</span>
</span><span id="CRIController.wait_for_status_update-338"><a href="#CRIController.wait_for_status_update-338"><span class="linenos">338</span></a>
</span><span id="CRIController.wait_for_status_update-339"><a href="#CRIController.wait_for_status_update-339"><span class="linenos">339</span></a><span class="sd">        Raises</span>
</span><span id="CRIController.wait_for_status_update-340"><a href="#CRIController.wait_for_status_update-340"><span class="linenos">340</span></a><span class="sd">        ------</span>
</span><span id="CRIController.wait_for_status_update-341"><a href="#CRIController.wait_for_status_update-341"><span class="linenos">341</span></a><span class="sd">        CRITimeoutError</span>
</span><span id="CRIController.wait_for_status_update-342"><a href="#CRIController.wait_for_status_update-342"><span class="linenos">342</span></a><span class="sd">            raised if no status update was received in given timeout</span>
</span><span id="CRIController.wait_for_status_update-343"><a href="#CRIController.wait_for_status_update-343"><span class="linenos">343</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.wait_for_status_update-344"><a href="#CRIController.wait_for_status_update-344"><span class="linenos">344</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">)</span>
</span><span id="CRIController.wait_for_status_update-345"><a href="#CRIController.wait_for_status_update-345"><span class="linenos">345</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Wait for next STATUS message.</p>

<h2 id="parameters">Parameters</h2>

<p>timeout : float | None
    Maximum wait time, infinite if <code>None</code></p>

<h2 id="raises">Raises</h2>

<p>CRITimeoutError
    raised if no status update was received in given timeout</p>
</div>


                            </div>
                            <div id="CRIController.register_status_callback" class="classattr">
                                        <input id="CRIController.register_status_callback-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">register_status_callback</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="CRIController.register_status_callback-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.register_status_callback"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.register_status_callback-347"><a href="#CRIController.register_status_callback-347"><span class="linenos">347</span></a>    <span class="k">def</span> <span class="nf">register_status_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.register_status_callback-348"><a href="#CRIController.register_status_callback-348"><span class="linenos">348</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a callback which is called every time a STATUS message was parsed to the state.</span>
</span><span id="CRIController.register_status_callback-349"><a href="#CRIController.register_status_callback-349"><span class="linenos">349</span></a><span class="sd">        The callback must have the following definition:</span>
</span><span id="CRIController.register_status_callback-350"><a href="#CRIController.register_status_callback-350"><span class="linenos">350</span></a><span class="sd">        def callback(state: RobotState)</span>
</span><span id="CRIController.register_status_callback-351"><a href="#CRIController.register_status_callback-351"><span class="linenos">351</span></a><span class="sd">        Keep the callback as fast as possible as it will be excute by the receive thread and no messages will be processed, while is runs.</span>
</span><span id="CRIController.register_status_callback-352"><a href="#CRIController.register_status_callback-352"><span class="linenos">352</span></a><span class="sd">        Also keep thread safety in mind, as the callback will be excuted by the receive thread.</span>
</span><span id="CRIController.register_status_callback-353"><a href="#CRIController.register_status_callback-353"><span class="linenos">353</span></a>
</span><span id="CRIController.register_status_callback-354"><a href="#CRIController.register_status_callback-354"><span class="linenos">354</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.register_status_callback-355"><a href="#CRIController.register_status_callback-355"><span class="linenos">355</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.register_status_callback-356"><a href="#CRIController.register_status_callback-356"><span class="linenos">356</span></a><span class="sd">        callback : Callable</span>
</span><span id="CRIController.register_status_callback-357"><a href="#CRIController.register_status_callback-357"><span class="linenos">357</span></a><span class="sd">            callback function to be called, pass `None` to deregister a callback</span>
</span><span id="CRIController.register_status_callback-358"><a href="#CRIController.register_status_callback-358"><span class="linenos">358</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.register_status_callback-359"><a href="#CRIController.register_status_callback-359"><span class="linenos">359</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">status_callback</span> <span class="o">=</span> <span class="n">callback</span>
</span></pre></div>


            <div class="docstring"><p>Register a callback which is called every time a STATUS message was parsed to the state.
The callback must have the following definition:
def callback(state: RobotState)
Keep the callback as fast as possible as it will be excute by the receive thread and no messages will be processed, while is runs.
Also keep thread safety in mind, as the callback will be excuted by the receive thread.</p>

<h2 id="parameters">Parameters</h2>

<p>callback : Callable
    callback function to be called, pass <code>None</code> to deregister a callback</p>
</div>


                            </div>
                            <div id="CRIController.reset" class="classattr">
                                        <input id="CRIController.reset-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">reset</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.reset-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.reset"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.reset-361"><a href="#CRIController.reset-361"><span class="linenos">361</span></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.reset-362"><a href="#CRIController.reset-362"><span class="linenos">362</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset robot</span>
</span><span id="CRIController.reset-363"><a href="#CRIController.reset-363"><span class="linenos">363</span></a>
</span><span id="CRIController.reset-364"><a href="#CRIController.reset-364"><span class="linenos">364</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.reset-365"><a href="#CRIController.reset-365"><span class="linenos">365</span></a><span class="sd">        -------</span>
</span><span id="CRIController.reset-366"><a href="#CRIController.reset-366"><span class="linenos">366</span></a><span class="sd">        bool:</span>
</span><span id="CRIController.reset-367"><a href="#CRIController.reset-367"><span class="linenos">367</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.reset-368"><a href="#CRIController.reset-368"><span class="linenos">368</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.reset-369"><a href="#CRIController.reset-369"><span class="linenos">369</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.reset-370"><a href="#CRIController.reset-370"><span class="linenos">370</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD Reset&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.reset-371"><a href="#CRIController.reset-371"><span class="linenos">371</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.reset-372"><a href="#CRIController.reset-372"><span class="linenos">372</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.reset-373"><a href="#CRIController.reset-373"><span class="linenos">373</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.reset-374"><a href="#CRIController.reset-374"><span class="linenos">374</span></a>                <span class="p">)</span>
</span><span id="CRIController.reset-375"><a href="#CRIController.reset-375"><span class="linenos">375</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.reset-376"><a href="#CRIController.reset-376"><span class="linenos">376</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in RESET command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.reset-377"><a href="#CRIController.reset-377"><span class="linenos">377</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.reset-378"><a href="#CRIController.reset-378"><span class="linenos">378</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.reset-379"><a href="#CRIController.reset-379"><span class="linenos">379</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.reset-380"><a href="#CRIController.reset-380"><span class="linenos">380</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.reset-381"><a href="#CRIController.reset-381"><span class="linenos">381</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Reset robot</p>

<h2 id="returns">Returns</h2>

<p>bool:
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.enable" class="classattr">
                                        <input id="CRIController.enable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">enable</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.enable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.enable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.enable-383"><a href="#CRIController.enable-383"><span class="linenos">383</span></a>    <span class="k">def</span> <span class="nf">enable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.enable-384"><a href="#CRIController.enable-384"><span class="linenos">384</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Enable robot</span>
</span><span id="CRIController.enable-385"><a href="#CRIController.enable-385"><span class="linenos">385</span></a><span class="sd">           An potential error message received from the robot will be logged with priority DEBUG</span>
</span><span id="CRIController.enable-386"><a href="#CRIController.enable-386"><span class="linenos">386</span></a>
</span><span id="CRIController.enable-387"><a href="#CRIController.enable-387"><span class="linenos">387</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.enable-388"><a href="#CRIController.enable-388"><span class="linenos">388</span></a><span class="sd">        -------</span>
</span><span id="CRIController.enable-389"><a href="#CRIController.enable-389"><span class="linenos">389</span></a><span class="sd">        bool</span>
</span><span id="CRIController.enable-390"><a href="#CRIController.enable-390"><span class="linenos">390</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.enable-391"><a href="#CRIController.enable-391"><span class="linenos">391</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.enable-392"><a href="#CRIController.enable-392"><span class="linenos">392</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.enable-393"><a href="#CRIController.enable-393"><span class="linenos">393</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD Enable&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.enable-394"><a href="#CRIController.enable-394"><span class="linenos">394</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.enable-395"><a href="#CRIController.enable-395"><span class="linenos">395</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.enable-396"><a href="#CRIController.enable-396"><span class="linenos">396</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.enable-397"><a href="#CRIController.enable-397"><span class="linenos">397</span></a>                <span class="p">)</span>
</span><span id="CRIController.enable-398"><a href="#CRIController.enable-398"><span class="linenos">398</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.enable-399"><a href="#CRIController.enable-399"><span class="linenos">399</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in ENABLE command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.enable-400"><a href="#CRIController.enable-400"><span class="linenos">400</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.enable-401"><a href="#CRIController.enable-401"><span class="linenos">401</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.enable-402"><a href="#CRIController.enable-402"><span class="linenos">402</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.enable-403"><a href="#CRIController.enable-403"><span class="linenos">403</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.enable-404"><a href="#CRIController.enable-404"><span class="linenos">404</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Enable robot
   An potential error message received from the robot will be logged with priority DEBUG</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.disable" class="classattr">
                                        <input id="CRIController.disable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">disable</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.disable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.disable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.disable-406"><a href="#CRIController.disable-406"><span class="linenos">406</span></a>    <span class="k">def</span> <span class="nf">disable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.disable-407"><a href="#CRIController.disable-407"><span class="linenos">407</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Disable robot</span>
</span><span id="CRIController.disable-408"><a href="#CRIController.disable-408"><span class="linenos">408</span></a>
</span><span id="CRIController.disable-409"><a href="#CRIController.disable-409"><span class="linenos">409</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.disable-410"><a href="#CRIController.disable-410"><span class="linenos">410</span></a><span class="sd">        -------</span>
</span><span id="CRIController.disable-411"><a href="#CRIController.disable-411"><span class="linenos">411</span></a><span class="sd">        bool</span>
</span><span id="CRIController.disable-412"><a href="#CRIController.disable-412"><span class="linenos">412</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.disable-413"><a href="#CRIController.disable-413"><span class="linenos">413</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.disable-414"><a href="#CRIController.disable-414"><span class="linenos">414</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.disable-415"><a href="#CRIController.disable-415"><span class="linenos">415</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD Disable&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.disable-416"><a href="#CRIController.disable-416"><span class="linenos">416</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.disable-417"><a href="#CRIController.disable-417"><span class="linenos">417</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.disable-418"><a href="#CRIController.disable-418"><span class="linenos">418</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.disable-419"><a href="#CRIController.disable-419"><span class="linenos">419</span></a>                <span class="p">)</span>
</span><span id="CRIController.disable-420"><a href="#CRIController.disable-420"><span class="linenos">420</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.disable-421"><a href="#CRIController.disable-421"><span class="linenos">421</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in DISABLE command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.disable-422"><a href="#CRIController.disable-422"><span class="linenos">422</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.disable-423"><a href="#CRIController.disable-423"><span class="linenos">423</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.disable-424"><a href="#CRIController.disable-424"><span class="linenos">424</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.disable-425"><a href="#CRIController.disable-425"><span class="linenos">425</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.disable-426"><a href="#CRIController.disable-426"><span class="linenos">426</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Disable robot</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.set_active_control" class="classattr">
                                        <input id="CRIController.set_active_control-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_active_control</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">active</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="CRIController.set_active_control-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.set_active_control"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.set_active_control-428"><a href="#CRIController.set_active_control-428"><span class="linenos">428</span></a>    <span class="k">def</span> <span class="nf">set_active_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">active</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.set_active_control-429"><a href="#CRIController.set_active_control-429"><span class="linenos">429</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Acquire or return active control of robot</span>
</span><span id="CRIController.set_active_control-430"><a href="#CRIController.set_active_control-430"><span class="linenos">430</span></a>
</span><span id="CRIController.set_active_control-431"><a href="#CRIController.set_active_control-431"><span class="linenos">431</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.set_active_control-432"><a href="#CRIController.set_active_control-432"><span class="linenos">432</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.set_active_control-433"><a href="#CRIController.set_active_control-433"><span class="linenos">433</span></a><span class="sd">        active : bool</span>
</span><span id="CRIController.set_active_control-434"><a href="#CRIController.set_active_control-434"><span class="linenos">434</span></a><span class="sd">            `True` acquire active control</span>
</span><span id="CRIController.set_active_control-435"><a href="#CRIController.set_active_control-435"><span class="linenos">435</span></a><span class="sd">            `False` return active control</span>
</span><span id="CRIController.set_active_control-436"><a href="#CRIController.set_active_control-436"><span class="linenos">436</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.set_active_control-437"><a href="#CRIController.set_active_control-437"><span class="linenos">437</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.set_active_control-438"><a href="#CRIController.set_active_control-438"><span class="linenos">438</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span>
</span><span id="CRIController.set_active_control-439"><a href="#CRIController.set_active_control-439"><span class="linenos">439</span></a>                <span class="sa">f</span><span class="s2">&quot;CMD SetActive </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">active</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="CRIController.set_active_control-440"><a href="#CRIController.set_active_control-440"><span class="linenos">440</span></a>                <span class="kc">True</span><span class="p">,</span>
</span><span id="CRIController.set_active_control-441"><a href="#CRIController.set_active_control-441"><span class="linenos">441</span></a>                <span class="sa">f</span><span class="s2">&quot;Active_</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">active</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="CRIController.set_active_control-442"><a href="#CRIController.set_active_control-442"><span class="linenos">442</span></a>            <span class="p">)</span>
</span><span id="CRIController.set_active_control-443"><a href="#CRIController.set_active_control-443"><span class="linenos">443</span></a>            <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="CRIController.set_active_control-444"><a href="#CRIController.set_active_control-444"><span class="linenos">444</span></a>        <span class="p">):</span>
</span><span id="CRIController.set_active_control-445"><a href="#CRIController.set_active_control-445"><span class="linenos">445</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.set_active_control-446"><a href="#CRIController.set_active_control-446"><span class="linenos">446</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.set_active_control-447"><a href="#CRIController.set_active_control-447"><span class="linenos">447</span></a>                    <span class="sa">f</span><span class="s2">&quot;Active_</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">active</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.set_active_control-448"><a href="#CRIController.set_active_control-448"><span class="linenos">448</span></a>                <span class="p">)</span>
</span><span id="CRIController.set_active_control-449"><a href="#CRIController.set_active_control-449"><span class="linenos">449</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.set_active_control-450"><a href="#CRIController.set_active_control-450"><span class="linenos">450</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in set active control command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.set_active_control-451"><a href="#CRIController.set_active_control-451"><span class="linenos">451</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.set_active_control-452"><a href="#CRIController.set_active_control-452"><span class="linenos">452</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.set_active_control-453"><a href="#CRIController.set_active_control-453"><span class="linenos">453</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.set_active_control-454"><a href="#CRIController.set_active_control-454"><span class="linenos">454</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.set_active_control-455"><a href="#CRIController.set_active_control-455"><span class="linenos">455</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Acquire or return active control of robot</p>

<h2 id="parameters">Parameters</h2>

<p>active : bool
    <code>True</code> acquire active control
    <code>False</code> return active control</p>
</div>


                            </div>
                            <div id="CRIController.zero_all_joints" class="classattr">
                                        <input id="CRIController.zero_all_joints-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">zero_all_joints</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.zero_all_joints-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.zero_all_joints"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.zero_all_joints-457"><a href="#CRIController.zero_all_joints-457"><span class="linenos">457</span></a>    <span class="k">def</span> <span class="nf">zero_all_joints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.zero_all_joints-458"><a href="#CRIController.zero_all_joints-458"><span class="linenos">458</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set all joints to zero</span>
</span><span id="CRIController.zero_all_joints-459"><a href="#CRIController.zero_all_joints-459"><span class="linenos">459</span></a>
</span><span id="CRIController.zero_all_joints-460"><a href="#CRIController.zero_all_joints-460"><span class="linenos">460</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.zero_all_joints-461"><a href="#CRIController.zero_all_joints-461"><span class="linenos">461</span></a><span class="sd">        -------</span>
</span><span id="CRIController.zero_all_joints-462"><a href="#CRIController.zero_all_joints-462"><span class="linenos">462</span></a><span class="sd">        bool</span>
</span><span id="CRIController.zero_all_joints-463"><a href="#CRIController.zero_all_joints-463"><span class="linenos">463</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.zero_all_joints-464"><a href="#CRIController.zero_all_joints-464"><span class="linenos">464</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.zero_all_joints-465"><a href="#CRIController.zero_all_joints-465"><span class="linenos">465</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.zero_all_joints-466"><a href="#CRIController.zero_all_joints-466"><span class="linenos">466</span></a>
</span><span id="CRIController.zero_all_joints-467"><a href="#CRIController.zero_all_joints-467"><span class="linenos">467</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD SetJointsToZero&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.zero_all_joints-468"><a href="#CRIController.zero_all_joints-468"><span class="linenos">468</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.zero_all_joints-469"><a href="#CRIController.zero_all_joints-469"><span class="linenos">469</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.zero_all_joints-470"><a href="#CRIController.zero_all_joints-470"><span class="linenos">470</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.zero_all_joints-471"><a href="#CRIController.zero_all_joints-471"><span class="linenos">471</span></a>                <span class="p">)</span>
</span><span id="CRIController.zero_all_joints-472"><a href="#CRIController.zero_all_joints-472"><span class="linenos">472</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.zero_all_joints-473"><a href="#CRIController.zero_all_joints-473"><span class="linenos">473</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in SetJointsToZero command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.zero_all_joints-474"><a href="#CRIController.zero_all_joints-474"><span class="linenos">474</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.zero_all_joints-475"><a href="#CRIController.zero_all_joints-475"><span class="linenos">475</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.zero_all_joints-476"><a href="#CRIController.zero_all_joints-476"><span class="linenos">476</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.zero_all_joints-477"><a href="#CRIController.zero_all_joints-477"><span class="linenos">477</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.zero_all_joints-478"><a href="#CRIController.zero_all_joints-478"><span class="linenos">478</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Set all joints to zero</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.reference_all_joints" class="classattr">
                                        <input id="CRIController.reference_all_joints-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">reference_all_joints</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.reference_all_joints-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.reference_all_joints"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.reference_all_joints-480"><a href="#CRIController.reference_all_joints-480"><span class="linenos">480</span></a>    <span class="k">def</span> <span class="nf">reference_all_joints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.reference_all_joints-481"><a href="#CRIController.reference_all_joints-481"><span class="linenos">481</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reference all joints. Long timout of 30 seconds.</span>
</span><span id="CRIController.reference_all_joints-482"><a href="#CRIController.reference_all_joints-482"><span class="linenos">482</span></a>
</span><span id="CRIController.reference_all_joints-483"><a href="#CRIController.reference_all_joints-483"><span class="linenos">483</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.reference_all_joints-484"><a href="#CRIController.reference_all_joints-484"><span class="linenos">484</span></a><span class="sd">        -------</span>
</span><span id="CRIController.reference_all_joints-485"><a href="#CRIController.reference_all_joints-485"><span class="linenos">485</span></a><span class="sd">        bool</span>
</span><span id="CRIController.reference_all_joints-486"><a href="#CRIController.reference_all_joints-486"><span class="linenos">486</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.reference_all_joints-487"><a href="#CRIController.reference_all_joints-487"><span class="linenos">487</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.reference_all_joints-488"><a href="#CRIController.reference_all_joints-488"><span class="linenos">488</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.reference_all_joints-489"><a href="#CRIController.reference_all_joints-489"><span class="linenos">489</span></a>
</span><span id="CRIController.reference_all_joints-490"><a href="#CRIController.reference_all_joints-490"><span class="linenos">490</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD ReferenceAllJoints&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.reference_all_joints-491"><a href="#CRIController.reference_all_joints-491"><span class="linenos">491</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.reference_all_joints-492"><a href="#CRIController.reference_all_joints-492"><span class="linenos">492</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController.reference_all_joints-493"><a href="#CRIController.reference_all_joints-493"><span class="linenos">493</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.reference_all_joints-494"><a href="#CRIController.reference_all_joints-494"><span class="linenos">494</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in ReferenceAllJoints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.reference_all_joints-495"><a href="#CRIController.reference_all_joints-495"><span class="linenos">495</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.reference_all_joints-496"><a href="#CRIController.reference_all_joints-496"><span class="linenos">496</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.reference_all_joints-497"><a href="#CRIController.reference_all_joints-497"><span class="linenos">497</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.reference_all_joints-498"><a href="#CRIController.reference_all_joints-498"><span class="linenos">498</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.reference_all_joints-499"><a href="#CRIController.reference_all_joints-499"><span class="linenos">499</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Reference all joints. Long timout of 30 seconds.</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.reference_single_joint" class="classattr">
                                        <input id="CRIController.reference_single_joint-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">reference_single_joint</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">joint</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.reference_single_joint-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.reference_single_joint"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.reference_single_joint-501"><a href="#CRIController.reference_single_joint-501"><span class="linenos">501</span></a>    <span class="k">def</span> <span class="nf">reference_single_joint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">joint</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.reference_single_joint-502"><a href="#CRIController.reference_single_joint-502"><span class="linenos">502</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reference a single joint. Long timout of 30 seconds.</span>
</span><span id="CRIController.reference_single_joint-503"><a href="#CRIController.reference_single_joint-503"><span class="linenos">503</span></a>
</span><span id="CRIController.reference_single_joint-504"><a href="#CRIController.reference_single_joint-504"><span class="linenos">504</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.reference_single_joint-505"><a href="#CRIController.reference_single_joint-505"><span class="linenos">505</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.reference_single_joint-506"><a href="#CRIController.reference_single_joint-506"><span class="linenos">506</span></a><span class="sd">        joint : str</span>
</span><span id="CRIController.reference_single_joint-507"><a href="#CRIController.reference_single_joint-507"><span class="linenos">507</span></a><span class="sd">            joint name with either &#39;A&#39;, &#39;E&#39;, &#39;T&#39; or &#39;P&#39; as first character and an corresponding index as second</span>
</span><span id="CRIController.reference_single_joint-508"><a href="#CRIController.reference_single_joint-508"><span class="linenos">508</span></a>
</span><span id="CRIController.reference_single_joint-509"><a href="#CRIController.reference_single_joint-509"><span class="linenos">509</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.reference_single_joint-510"><a href="#CRIController.reference_single_joint-510"><span class="linenos">510</span></a><span class="sd">        -------</span>
</span><span id="CRIController.reference_single_joint-511"><a href="#CRIController.reference_single_joint-511"><span class="linenos">511</span></a><span class="sd">        bool</span>
</span><span id="CRIController.reference_single_joint-512"><a href="#CRIController.reference_single_joint-512"><span class="linenos">512</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.reference_single_joint-513"><a href="#CRIController.reference_single_joint-513"><span class="linenos">513</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.reference_single_joint-514"><a href="#CRIController.reference_single_joint-514"><span class="linenos">514</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.reference_single_joint-515"><a href="#CRIController.reference_single_joint-515"><span class="linenos">515</span></a>
</span><span id="CRIController.reference_single_joint-516"><a href="#CRIController.reference_single_joint-516"><span class="linenos">516</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.reference_single_joint-517"><a href="#CRIController.reference_single_joint-517"><span class="linenos">517</span></a>            <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;A&quot;</span> <span class="ow">or</span> <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;E&quot;</span> <span class="ow">or</span> <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;T&quot;</span> <span class="ow">or</span> <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;P&quot;</span>
</span><span id="CRIController.reference_single_joint-518"><a href="#CRIController.reference_single_joint-518"><span class="linenos">518</span></a>        <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">joint</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="CRIController.reference_single_joint-519"><a href="#CRIController.reference_single_joint-519"><span class="linenos">519</span></a>            <span class="n">joint_msg</span> <span class="o">=</span> <span class="n">joint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">joint</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="CRIController.reference_single_joint-520"><a href="#CRIController.reference_single_joint-520"><span class="linenos">520</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.reference_single_joint-521"><a href="#CRIController.reference_single_joint-521"><span class="linenos">521</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.reference_single_joint-522"><a href="#CRIController.reference_single_joint-522"><span class="linenos">522</span></a>
</span><span id="CRIController.reference_single_joint-523"><a href="#CRIController.reference_single_joint-523"><span class="linenos">523</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.reference_single_joint-524"><a href="#CRIController.reference_single_joint-524"><span class="linenos">524</span></a>            <span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CMD ReferenceSingleJoint </span><span class="si">{</span><span class="n">joint_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="CRIController.reference_single_joint-525"><a href="#CRIController.reference_single_joint-525"><span class="linenos">525</span></a>        <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.reference_single_joint-526"><a href="#CRIController.reference_single_joint-526"><span class="linenos">526</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.reference_single_joint-527"><a href="#CRIController.reference_single_joint-527"><span class="linenos">527</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController.reference_single_joint-528"><a href="#CRIController.reference_single_joint-528"><span class="linenos">528</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.reference_single_joint-529"><a href="#CRIController.reference_single_joint-529"><span class="linenos">529</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in ReferenceSingleJoint command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.reference_single_joint-530"><a href="#CRIController.reference_single_joint-530"><span class="linenos">530</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.reference_single_joint-531"><a href="#CRIController.reference_single_joint-531"><span class="linenos">531</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.reference_single_joint-532"><a href="#CRIController.reference_single_joint-532"><span class="linenos">532</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.reference_single_joint-533"><a href="#CRIController.reference_single_joint-533"><span class="linenos">533</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.reference_single_joint-534"><a href="#CRIController.reference_single_joint-534"><span class="linenos">534</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Reference a single joint. Long timout of 30 seconds.</p>

<h2 id="parameters">Parameters</h2>

<p>joint : str
    joint name with either 'A', 'E', 'T' or 'P' as first character and an corresponding index as second</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.get_referencing_info" class="classattr">
                                        <input id="CRIController.get_referencing_info-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_referencing_info</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CRIController.get_referencing_info-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.get_referencing_info"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.get_referencing_info-536"><a href="#CRIController.get_referencing_info-536"><span class="linenos">536</span></a>    <span class="k">def</span> <span class="nf">get_referencing_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CRIController.get_referencing_info-537"><a href="#CRIController.get_referencing_info-537"><span class="linenos">537</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reference all joints. Long timout of 30 seconds.</span>
</span><span id="CRIController.get_referencing_info-538"><a href="#CRIController.get_referencing_info-538"><span class="linenos">538</span></a>
</span><span id="CRIController.get_referencing_info-539"><a href="#CRIController.get_referencing_info-539"><span class="linenos">539</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.get_referencing_info-540"><a href="#CRIController.get_referencing_info-540"><span class="linenos">540</span></a><span class="sd">        -------</span>
</span><span id="CRIController.get_referencing_info-541"><a href="#CRIController.get_referencing_info-541"><span class="linenos">541</span></a><span class="sd">        bool</span>
</span><span id="CRIController.get_referencing_info-542"><a href="#CRIController.get_referencing_info-542"><span class="linenos">542</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.get_referencing_info-543"><a href="#CRIController.get_referencing_info-543"><span class="linenos">543</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.get_referencing_info-544"><a href="#CRIController.get_referencing_info-544"><span class="linenos">544</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.get_referencing_info-545"><a href="#CRIController.get_referencing_info-545"><span class="linenos">545</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.get_referencing_info-546"><a href="#CRIController.get_referencing_info-546"><span class="linenos">546</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD GetReferencingInfo&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;info_referencing&quot;</span><span class="p">)</span>
</span><span id="CRIController.get_referencing_info-547"><a href="#CRIController.get_referencing_info-547"><span class="linenos">547</span></a>            <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="CRIController.get_referencing_info-548"><a href="#CRIController.get_referencing_info-548"><span class="linenos">548</span></a>        <span class="p">):</span>
</span><span id="CRIController.get_referencing_info-549"><a href="#CRIController.get_referencing_info-549"><span class="linenos">549</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.get_referencing_info-550"><a href="#CRIController.get_referencing_info-550"><span class="linenos">550</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.get_referencing_info-551"><a href="#CRIController.get_referencing_info-551"><span class="linenos">551</span></a>                    <span class="s2">&quot;info_referencing&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.get_referencing_info-552"><a href="#CRIController.get_referencing_info-552"><span class="linenos">552</span></a>                <span class="p">)</span>
</span><span id="CRIController.get_referencing_info-553"><a href="#CRIController.get_referencing_info-553"><span class="linenos">553</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.get_referencing_info-554"><a href="#CRIController.get_referencing_info-554"><span class="linenos">554</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in GetReferencingInfo command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.get_referencing_info-555"><a href="#CRIController.get_referencing_info-555"><span class="linenos">555</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.get_referencing_info-556"><a href="#CRIController.get_referencing_info-556"><span class="linenos">556</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.get_referencing_info-557"><a href="#CRIController.get_referencing_info-557"><span class="linenos">557</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.get_referencing_info-558"><a href="#CRIController.get_referencing_info-558"><span class="linenos">558</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.get_referencing_info-559"><a href="#CRIController.get_referencing_info-559"><span class="linenos">559</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Reference all joints. Long timout of 30 seconds.</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.wait_for_kinematics_ready" class="classattr">
                                        <input id="CRIController.wait_for_kinematics_ready-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">wait_for_kinematics_ready</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mi">30</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.wait_for_kinematics_ready-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.wait_for_kinematics_ready"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.wait_for_kinematics_ready-561"><a href="#CRIController.wait_for_kinematics_ready-561"><span class="linenos">561</span></a>    <span class="k">def</span> <span class="nf">wait_for_kinematics_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.wait_for_kinematics_ready-562"><a href="#CRIController.wait_for_kinematics_ready-562"><span class="linenos">562</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait until drive state is indicated as ready.</span>
</span><span id="CRIController.wait_for_kinematics_ready-563"><a href="#CRIController.wait_for_kinematics_ready-563"><span class="linenos">563</span></a>
</span><span id="CRIController.wait_for_kinematics_ready-564"><a href="#CRIController.wait_for_kinematics_ready-564"><span class="linenos">564</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.wait_for_kinematics_ready-565"><a href="#CRIController.wait_for_kinematics_ready-565"><span class="linenos">565</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.wait_for_kinematics_ready-566"><a href="#CRIController.wait_for_kinematics_ready-566"><span class="linenos">566</span></a><span class="sd">        timeout : float</span>
</span><span id="CRIController.wait_for_kinematics_ready-567"><a href="#CRIController.wait_for_kinematics_ready-567"><span class="linenos">567</span></a><span class="sd">            maximum time to wait in seconds</span>
</span><span id="CRIController.wait_for_kinematics_ready-568"><a href="#CRIController.wait_for_kinematics_ready-568"><span class="linenos">568</span></a>
</span><span id="CRIController.wait_for_kinematics_ready-569"><a href="#CRIController.wait_for_kinematics_ready-569"><span class="linenos">569</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.wait_for_kinematics_ready-570"><a href="#CRIController.wait_for_kinematics_ready-570"><span class="linenos">570</span></a><span class="sd">        -------</span>
</span><span id="CRIController.wait_for_kinematics_ready-571"><a href="#CRIController.wait_for_kinematics_ready-571"><span class="linenos">571</span></a><span class="sd">        bool</span>
</span><span id="CRIController.wait_for_kinematics_ready-572"><a href="#CRIController.wait_for_kinematics_ready-572"><span class="linenos">572</span></a><span class="sd">            `True`if drives are ready, `False` if not ready or timeout</span>
</span><span id="CRIController.wait_for_kinematics_ready-573"><a href="#CRIController.wait_for_kinematics_ready-573"><span class="linenos">573</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.wait_for_kinematics_ready-574"><a href="#CRIController.wait_for_kinematics_ready-574"><span class="linenos">574</span></a>        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
</span><span id="CRIController.wait_for_kinematics_ready-575"><a href="#CRIController.wait_for_kinematics_ready-575"><span class="linenos">575</span></a>        <span class="n">new_timeout</span> <span class="o">=</span> <span class="n">timeout</span>
</span><span id="CRIController.wait_for_kinematics_ready-576"><a href="#CRIController.wait_for_kinematics_ready-576"><span class="linenos">576</span></a>        <span class="k">while</span> <span class="n">new_timeout</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="CRIController.wait_for_kinematics_ready-577"><a href="#CRIController.wait_for_kinematics_ready-577"><span class="linenos">577</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_status_update</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">new_timeout</span><span class="p">)</span>
</span><span id="CRIController.wait_for_kinematics_ready-578"><a href="#CRIController.wait_for_kinematics_ready-578"><span class="linenos">578</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">robot_state</span><span class="o">.</span><span class="n">kinematics_state</span> <span class="o">==</span> <span class="n">KinematicsState</span><span class="o">.</span><span class="n">NO_ERROR</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="CRIController.wait_for_kinematics_ready-579"><a href="#CRIController.wait_for_kinematics_ready-579"><span class="linenos">579</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">robot_state</span><span class="o">.</span><span class="n">combined_axes_error</span> <span class="o">==</span> <span class="s2">&quot;NoError&quot;</span>
</span><span id="CRIController.wait_for_kinematics_ready-580"><a href="#CRIController.wait_for_kinematics_ready-580"><span class="linenos">580</span></a>            <span class="p">):</span>
</span><span id="CRIController.wait_for_kinematics_ready-581"><a href="#CRIController.wait_for_kinematics_ready-581"><span class="linenos">581</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.wait_for_kinematics_ready-582"><a href="#CRIController.wait_for_kinematics_ready-582"><span class="linenos">582</span></a>
</span><span id="CRIController.wait_for_kinematics_ready-583"><a href="#CRIController.wait_for_kinematics_ready-583"><span class="linenos">583</span></a>            <span class="n">new_timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="o">-</span> <span class="p">(</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
</span><span id="CRIController.wait_for_kinematics_ready-584"><a href="#CRIController.wait_for_kinematics_ready-584"><span class="linenos">584</span></a>
</span><span id="CRIController.wait_for_kinematics_ready-585"><a href="#CRIController.wait_for_kinematics_ready-585"><span class="linenos">585</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Wait until drive state is indicated as ready.</p>

<h2 id="parameters">Parameters</h2>

<p>timeout : float
    maximum time to wait in seconds</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code>if drives are ready, <code>False</code> if not ready or timeout</p>
</div>


                            </div>
                            <div id="CRIController.move_joints" class="classattr">
                                        <input id="CRIController.move_joints-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">move_joints</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">A1</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A2</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A3</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A4</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A5</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A6</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E1</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E2</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E3</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.move_joints-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.move_joints"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.move_joints-587"><a href="#CRIController.move_joints-587"><span class="linenos">587</span></a>    <span class="k">def</span> <span class="nf">move_joints</span><span class="p">(</span>
</span><span id="CRIController.move_joints-588"><a href="#CRIController.move_joints-588"><span class="linenos">588</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CRIController.move_joints-589"><a href="#CRIController.move_joints-589"><span class="linenos">589</span></a>        <span class="n">A1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints-590"><a href="#CRIController.move_joints-590"><span class="linenos">590</span></a>        <span class="n">A2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints-591"><a href="#CRIController.move_joints-591"><span class="linenos">591</span></a>        <span class="n">A3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints-592"><a href="#CRIController.move_joints-592"><span class="linenos">592</span></a>        <span class="n">A4</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints-593"><a href="#CRIController.move_joints-593"><span class="linenos">593</span></a>        <span class="n">A5</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints-594"><a href="#CRIController.move_joints-594"><span class="linenos">594</span></a>        <span class="n">A6</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints-595"><a href="#CRIController.move_joints-595"><span class="linenos">595</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints-596"><a href="#CRIController.move_joints-596"><span class="linenos">596</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints-597"><a href="#CRIController.move_joints-597"><span class="linenos">597</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints-598"><a href="#CRIController.move_joints-598"><span class="linenos">598</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints-599"><a href="#CRIController.move_joints-599"><span class="linenos">599</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CRIController.move_joints-600"><a href="#CRIController.move_joints-600"><span class="linenos">600</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="CRIController.move_joints-601"><a href="#CRIController.move_joints-601"><span class="linenos">601</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.move_joints-602"><a href="#CRIController.move_joints-602"><span class="linenos">602</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Absolute joint move</span>
</span><span id="CRIController.move_joints-603"><a href="#CRIController.move_joints-603"><span class="linenos">603</span></a>
</span><span id="CRIController.move_joints-604"><a href="#CRIController.move_joints-604"><span class="linenos">604</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.move_joints-605"><a href="#CRIController.move_joints-605"><span class="linenos">605</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.move_joints-606"><a href="#CRIController.move_joints-606"><span class="linenos">606</span></a><span class="sd">        A1-A6, E1-E3 : float</span>
</span><span id="CRIController.move_joints-607"><a href="#CRIController.move_joints-607"><span class="linenos">607</span></a><span class="sd">            Target angles of axes</span>
</span><span id="CRIController.move_joints-608"><a href="#CRIController.move_joints-608"><span class="linenos">608</span></a>
</span><span id="CRIController.move_joints-609"><a href="#CRIController.move_joints-609"><span class="linenos">609</span></a><span class="sd">        velocity : float</span>
</span><span id="CRIController.move_joints-610"><a href="#CRIController.move_joints-610"><span class="linenos">610</span></a><span class="sd">            Velocity in percent of maximum velocity, range 1.0-100.0</span>
</span><span id="CRIController.move_joints-611"><a href="#CRIController.move_joints-611"><span class="linenos">611</span></a>
</span><span id="CRIController.move_joints-612"><a href="#CRIController.move_joints-612"><span class="linenos">612</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="CRIController.move_joints-613"><a href="#CRIController.move_joints-613"><span class="linenos">613</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="CRIController.move_joints-614"><a href="#CRIController.move_joints-614"><span class="linenos">614</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="CRIController.move_joints-615"><a href="#CRIController.move_joints-615"><span class="linenos">615</span></a>
</span><span id="CRIController.move_joints-616"><a href="#CRIController.move_joints-616"><span class="linenos">616</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="CRIController.move_joints-617"><a href="#CRIController.move_joints-617"><span class="linenos">617</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="CRIController.move_joints-618"><a href="#CRIController.move_joints-618"><span class="linenos">618</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.move_joints-619"><a href="#CRIController.move_joints-619"><span class="linenos">619</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="CRIController.move_joints-620"><a href="#CRIController.move_joints-620"><span class="linenos">620</span></a>            <span class="sa">f</span><span class="s2">&quot;CMD Move Joint </span><span class="si">{</span><span class="n">A1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A4</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A5</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A6</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.move_joints-621"><a href="#CRIController.move_joints-621"><span class="linenos">621</span></a>        <span class="p">)</span>
</span><span id="CRIController.move_joints-622"><a href="#CRIController.move_joints-622"><span class="linenos">622</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController.move_joints-623"><a href="#CRIController.move_joints-623"><span class="linenos">623</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="CRIController.move_joints-624"><a href="#CRIController.move_joints-624"><span class="linenos">624</span></a>
</span><span id="CRIController.move_joints-625"><a href="#CRIController.move_joints-625"><span class="linenos">625</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_joints-626"><a href="#CRIController.move_joints-626"><span class="linenos">626</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.move_joints-627"><a href="#CRIController.move_joints-627"><span class="linenos">627</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController.move_joints-628"><a href="#CRIController.move_joints-628"><span class="linenos">628</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_joints-629"><a href="#CRIController.move_joints-629"><span class="linenos">629</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.move_joints-630"><a href="#CRIController.move_joints-630"><span class="linenos">630</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.move_joints-631"><a href="#CRIController.move_joints-631"><span class="linenos">631</span></a>
</span><span id="CRIController.move_joints-632"><a href="#CRIController.move_joints-632"><span class="linenos">632</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController.move_joints-633"><a href="#CRIController.move_joints-633"><span class="linenos">633</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.move_joints-634"><a href="#CRIController.move_joints-634"><span class="linenos">634</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.move_joints-635"><a href="#CRIController.move_joints-635"><span class="linenos">635</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="CRIController.move_joints-636"><a href="#CRIController.move_joints-636"><span class="linenos">636</span></a>                    <span class="p">)</span>
</span><span id="CRIController.move_joints-637"><a href="#CRIController.move_joints-637"><span class="linenos">637</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_joints-638"><a href="#CRIController.move_joints-638"><span class="linenos">638</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exec Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.move_joints-639"><a href="#CRIController.move_joints-639"><span class="linenos">639</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.move_joints-640"><a href="#CRIController.move_joints-640"><span class="linenos">640</span></a>
</span><span id="CRIController.move_joints-641"><a href="#CRIController.move_joints-641"><span class="linenos">641</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.move_joints-642"><a href="#CRIController.move_joints-642"><span class="linenos">642</span></a>
</span><span id="CRIController.move_joints-643"><a href="#CRIController.move_joints-643"><span class="linenos">643</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.move_joints-644"><a href="#CRIController.move_joints-644"><span class="linenos">644</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Absolute joint move</p>

<h2 id="parameters">Parameters</h2>

<p>A1-A6, E1-E3 : float
    Target angles of axes</p>

<p>velocity : float
    Velocity in percent of maximum velocity, range 1.0-100.0</p>

<p>wait_move_finished : bool
    true: wait until movement is finished
    false: only wait for command ack and not until move is finished</p>

<p>move_finished_timeout : float
    timout in seconds for waiting for the move to finish, <code>None</code> will wait indefinetly</p>
</div>


                            </div>
                            <div id="CRIController.move_joints_relative" class="classattr">
                                        <input id="CRIController.move_joints_relative-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">move_joints_relative</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">A1</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A2</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A3</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A4</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A5</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A6</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E1</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E2</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E3</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.move_joints_relative-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.move_joints_relative"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.move_joints_relative-646"><a href="#CRIController.move_joints_relative-646"><span class="linenos">646</span></a>    <span class="k">def</span> <span class="nf">move_joints_relative</span><span class="p">(</span>
</span><span id="CRIController.move_joints_relative-647"><a href="#CRIController.move_joints_relative-647"><span class="linenos">647</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CRIController.move_joints_relative-648"><a href="#CRIController.move_joints_relative-648"><span class="linenos">648</span></a>        <span class="n">A1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints_relative-649"><a href="#CRIController.move_joints_relative-649"><span class="linenos">649</span></a>        <span class="n">A2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints_relative-650"><a href="#CRIController.move_joints_relative-650"><span class="linenos">650</span></a>        <span class="n">A3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints_relative-651"><a href="#CRIController.move_joints_relative-651"><span class="linenos">651</span></a>        <span class="n">A4</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints_relative-652"><a href="#CRIController.move_joints_relative-652"><span class="linenos">652</span></a>        <span class="n">A5</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints_relative-653"><a href="#CRIController.move_joints_relative-653"><span class="linenos">653</span></a>        <span class="n">A6</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints_relative-654"><a href="#CRIController.move_joints_relative-654"><span class="linenos">654</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints_relative-655"><a href="#CRIController.move_joints_relative-655"><span class="linenos">655</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints_relative-656"><a href="#CRIController.move_joints_relative-656"><span class="linenos">656</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints_relative-657"><a href="#CRIController.move_joints_relative-657"><span class="linenos">657</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_joints_relative-658"><a href="#CRIController.move_joints_relative-658"><span class="linenos">658</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CRIController.move_joints_relative-659"><a href="#CRIController.move_joints_relative-659"><span class="linenos">659</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="CRIController.move_joints_relative-660"><a href="#CRIController.move_joints_relative-660"><span class="linenos">660</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.move_joints_relative-661"><a href="#CRIController.move_joints_relative-661"><span class="linenos">661</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Relative joint move</span>
</span><span id="CRIController.move_joints_relative-662"><a href="#CRIController.move_joints_relative-662"><span class="linenos">662</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.move_joints_relative-663"><a href="#CRIController.move_joints_relative-663"><span class="linenos">663</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.move_joints_relative-664"><a href="#CRIController.move_joints_relative-664"><span class="linenos">664</span></a><span class="sd">        A1-A6, E1-E3 : float</span>
</span><span id="CRIController.move_joints_relative-665"><a href="#CRIController.move_joints_relative-665"><span class="linenos">665</span></a><span class="sd">            Target angles of axes</span>
</span><span id="CRIController.move_joints_relative-666"><a href="#CRIController.move_joints_relative-666"><span class="linenos">666</span></a>
</span><span id="CRIController.move_joints_relative-667"><a href="#CRIController.move_joints_relative-667"><span class="linenos">667</span></a><span class="sd">        velocity : float</span>
</span><span id="CRIController.move_joints_relative-668"><a href="#CRIController.move_joints_relative-668"><span class="linenos">668</span></a><span class="sd">            Velocity in percent of maximum velocity, range 1.0-100.0</span>
</span><span id="CRIController.move_joints_relative-669"><a href="#CRIController.move_joints_relative-669"><span class="linenos">669</span></a>
</span><span id="CRIController.move_joints_relative-670"><a href="#CRIController.move_joints_relative-670"><span class="linenos">670</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="CRIController.move_joints_relative-671"><a href="#CRIController.move_joints_relative-671"><span class="linenos">671</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="CRIController.move_joints_relative-672"><a href="#CRIController.move_joints_relative-672"><span class="linenos">672</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="CRIController.move_joints_relative-673"><a href="#CRIController.move_joints_relative-673"><span class="linenos">673</span></a>
</span><span id="CRIController.move_joints_relative-674"><a href="#CRIController.move_joints_relative-674"><span class="linenos">674</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="CRIController.move_joints_relative-675"><a href="#CRIController.move_joints_relative-675"><span class="linenos">675</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="CRIController.move_joints_relative-676"><a href="#CRIController.move_joints_relative-676"><span class="linenos">676</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.move_joints_relative-677"><a href="#CRIController.move_joints_relative-677"><span class="linenos">677</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD Move RelativeJoint </span><span class="si">{</span><span class="n">A1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A4</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A5</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A6</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.move_joints_relative-678"><a href="#CRIController.move_joints_relative-678"><span class="linenos">678</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController.move_joints_relative-679"><a href="#CRIController.move_joints_relative-679"><span class="linenos">679</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="CRIController.move_joints_relative-680"><a href="#CRIController.move_joints_relative-680"><span class="linenos">680</span></a>
</span><span id="CRIController.move_joints_relative-681"><a href="#CRIController.move_joints_relative-681"><span class="linenos">681</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_joints_relative-682"><a href="#CRIController.move_joints_relative-682"><span class="linenos">682</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.move_joints_relative-683"><a href="#CRIController.move_joints_relative-683"><span class="linenos">683</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController.move_joints_relative-684"><a href="#CRIController.move_joints_relative-684"><span class="linenos">684</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_joints_relative-685"><a href="#CRIController.move_joints_relative-685"><span class="linenos">685</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.move_joints_relative-686"><a href="#CRIController.move_joints_relative-686"><span class="linenos">686</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.move_joints_relative-687"><a href="#CRIController.move_joints_relative-687"><span class="linenos">687</span></a>
</span><span id="CRIController.move_joints_relative-688"><a href="#CRIController.move_joints_relative-688"><span class="linenos">688</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController.move_joints_relative-689"><a href="#CRIController.move_joints_relative-689"><span class="linenos">689</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.move_joints_relative-690"><a href="#CRIController.move_joints_relative-690"><span class="linenos">690</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.move_joints_relative-691"><a href="#CRIController.move_joints_relative-691"><span class="linenos">691</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="CRIController.move_joints_relative-692"><a href="#CRIController.move_joints_relative-692"><span class="linenos">692</span></a>                    <span class="p">)</span>
</span><span id="CRIController.move_joints_relative-693"><a href="#CRIController.move_joints_relative-693"><span class="linenos">693</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_joints_relative-694"><a href="#CRIController.move_joints_relative-694"><span class="linenos">694</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="CRIController.move_joints_relative-695"><a href="#CRIController.move_joints_relative-695"><span class="linenos">695</span></a>                        <span class="s2">&quot;Exec Error in Move Joints Relative command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span>
</span><span id="CRIController.move_joints_relative-696"><a href="#CRIController.move_joints_relative-696"><span class="linenos">696</span></a>                    <span class="p">)</span>
</span><span id="CRIController.move_joints_relative-697"><a href="#CRIController.move_joints_relative-697"><span class="linenos">697</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.move_joints_relative-698"><a href="#CRIController.move_joints_relative-698"><span class="linenos">698</span></a>
</span><span id="CRIController.move_joints_relative-699"><a href="#CRIController.move_joints_relative-699"><span class="linenos">699</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.move_joints_relative-700"><a href="#CRIController.move_joints_relative-700"><span class="linenos">700</span></a>
</span><span id="CRIController.move_joints_relative-701"><a href="#CRIController.move_joints_relative-701"><span class="linenos">701</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.move_joints_relative-702"><a href="#CRIController.move_joints_relative-702"><span class="linenos">702</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Relative joint move</p>

<h2 id="parameters">Parameters</h2>

<p>A1-A6, E1-E3 : float
    Target angles of axes</p>

<p>velocity : float
    Velocity in percent of maximum velocity, range 1.0-100.0</p>

<p>wait_move_finished : bool
    true: wait until movement is finished
    false: only wait for command ack and not until move is finished</p>

<p>move_finished_timeout : float
    timout in seconds for waiting for the move to finish, <code>None</code> will wait indefinetly</p>
</div>


                            </div>
                            <div id="CRIController.move_cartesian" class="classattr">
                                        <input id="CRIController.move_cartesian-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">move_cartesian</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">X</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">Y</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">Z</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">B</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">C</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E1</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E2</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E3</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">frame</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;#base&#39;</span>,</span><span class="param">	<span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.move_cartesian-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.move_cartesian"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.move_cartesian-704"><a href="#CRIController.move_cartesian-704"><span class="linenos">704</span></a>    <span class="k">def</span> <span class="nf">move_cartesian</span><span class="p">(</span>
</span><span id="CRIController.move_cartesian-705"><a href="#CRIController.move_cartesian-705"><span class="linenos">705</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-706"><a href="#CRIController.move_cartesian-706"><span class="linenos">706</span></a>        <span class="n">X</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-707"><a href="#CRIController.move_cartesian-707"><span class="linenos">707</span></a>        <span class="n">Y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-708"><a href="#CRIController.move_cartesian-708"><span class="linenos">708</span></a>        <span class="n">Z</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-709"><a href="#CRIController.move_cartesian-709"><span class="linenos">709</span></a>        <span class="n">A</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-710"><a href="#CRIController.move_cartesian-710"><span class="linenos">710</span></a>        <span class="n">B</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-711"><a href="#CRIController.move_cartesian-711"><span class="linenos">711</span></a>        <span class="n">C</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-712"><a href="#CRIController.move_cartesian-712"><span class="linenos">712</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-713"><a href="#CRIController.move_cartesian-713"><span class="linenos">713</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-714"><a href="#CRIController.move_cartesian-714"><span class="linenos">714</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-715"><a href="#CRIController.move_cartesian-715"><span class="linenos">715</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-716"><a href="#CRIController.move_cartesian-716"><span class="linenos">716</span></a>        <span class="n">frame</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#base&quot;</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-717"><a href="#CRIController.move_cartesian-717"><span class="linenos">717</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-718"><a href="#CRIController.move_cartesian-718"><span class="linenos">718</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="CRIController.move_cartesian-719"><a href="#CRIController.move_cartesian-719"><span class="linenos">719</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.move_cartesian-720"><a href="#CRIController.move_cartesian-720"><span class="linenos">720</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cartesian move</span>
</span><span id="CRIController.move_cartesian-721"><a href="#CRIController.move_cartesian-721"><span class="linenos">721</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.move_cartesian-722"><a href="#CRIController.move_cartesian-722"><span class="linenos">722</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.move_cartesian-723"><a href="#CRIController.move_cartesian-723"><span class="linenos">723</span></a><span class="sd">        X,Y,Z,A,B,C,E1-E3 : float</span>
</span><span id="CRIController.move_cartesian-724"><a href="#CRIController.move_cartesian-724"><span class="linenos">724</span></a><span class="sd">            Target angles of axes</span>
</span><span id="CRIController.move_cartesian-725"><a href="#CRIController.move_cartesian-725"><span class="linenos">725</span></a>
</span><span id="CRIController.move_cartesian-726"><a href="#CRIController.move_cartesian-726"><span class="linenos">726</span></a><span class="sd">        velocity : float</span>
</span><span id="CRIController.move_cartesian-727"><a href="#CRIController.move_cartesian-727"><span class="linenos">727</span></a><span class="sd">            Velocity in mm/s</span>
</span><span id="CRIController.move_cartesian-728"><a href="#CRIController.move_cartesian-728"><span class="linenos">728</span></a>
</span><span id="CRIController.move_cartesian-729"><a href="#CRIController.move_cartesian-729"><span class="linenos">729</span></a><span class="sd">        frame : str</span>
</span><span id="CRIController.move_cartesian-730"><a href="#CRIController.move_cartesian-730"><span class="linenos">730</span></a><span class="sd">            frame of the coordinates, default is `#base`</span>
</span><span id="CRIController.move_cartesian-731"><a href="#CRIController.move_cartesian-731"><span class="linenos">731</span></a>
</span><span id="CRIController.move_cartesian-732"><a href="#CRIController.move_cartesian-732"><span class="linenos">732</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="CRIController.move_cartesian-733"><a href="#CRIController.move_cartesian-733"><span class="linenos">733</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="CRIController.move_cartesian-734"><a href="#CRIController.move_cartesian-734"><span class="linenos">734</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="CRIController.move_cartesian-735"><a href="#CRIController.move_cartesian-735"><span class="linenos">735</span></a>
</span><span id="CRIController.move_cartesian-736"><a href="#CRIController.move_cartesian-736"><span class="linenos">736</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="CRIController.move_cartesian-737"><a href="#CRIController.move_cartesian-737"><span class="linenos">737</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="CRIController.move_cartesian-738"><a href="#CRIController.move_cartesian-738"><span class="linenos">738</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.move_cartesian-739"><a href="#CRIController.move_cartesian-739"><span class="linenos">739</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="CRIController.move_cartesian-740"><a href="#CRIController.move_cartesian-740"><span class="linenos">740</span></a>            <span class="sa">f</span><span class="s2">&quot;CMD Move Cart </span><span class="si">{</span><span class="n">X</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Y</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Z</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">B</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">C</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">frame</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.move_cartesian-741"><a href="#CRIController.move_cartesian-741"><span class="linenos">741</span></a>        <span class="p">)</span>
</span><span id="CRIController.move_cartesian-742"><a href="#CRIController.move_cartesian-742"><span class="linenos">742</span></a>
</span><span id="CRIController.move_cartesian-743"><a href="#CRIController.move_cartesian-743"><span class="linenos">743</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController.move_cartesian-744"><a href="#CRIController.move_cartesian-744"><span class="linenos">744</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="CRIController.move_cartesian-745"><a href="#CRIController.move_cartesian-745"><span class="linenos">745</span></a>
</span><span id="CRIController.move_cartesian-746"><a href="#CRIController.move_cartesian-746"><span class="linenos">746</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_cartesian-747"><a href="#CRIController.move_cartesian-747"><span class="linenos">747</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.move_cartesian-748"><a href="#CRIController.move_cartesian-748"><span class="linenos">748</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController.move_cartesian-749"><a href="#CRIController.move_cartesian-749"><span class="linenos">749</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_cartesian-750"><a href="#CRIController.move_cartesian-750"><span class="linenos">750</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.move_cartesian-751"><a href="#CRIController.move_cartesian-751"><span class="linenos">751</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.move_cartesian-752"><a href="#CRIController.move_cartesian-752"><span class="linenos">752</span></a>
</span><span id="CRIController.move_cartesian-753"><a href="#CRIController.move_cartesian-753"><span class="linenos">753</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController.move_cartesian-754"><a href="#CRIController.move_cartesian-754"><span class="linenos">754</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.move_cartesian-755"><a href="#CRIController.move_cartesian-755"><span class="linenos">755</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.move_cartesian-756"><a href="#CRIController.move_cartesian-756"><span class="linenos">756</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="CRIController.move_cartesian-757"><a href="#CRIController.move_cartesian-757"><span class="linenos">757</span></a>                    <span class="p">)</span>
</span><span id="CRIController.move_cartesian-758"><a href="#CRIController.move_cartesian-758"><span class="linenos">758</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_cartesian-759"><a href="#CRIController.move_cartesian-759"><span class="linenos">759</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exec Error in Move Cartesian command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.move_cartesian-760"><a href="#CRIController.move_cartesian-760"><span class="linenos">760</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.move_cartesian-761"><a href="#CRIController.move_cartesian-761"><span class="linenos">761</span></a>
</span><span id="CRIController.move_cartesian-762"><a href="#CRIController.move_cartesian-762"><span class="linenos">762</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.move_cartesian-763"><a href="#CRIController.move_cartesian-763"><span class="linenos">763</span></a>
</span><span id="CRIController.move_cartesian-764"><a href="#CRIController.move_cartesian-764"><span class="linenos">764</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.move_cartesian-765"><a href="#CRIController.move_cartesian-765"><span class="linenos">765</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Cartesian move</p>

<h2 id="parameters">Parameters</h2>

<p>X,Y,Z,A,B,C,E1-E3 : float
    Target angles of axes</p>

<p>velocity : float
    Velocity in mm/s</p>

<p>frame : str
    frame of the coordinates, default is <code>#base</code></p>

<p>wait_move_finished : bool
    true: wait until movement is finished
    false: only wait for command ack and not until move is finished</p>

<p>move_finished_timeout : float
    timout in seconds for waiting for the move to finish, <code>None</code> will wait indefinetly</p>
</div>


                            </div>
                            <div id="CRIController.move_base_relative" class="classattr">
                                        <input id="CRIController.move_base_relative-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">move_base_relative</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">X</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">Y</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">Z</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">B</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">C</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E1</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E2</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E3</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.move_base_relative-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.move_base_relative"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.move_base_relative-767"><a href="#CRIController.move_base_relative-767"><span class="linenos">767</span></a>    <span class="k">def</span> <span class="nf">move_base_relative</span><span class="p">(</span>
</span><span id="CRIController.move_base_relative-768"><a href="#CRIController.move_base_relative-768"><span class="linenos">768</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CRIController.move_base_relative-769"><a href="#CRIController.move_base_relative-769"><span class="linenos">769</span></a>        <span class="n">X</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_base_relative-770"><a href="#CRIController.move_base_relative-770"><span class="linenos">770</span></a>        <span class="n">Y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_base_relative-771"><a href="#CRIController.move_base_relative-771"><span class="linenos">771</span></a>        <span class="n">Z</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_base_relative-772"><a href="#CRIController.move_base_relative-772"><span class="linenos">772</span></a>        <span class="n">A</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_base_relative-773"><a href="#CRIController.move_base_relative-773"><span class="linenos">773</span></a>        <span class="n">B</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_base_relative-774"><a href="#CRIController.move_base_relative-774"><span class="linenos">774</span></a>        <span class="n">C</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_base_relative-775"><a href="#CRIController.move_base_relative-775"><span class="linenos">775</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_base_relative-776"><a href="#CRIController.move_base_relative-776"><span class="linenos">776</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_base_relative-777"><a href="#CRIController.move_base_relative-777"><span class="linenos">777</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_base_relative-778"><a href="#CRIController.move_base_relative-778"><span class="linenos">778</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_base_relative-779"><a href="#CRIController.move_base_relative-779"><span class="linenos">779</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CRIController.move_base_relative-780"><a href="#CRIController.move_base_relative-780"><span class="linenos">780</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="CRIController.move_base_relative-781"><a href="#CRIController.move_base_relative-781"><span class="linenos">781</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.move_base_relative-782"><a href="#CRIController.move_base_relative-782"><span class="linenos">782</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Relative cartesian move in base coordinate system</span>
</span><span id="CRIController.move_base_relative-783"><a href="#CRIController.move_base_relative-783"><span class="linenos">783</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.move_base_relative-784"><a href="#CRIController.move_base_relative-784"><span class="linenos">784</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.move_base_relative-785"><a href="#CRIController.move_base_relative-785"><span class="linenos">785</span></a><span class="sd">        X,Y,Z,A,B,C,E1-E3 : float</span>
</span><span id="CRIController.move_base_relative-786"><a href="#CRIController.move_base_relative-786"><span class="linenos">786</span></a><span class="sd">            Target angles of axes</span>
</span><span id="CRIController.move_base_relative-787"><a href="#CRIController.move_base_relative-787"><span class="linenos">787</span></a>
</span><span id="CRIController.move_base_relative-788"><a href="#CRIController.move_base_relative-788"><span class="linenos">788</span></a><span class="sd">        velocity : float</span>
</span><span id="CRIController.move_base_relative-789"><a href="#CRIController.move_base_relative-789"><span class="linenos">789</span></a><span class="sd">            Velocity in mm/s</span>
</span><span id="CRIController.move_base_relative-790"><a href="#CRIController.move_base_relative-790"><span class="linenos">790</span></a>
</span><span id="CRIController.move_base_relative-791"><a href="#CRIController.move_base_relative-791"><span class="linenos">791</span></a><span class="sd">        frame : str</span>
</span><span id="CRIController.move_base_relative-792"><a href="#CRIController.move_base_relative-792"><span class="linenos">792</span></a><span class="sd">            frame of the coordinates, default is `#base`</span>
</span><span id="CRIController.move_base_relative-793"><a href="#CRIController.move_base_relative-793"><span class="linenos">793</span></a>
</span><span id="CRIController.move_base_relative-794"><a href="#CRIController.move_base_relative-794"><span class="linenos">794</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="CRIController.move_base_relative-795"><a href="#CRIController.move_base_relative-795"><span class="linenos">795</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="CRIController.move_base_relative-796"><a href="#CRIController.move_base_relative-796"><span class="linenos">796</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="CRIController.move_base_relative-797"><a href="#CRIController.move_base_relative-797"><span class="linenos">797</span></a>
</span><span id="CRIController.move_base_relative-798"><a href="#CRIController.move_base_relative-798"><span class="linenos">798</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="CRIController.move_base_relative-799"><a href="#CRIController.move_base_relative-799"><span class="linenos">799</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="CRIController.move_base_relative-800"><a href="#CRIController.move_base_relative-800"><span class="linenos">800</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.move_base_relative-801"><a href="#CRIController.move_base_relative-801"><span class="linenos">801</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="CRIController.move_base_relative-802"><a href="#CRIController.move_base_relative-802"><span class="linenos">802</span></a>            <span class="sa">f</span><span class="s2">&quot;CMD Move RelativeBase </span><span class="si">{</span><span class="n">X</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Y</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Z</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">B</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">C</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.move_base_relative-803"><a href="#CRIController.move_base_relative-803"><span class="linenos">803</span></a>        <span class="p">)</span>
</span><span id="CRIController.move_base_relative-804"><a href="#CRIController.move_base_relative-804"><span class="linenos">804</span></a>
</span><span id="CRIController.move_base_relative-805"><a href="#CRIController.move_base_relative-805"><span class="linenos">805</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController.move_base_relative-806"><a href="#CRIController.move_base_relative-806"><span class="linenos">806</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="CRIController.move_base_relative-807"><a href="#CRIController.move_base_relative-807"><span class="linenos">807</span></a>
</span><span id="CRIController.move_base_relative-808"><a href="#CRIController.move_base_relative-808"><span class="linenos">808</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_base_relative-809"><a href="#CRIController.move_base_relative-809"><span class="linenos">809</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.move_base_relative-810"><a href="#CRIController.move_base_relative-810"><span class="linenos">810</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController.move_base_relative-811"><a href="#CRIController.move_base_relative-811"><span class="linenos">811</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_base_relative-812"><a href="#CRIController.move_base_relative-812"><span class="linenos">812</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.move_base_relative-813"><a href="#CRIController.move_base_relative-813"><span class="linenos">813</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.move_base_relative-814"><a href="#CRIController.move_base_relative-814"><span class="linenos">814</span></a>
</span><span id="CRIController.move_base_relative-815"><a href="#CRIController.move_base_relative-815"><span class="linenos">815</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController.move_base_relative-816"><a href="#CRIController.move_base_relative-816"><span class="linenos">816</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.move_base_relative-817"><a href="#CRIController.move_base_relative-817"><span class="linenos">817</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.move_base_relative-818"><a href="#CRIController.move_base_relative-818"><span class="linenos">818</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="CRIController.move_base_relative-819"><a href="#CRIController.move_base_relative-819"><span class="linenos">819</span></a>                    <span class="p">)</span>
</span><span id="CRIController.move_base_relative-820"><a href="#CRIController.move_base_relative-820"><span class="linenos">820</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_base_relative-821"><a href="#CRIController.move_base_relative-821"><span class="linenos">821</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="CRIController.move_base_relative-822"><a href="#CRIController.move_base_relative-822"><span class="linenos">822</span></a>                        <span class="s2">&quot;Exec Error in Move BaseRelative command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span>
</span><span id="CRIController.move_base_relative-823"><a href="#CRIController.move_base_relative-823"><span class="linenos">823</span></a>                    <span class="p">)</span>
</span><span id="CRIController.move_base_relative-824"><a href="#CRIController.move_base_relative-824"><span class="linenos">824</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.move_base_relative-825"><a href="#CRIController.move_base_relative-825"><span class="linenos">825</span></a>
</span><span id="CRIController.move_base_relative-826"><a href="#CRIController.move_base_relative-826"><span class="linenos">826</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.move_base_relative-827"><a href="#CRIController.move_base_relative-827"><span class="linenos">827</span></a>
</span><span id="CRIController.move_base_relative-828"><a href="#CRIController.move_base_relative-828"><span class="linenos">828</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.move_base_relative-829"><a href="#CRIController.move_base_relative-829"><span class="linenos">829</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Relative cartesian move in base coordinate system</p>

<h2 id="parameters">Parameters</h2>

<p>X,Y,Z,A,B,C,E1-E3 : float
    Target angles of axes</p>

<p>velocity : float
    Velocity in mm/s</p>

<p>frame : str
    frame of the coordinates, default is <code>#base</code></p>

<p>wait_move_finished : bool
    true: wait until movement is finished
    false: only wait for command ack and not until move is finished</p>

<p>move_finished_timeout : float
    timout in seconds for waiting for the move to finish, <code>None</code> will wait indefinetly</p>
</div>


                            </div>
                            <div id="CRIController.move_tool_relative" class="classattr">
                                        <input id="CRIController.move_tool_relative-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">move_tool_relative</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">X</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">Y</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">Z</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">B</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">C</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E1</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E2</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E3</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.move_tool_relative-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.move_tool_relative"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.move_tool_relative-831"><a href="#CRIController.move_tool_relative-831"><span class="linenos">831</span></a>    <span class="k">def</span> <span class="nf">move_tool_relative</span><span class="p">(</span>
</span><span id="CRIController.move_tool_relative-832"><a href="#CRIController.move_tool_relative-832"><span class="linenos">832</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CRIController.move_tool_relative-833"><a href="#CRIController.move_tool_relative-833"><span class="linenos">833</span></a>        <span class="n">X</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_tool_relative-834"><a href="#CRIController.move_tool_relative-834"><span class="linenos">834</span></a>        <span class="n">Y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_tool_relative-835"><a href="#CRIController.move_tool_relative-835"><span class="linenos">835</span></a>        <span class="n">Z</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_tool_relative-836"><a href="#CRIController.move_tool_relative-836"><span class="linenos">836</span></a>        <span class="n">A</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_tool_relative-837"><a href="#CRIController.move_tool_relative-837"><span class="linenos">837</span></a>        <span class="n">B</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_tool_relative-838"><a href="#CRIController.move_tool_relative-838"><span class="linenos">838</span></a>        <span class="n">C</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_tool_relative-839"><a href="#CRIController.move_tool_relative-839"><span class="linenos">839</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_tool_relative-840"><a href="#CRIController.move_tool_relative-840"><span class="linenos">840</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_tool_relative-841"><a href="#CRIController.move_tool_relative-841"><span class="linenos">841</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_tool_relative-842"><a href="#CRIController.move_tool_relative-842"><span class="linenos">842</span></a>        <span class="n">velocity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.move_tool_relative-843"><a href="#CRIController.move_tool_relative-843"><span class="linenos">843</span></a>        <span class="n">wait_move_finished</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CRIController.move_tool_relative-844"><a href="#CRIController.move_tool_relative-844"><span class="linenos">844</span></a>        <span class="n">move_finished_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">300.0</span><span class="p">,</span>
</span><span id="CRIController.move_tool_relative-845"><a href="#CRIController.move_tool_relative-845"><span class="linenos">845</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.move_tool_relative-846"><a href="#CRIController.move_tool_relative-846"><span class="linenos">846</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Relative cartesian move in tool coordinate system</span>
</span><span id="CRIController.move_tool_relative-847"><a href="#CRIController.move_tool_relative-847"><span class="linenos">847</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.move_tool_relative-848"><a href="#CRIController.move_tool_relative-848"><span class="linenos">848</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.move_tool_relative-849"><a href="#CRIController.move_tool_relative-849"><span class="linenos">849</span></a><span class="sd">        X,Y,Z,A,B,C,E1-E3 : float</span>
</span><span id="CRIController.move_tool_relative-850"><a href="#CRIController.move_tool_relative-850"><span class="linenos">850</span></a><span class="sd">            Target angles of axes</span>
</span><span id="CRIController.move_tool_relative-851"><a href="#CRIController.move_tool_relative-851"><span class="linenos">851</span></a>
</span><span id="CRIController.move_tool_relative-852"><a href="#CRIController.move_tool_relative-852"><span class="linenos">852</span></a><span class="sd">        velocity : float</span>
</span><span id="CRIController.move_tool_relative-853"><a href="#CRIController.move_tool_relative-853"><span class="linenos">853</span></a><span class="sd">            Velocity in mm/s</span>
</span><span id="CRIController.move_tool_relative-854"><a href="#CRIController.move_tool_relative-854"><span class="linenos">854</span></a>
</span><span id="CRIController.move_tool_relative-855"><a href="#CRIController.move_tool_relative-855"><span class="linenos">855</span></a><span class="sd">        frame : str</span>
</span><span id="CRIController.move_tool_relative-856"><a href="#CRIController.move_tool_relative-856"><span class="linenos">856</span></a><span class="sd">            frame of the coordinates, default is `#base`</span>
</span><span id="CRIController.move_tool_relative-857"><a href="#CRIController.move_tool_relative-857"><span class="linenos">857</span></a>
</span><span id="CRIController.move_tool_relative-858"><a href="#CRIController.move_tool_relative-858"><span class="linenos">858</span></a><span class="sd">        wait_move_finished : bool</span>
</span><span id="CRIController.move_tool_relative-859"><a href="#CRIController.move_tool_relative-859"><span class="linenos">859</span></a><span class="sd">            true: wait until movement is finished</span>
</span><span id="CRIController.move_tool_relative-860"><a href="#CRIController.move_tool_relative-860"><span class="linenos">860</span></a><span class="sd">            false: only wait for command ack and not until move is finished</span>
</span><span id="CRIController.move_tool_relative-861"><a href="#CRIController.move_tool_relative-861"><span class="linenos">861</span></a>
</span><span id="CRIController.move_tool_relative-862"><a href="#CRIController.move_tool_relative-862"><span class="linenos">862</span></a><span class="sd">        move_finished_timeout : float</span>
</span><span id="CRIController.move_tool_relative-863"><a href="#CRIController.move_tool_relative-863"><span class="linenos">863</span></a><span class="sd">            timout in seconds for waiting for the move to finish, `None` will wait indefinetly</span>
</span><span id="CRIController.move_tool_relative-864"><a href="#CRIController.move_tool_relative-864"><span class="linenos">864</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.move_tool_relative-865"><a href="#CRIController.move_tool_relative-865"><span class="linenos">865</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="CRIController.move_tool_relative-866"><a href="#CRIController.move_tool_relative-866"><span class="linenos">866</span></a>            <span class="sa">f</span><span class="s2">&quot;CMD Move RelativeTool </span><span class="si">{</span><span class="n">X</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Y</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">Z</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">A</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">B</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">C</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E2</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">E3</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">velocity</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.move_tool_relative-867"><a href="#CRIController.move_tool_relative-867"><span class="linenos">867</span></a>        <span class="p">)</span>
</span><span id="CRIController.move_tool_relative-868"><a href="#CRIController.move_tool_relative-868"><span class="linenos">868</span></a>
</span><span id="CRIController.move_tool_relative-869"><a href="#CRIController.move_tool_relative-869"><span class="linenos">869</span></a>        <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController.move_tool_relative-870"><a href="#CRIController.move_tool_relative-870"><span class="linenos">870</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_register_answer</span><span class="p">(</span><span class="s2">&quot;EXECEND&quot;</span><span class="p">)</span>
</span><span id="CRIController.move_tool_relative-871"><a href="#CRIController.move_tool_relative-871"><span class="linenos">871</span></a>
</span><span id="CRIController.move_tool_relative-872"><a href="#CRIController.move_tool_relative-872"><span class="linenos">872</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_tool_relative-873"><a href="#CRIController.move_tool_relative-873"><span class="linenos">873</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.move_tool_relative-874"><a href="#CRIController.move_tool_relative-874"><span class="linenos">874</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
</span><span id="CRIController.move_tool_relative-875"><a href="#CRIController.move_tool_relative-875"><span class="linenos">875</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_tool_relative-876"><a href="#CRIController.move_tool_relative-876"><span class="linenos">876</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Joints command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.move_tool_relative-877"><a href="#CRIController.move_tool_relative-877"><span class="linenos">877</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.move_tool_relative-878"><a href="#CRIController.move_tool_relative-878"><span class="linenos">878</span></a>
</span><span id="CRIController.move_tool_relative-879"><a href="#CRIController.move_tool_relative-879"><span class="linenos">879</span></a>            <span class="k">if</span> <span class="n">wait_move_finished</span><span class="p">:</span>
</span><span id="CRIController.move_tool_relative-880"><a href="#CRIController.move_tool_relative-880"><span class="linenos">880</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.move_tool_relative-881"><a href="#CRIController.move_tool_relative-881"><span class="linenos">881</span></a>                    <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.move_tool_relative-882"><a href="#CRIController.move_tool_relative-882"><span class="linenos">882</span></a>                        <span class="s2">&quot;EXECEND&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">move_finished_timeout</span>
</span><span id="CRIController.move_tool_relative-883"><a href="#CRIController.move_tool_relative-883"><span class="linenos">883</span></a>                    <span class="p">)</span>
</span><span id="CRIController.move_tool_relative-884"><a href="#CRIController.move_tool_relative-884"><span class="linenos">884</span></a>                <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.move_tool_relative-885"><a href="#CRIController.move_tool_relative-885"><span class="linenos">885</span></a>                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Exec Error in Move BaseTool command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.move_tool_relative-886"><a href="#CRIController.move_tool_relative-886"><span class="linenos">886</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.move_tool_relative-887"><a href="#CRIController.move_tool_relative-887"><span class="linenos">887</span></a>
</span><span id="CRIController.move_tool_relative-888"><a href="#CRIController.move_tool_relative-888"><span class="linenos">888</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.move_tool_relative-889"><a href="#CRIController.move_tool_relative-889"><span class="linenos">889</span></a>
</span><span id="CRIController.move_tool_relative-890"><a href="#CRIController.move_tool_relative-890"><span class="linenos">890</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.move_tool_relative-891"><a href="#CRIController.move_tool_relative-891"><span class="linenos">891</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Relative cartesian move in tool coordinate system</p>

<h2 id="parameters">Parameters</h2>

<p>X,Y,Z,A,B,C,E1-E3 : float
    Target angles of axes</p>

<p>velocity : float
    Velocity in mm/s</p>

<p>frame : str
    frame of the coordinates, default is <code>#base</code></p>

<p>wait_move_finished : bool
    true: wait until movement is finished
    false: only wait for command ack and not until move is finished</p>

<p>move_finished_timeout : float
    timout in seconds for waiting for the move to finish, <code>None</code> will wait indefinetly</p>
</div>


                            </div>
                            <div id="CRIController.stop_move" class="classattr">
                                        <input id="CRIController.stop_move-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">stop_move</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="CRIController.stop_move-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.stop_move"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.stop_move-893"><a href="#CRIController.stop_move-893"><span class="linenos">893</span></a>    <span class="k">def</span> <span class="nf">stop_move</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.stop_move-894"><a href="#CRIController.stop_move-894"><span class="linenos">894</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop movement</span>
</span><span id="CRIController.stop_move-895"><a href="#CRIController.stop_move-895"><span class="linenos">895</span></a>
</span><span id="CRIController.stop_move-896"><a href="#CRIController.stop_move-896"><span class="linenos">896</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.stop_move-897"><a href="#CRIController.stop_move-897"><span class="linenos">897</span></a><span class="sd">        -------</span>
</span><span id="CRIController.stop_move-898"><a href="#CRIController.stop_move-898"><span class="linenos">898</span></a><span class="sd">        bool</span>
</span><span id="CRIController.stop_move-899"><a href="#CRIController.stop_move-899"><span class="linenos">899</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.stop_move-900"><a href="#CRIController.stop_move-900"><span class="linenos">900</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.stop_move-901"><a href="#CRIController.stop_move-901"><span class="linenos">901</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.stop_move-902"><a href="#CRIController.stop_move-902"><span class="linenos">902</span></a>
</span><span id="CRIController.stop_move-903"><a href="#CRIController.stop_move-903"><span class="linenos">903</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CMD Move Stop&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.stop_move-904"><a href="#CRIController.stop_move-904"><span class="linenos">904</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.stop_move-905"><a href="#CRIController.stop_move-905"><span class="linenos">905</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span>
</span><span id="CRIController.stop_move-906"><a href="#CRIController.stop_move-906"><span class="linenos">906</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.stop_move-907"><a href="#CRIController.stop_move-907"><span class="linenos">907</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Move Stop command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.stop_move-908"><a href="#CRIController.stop_move-908"><span class="linenos">908</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.stop_move-909"><a href="#CRIController.stop_move-909"><span class="linenos">909</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.stop_move-910"><a href="#CRIController.stop_move-910"><span class="linenos">910</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.stop_move-911"><a href="#CRIController.stop_move-911"><span class="linenos">911</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.stop_move-912"><a href="#CRIController.stop_move-912"><span class="linenos">912</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Stop movement</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.start_jog" class="classattr">
                                        <input id="CRIController.start_jog-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">start_jog</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CRIController.start_jog-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.start_jog"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.start_jog-914"><a href="#CRIController.start_jog-914"><span class="linenos">914</span></a>    <span class="k">def</span> <span class="nf">start_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CRIController.start_jog-915"><a href="#CRIController.start_jog-915"><span class="linenos">915</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;starts live jog. Set speeds via set_jog_values&quot;&quot;&quot;</span>
</span><span id="CRIController.start_jog-916"><a href="#CRIController.start_jog-916"><span class="linenos">916</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_intervall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ACTIVE_JOG_INTERVAL_SEC</span>
</span><span id="CRIController.start_jog-917"><a href="#CRIController.start_jog-917"><span class="linenos">917</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">live_jog_active</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>starts live jog. Set speeds via set_jog_values</p>
</div>


                            </div>
                            <div id="CRIController.stop_jog" class="classattr">
                                        <input id="CRIController.stop_jog-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">stop_jog</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CRIController.stop_jog-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.stop_jog"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.stop_jog-919"><a href="#CRIController.stop_jog-919"><span class="linenos">919</span></a>    <span class="k">def</span> <span class="nf">stop_jog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CRIController.stop_jog-920"><a href="#CRIController.stop_jog-920"><span class="linenos">920</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;stops live jog.&quot;&quot;&quot;</span>
</span><span id="CRIController.stop_jog-921"><a href="#CRIController.stop_jog-921"><span class="linenos">921</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">live_jog_active</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="CRIController.stop_jog-922"><a href="#CRIController.stop_jog-922"><span class="linenos">922</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_intervall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ALIVE_JOG_INTERVAL_SEC</span>
</span><span id="CRIController.stop_jog-923"><a href="#CRIController.stop_jog-923"><span class="linenos">923</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="CRIController.stop_jog-924"><a href="#CRIController.stop_jog-924"><span class="linenos">924</span></a>            <span class="s2">&quot;A1&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController.stop_jog-925"><a href="#CRIController.stop_jog-925"><span class="linenos">925</span></a>            <span class="s2">&quot;A2&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController.stop_jog-926"><a href="#CRIController.stop_jog-926"><span class="linenos">926</span></a>            <span class="s2">&quot;A3&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController.stop_jog-927"><a href="#CRIController.stop_jog-927"><span class="linenos">927</span></a>            <span class="s2">&quot;A4&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController.stop_jog-928"><a href="#CRIController.stop_jog-928"><span class="linenos">928</span></a>            <span class="s2">&quot;A5&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController.stop_jog-929"><a href="#CRIController.stop_jog-929"><span class="linenos">929</span></a>            <span class="s2">&quot;A6&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController.stop_jog-930"><a href="#CRIController.stop_jog-930"><span class="linenos">930</span></a>            <span class="s2">&quot;E1&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController.stop_jog-931"><a href="#CRIController.stop_jog-931"><span class="linenos">931</span></a>            <span class="s2">&quot;E2&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController.stop_jog-932"><a href="#CRIController.stop_jog-932"><span class="linenos">932</span></a>            <span class="s2">&quot;E3&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span id="CRIController.stop_jog-933"><a href="#CRIController.stop_jog-933"><span class="linenos">933</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>stops live jog.</p>
</div>


                            </div>
                            <div id="CRIController.set_jog_values" class="classattr">
                                        <input id="CRIController.set_jog_values-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_jog_values</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">A1</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A2</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A3</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A4</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A5</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">A6</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E1</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E2</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">E3</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="CRIController.set_jog_values-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.set_jog_values"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.set_jog_values-935"><a href="#CRIController.set_jog_values-935"><span class="linenos">935</span></a>    <span class="k">def</span> <span class="nf">set_jog_values</span><span class="p">(</span>
</span><span id="CRIController.set_jog_values-936"><a href="#CRIController.set_jog_values-936"><span class="linenos">936</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-937"><a href="#CRIController.set_jog_values-937"><span class="linenos">937</span></a>        <span class="n">A1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-938"><a href="#CRIController.set_jog_values-938"><span class="linenos">938</span></a>        <span class="n">A2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-939"><a href="#CRIController.set_jog_values-939"><span class="linenos">939</span></a>        <span class="n">A3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-940"><a href="#CRIController.set_jog_values-940"><span class="linenos">940</span></a>        <span class="n">A4</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-941"><a href="#CRIController.set_jog_values-941"><span class="linenos">941</span></a>        <span class="n">A5</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-942"><a href="#CRIController.set_jog_values-942"><span class="linenos">942</span></a>        <span class="n">A6</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-943"><a href="#CRIController.set_jog_values-943"><span class="linenos">943</span></a>        <span class="n">E1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-944"><a href="#CRIController.set_jog_values-944"><span class="linenos">944</span></a>        <span class="n">E2</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-945"><a href="#CRIController.set_jog_values-945"><span class="linenos">945</span></a>        <span class="n">E3</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-946"><a href="#CRIController.set_jog_values-946"><span class="linenos">946</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.set_jog_values-947"><a href="#CRIController.set_jog_values-947"><span class="linenos">947</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CRIController.set_jog_values-948"><a href="#CRIController.set_jog_values-948"><span class="linenos">948</span></a><span class="sd">        Sets live jog axes speeds.</span>
</span><span id="CRIController.set_jog_values-949"><a href="#CRIController.set_jog_values-949"><span class="linenos">949</span></a>
</span><span id="CRIController.set_jog_values-950"><a href="#CRIController.set_jog_values-950"><span class="linenos">950</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.set_jog_values-951"><a href="#CRIController.set_jog_values-951"><span class="linenos">951</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.set_jog_values-952"><a href="#CRIController.set_jog_values-952"><span class="linenos">952</span></a><span class="sd">            A1-A6, E1-3 : float</span>
</span><span id="CRIController.set_jog_values-953"><a href="#CRIController.set_jog_values-953"><span class="linenos">953</span></a><span class="sd">                axes speeds in percent of maximum speed</span>
</span><span id="CRIController.set_jog_values-954"><a href="#CRIController.set_jog_values-954"><span class="linenos">954</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.set_jog_values-955"><a href="#CRIController.set_jog_values-955"><span class="linenos">955</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds_lock</span><span class="p">:</span>
</span><span id="CRIController.set_jog_values-956"><a href="#CRIController.set_jog_values-956"><span class="linenos">956</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">jog_speeds</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="CRIController.set_jog_values-957"><a href="#CRIController.set_jog_values-957"><span class="linenos">957</span></a>                <span class="s2">&quot;A1&quot;</span><span class="p">:</span> <span class="n">A1</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-958"><a href="#CRIController.set_jog_values-958"><span class="linenos">958</span></a>                <span class="s2">&quot;A2&quot;</span><span class="p">:</span> <span class="n">A2</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-959"><a href="#CRIController.set_jog_values-959"><span class="linenos">959</span></a>                <span class="s2">&quot;A3&quot;</span><span class="p">:</span> <span class="n">A3</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-960"><a href="#CRIController.set_jog_values-960"><span class="linenos">960</span></a>                <span class="s2">&quot;A4&quot;</span><span class="p">:</span> <span class="n">A4</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-961"><a href="#CRIController.set_jog_values-961"><span class="linenos">961</span></a>                <span class="s2">&quot;A5&quot;</span><span class="p">:</span> <span class="n">A5</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-962"><a href="#CRIController.set_jog_values-962"><span class="linenos">962</span></a>                <span class="s2">&quot;A6&quot;</span><span class="p">:</span> <span class="n">A6</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-963"><a href="#CRIController.set_jog_values-963"><span class="linenos">963</span></a>                <span class="s2">&quot;E1&quot;</span><span class="p">:</span> <span class="n">E1</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-964"><a href="#CRIController.set_jog_values-964"><span class="linenos">964</span></a>                <span class="s2">&quot;E2&quot;</span><span class="p">:</span> <span class="n">E2</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-965"><a href="#CRIController.set_jog_values-965"><span class="linenos">965</span></a>                <span class="s2">&quot;E3&quot;</span><span class="p">:</span> <span class="n">E3</span><span class="p">,</span>
</span><span id="CRIController.set_jog_values-966"><a href="#CRIController.set_jog_values-966"><span class="linenos">966</span></a>            <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Sets live jog axes speeds.</p>

<h2 id="parameters">Parameters</h2>

<pre><code>A1-A6, E1-3 : float
    axes speeds in percent of maximum speed
</code></pre>
</div>


                            </div>
                            <div id="CRIController.set_motion_type" class="classattr">
                                        <input id="CRIController.set_motion_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_motion_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">motion_type</span><span class="p">:</span> <span class="n"><a href="#CRIController.MotionType">CRIController.MotionType</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CRIController.set_motion_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.set_motion_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.set_motion_type-968"><a href="#CRIController.set_motion_type-968"><span class="linenos">968</span></a>    <span class="k">def</span> <span class="nf">set_motion_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">motion_type</span><span class="p">:</span> <span class="n">MotionType</span><span class="p">):</span>
</span><span id="CRIController.set_motion_type-969"><a href="#CRIController.set_motion_type-969"><span class="linenos">969</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set motion type</span>
</span><span id="CRIController.set_motion_type-970"><a href="#CRIController.set_motion_type-970"><span class="linenos">970</span></a>
</span><span id="CRIController.set_motion_type-971"><a href="#CRIController.set_motion_type-971"><span class="linenos">971</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.set_motion_type-972"><a href="#CRIController.set_motion_type-972"><span class="linenos">972</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.set_motion_type-973"><a href="#CRIController.set_motion_type-973"><span class="linenos">973</span></a><span class="sd">        motion_type : MotionType</span>
</span><span id="CRIController.set_motion_type-974"><a href="#CRIController.set_motion_type-974"><span class="linenos">974</span></a><span class="sd">            motion type</span>
</span><span id="CRIController.set_motion_type-975"><a href="#CRIController.set_motion_type-975"><span class="linenos">975</span></a>
</span><span id="CRIController.set_motion_type-976"><a href="#CRIController.set_motion_type-976"><span class="linenos">976</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.set_motion_type-977"><a href="#CRIController.set_motion_type-977"><span class="linenos">977</span></a><span class="sd">        -------</span>
</span><span id="CRIController.set_motion_type-978"><a href="#CRIController.set_motion_type-978"><span class="linenos">978</span></a><span class="sd">        bool</span>
</span><span id="CRIController.set_motion_type-979"><a href="#CRIController.set_motion_type-979"><span class="linenos">979</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.set_motion_type-980"><a href="#CRIController.set_motion_type-980"><span class="linenos">980</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.set_motion_type-981"><a href="#CRIController.set_motion_type-981"><span class="linenos">981</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.set_motion_type-982"><a href="#CRIController.set_motion_type-982"><span class="linenos">982</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD MotionType</span><span class="si">{</span><span class="n">motion_type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.set_motion_type-983"><a href="#CRIController.set_motion_type-983"><span class="linenos">983</span></a>
</span><span id="CRIController.set_motion_type-984"><a href="#CRIController.set_motion_type-984"><span class="linenos">984</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.set_motion_type-985"><a href="#CRIController.set_motion_type-985"><span class="linenos">985</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.set_motion_type-986"><a href="#CRIController.set_motion_type-986"><span class="linenos">986</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.set_motion_type-987"><a href="#CRIController.set_motion_type-987"><span class="linenos">987</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.set_motion_type-988"><a href="#CRIController.set_motion_type-988"><span class="linenos">988</span></a>                <span class="p">)</span>
</span><span id="CRIController.set_motion_type-989"><a href="#CRIController.set_motion_type-989"><span class="linenos">989</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.set_motion_type-990"><a href="#CRIController.set_motion_type-990"><span class="linenos">990</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in MotionType command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.set_motion_type-991"><a href="#CRIController.set_motion_type-991"><span class="linenos">991</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.set_motion_type-992"><a href="#CRIController.set_motion_type-992"><span class="linenos">992</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.set_motion_type-993"><a href="#CRIController.set_motion_type-993"><span class="linenos">993</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.set_motion_type-994"><a href="#CRIController.set_motion_type-994"><span class="linenos">994</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.set_motion_type-995"><a href="#CRIController.set_motion_type-995"><span class="linenos">995</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Set motion type</p>

<h2 id="parameters">Parameters</h2>

<p>motion_type : MotionType
    motion type</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.set_override" class="classattr">
                                        <input id="CRIController.set_override-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_override</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">override</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CRIController.set_override-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.set_override"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.set_override-997"><a href="#CRIController.set_override-997"><span class="linenos"> 997</span></a>    <span class="k">def</span> <span class="nf">set_override</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">override</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="CRIController.set_override-998"><a href="#CRIController.set_override-998"><span class="linenos"> 998</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set override</span>
</span><span id="CRIController.set_override-999"><a href="#CRIController.set_override-999"><span class="linenos"> 999</span></a>
</span><span id="CRIController.set_override-1000"><a href="#CRIController.set_override-1000"><span class="linenos">1000</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.set_override-1001"><a href="#CRIController.set_override-1001"><span class="linenos">1001</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.set_override-1002"><a href="#CRIController.set_override-1002"><span class="linenos">1002</span></a><span class="sd">        override : float</span>
</span><span id="CRIController.set_override-1003"><a href="#CRIController.set_override-1003"><span class="linenos">1003</span></a><span class="sd">            override percent</span>
</span><span id="CRIController.set_override-1004"><a href="#CRIController.set_override-1004"><span class="linenos">1004</span></a>
</span><span id="CRIController.set_override-1005"><a href="#CRIController.set_override-1005"><span class="linenos">1005</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.set_override-1006"><a href="#CRIController.set_override-1006"><span class="linenos">1006</span></a><span class="sd">        -------</span>
</span><span id="CRIController.set_override-1007"><a href="#CRIController.set_override-1007"><span class="linenos">1007</span></a><span class="sd">        bool</span>
</span><span id="CRIController.set_override-1008"><a href="#CRIController.set_override-1008"><span class="linenos">1008</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.set_override-1009"><a href="#CRIController.set_override-1009"><span class="linenos">1009</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.set_override-1010"><a href="#CRIController.set_override-1010"><span class="linenos">1010</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.set_override-1011"><a href="#CRIController.set_override-1011"><span class="linenos">1011</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD Override </span><span class="si">{</span><span class="n">override</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.set_override-1012"><a href="#CRIController.set_override-1012"><span class="linenos">1012</span></a>
</span><span id="CRIController.set_override-1013"><a href="#CRIController.set_override-1013"><span class="linenos">1013</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.set_override-1014"><a href="#CRIController.set_override-1014"><span class="linenos">1014</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.set_override-1015"><a href="#CRIController.set_override-1015"><span class="linenos">1015</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.set_override-1016"><a href="#CRIController.set_override-1016"><span class="linenos">1016</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.set_override-1017"><a href="#CRIController.set_override-1017"><span class="linenos">1017</span></a>                <span class="p">)</span>
</span><span id="CRIController.set_override-1018"><a href="#CRIController.set_override-1018"><span class="linenos">1018</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.set_override-1019"><a href="#CRIController.set_override-1019"><span class="linenos">1019</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in Override command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.set_override-1020"><a href="#CRIController.set_override-1020"><span class="linenos">1020</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.set_override-1021"><a href="#CRIController.set_override-1021"><span class="linenos">1021</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.set_override-1022"><a href="#CRIController.set_override-1022"><span class="linenos">1022</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.set_override-1023"><a href="#CRIController.set_override-1023"><span class="linenos">1023</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.set_override-1024"><a href="#CRIController.set_override-1024"><span class="linenos">1024</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Set override</p>

<h2 id="parameters">Parameters</h2>

<p>override : float
    override percent</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.set_dout" class="classattr">
                                        <input id="CRIController.set_dout-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_dout</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CRIController.set_dout-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.set_dout"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.set_dout-1026"><a href="#CRIController.set_dout-1026"><span class="linenos">1026</span></a>    <span class="k">def</span> <span class="nf">set_dout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="CRIController.set_dout-1027"><a href="#CRIController.set_dout-1027"><span class="linenos">1027</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set digital out</span>
</span><span id="CRIController.set_dout-1028"><a href="#CRIController.set_dout-1028"><span class="linenos">1028</span></a>
</span><span id="CRIController.set_dout-1029"><a href="#CRIController.set_dout-1029"><span class="linenos">1029</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.set_dout-1030"><a href="#CRIController.set_dout-1030"><span class="linenos">1030</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.set_dout-1031"><a href="#CRIController.set_dout-1031"><span class="linenos">1031</span></a><span class="sd">        id : int</span>
</span><span id="CRIController.set_dout-1032"><a href="#CRIController.set_dout-1032"><span class="linenos">1032</span></a><span class="sd">            index of DOUT (0 to 63)</span>
</span><span id="CRIController.set_dout-1033"><a href="#CRIController.set_dout-1033"><span class="linenos">1033</span></a>
</span><span id="CRIController.set_dout-1034"><a href="#CRIController.set_dout-1034"><span class="linenos">1034</span></a><span class="sd">        value : bool</span>
</span><span id="CRIController.set_dout-1035"><a href="#CRIController.set_dout-1035"><span class="linenos">1035</span></a><span class="sd">            value to set DOUT to</span>
</span><span id="CRIController.set_dout-1036"><a href="#CRIController.set_dout-1036"><span class="linenos">1036</span></a>
</span><span id="CRIController.set_dout-1037"><a href="#CRIController.set_dout-1037"><span class="linenos">1037</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.set_dout-1038"><a href="#CRIController.set_dout-1038"><span class="linenos">1038</span></a><span class="sd">        -------</span>
</span><span id="CRIController.set_dout-1039"><a href="#CRIController.set_dout-1039"><span class="linenos">1039</span></a><span class="sd">        bool</span>
</span><span id="CRIController.set_dout-1040"><a href="#CRIController.set_dout-1040"><span class="linenos">1040</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.set_dout-1041"><a href="#CRIController.set_dout-1041"><span class="linenos">1041</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.set_dout-1042"><a href="#CRIController.set_dout-1042"><span class="linenos">1042</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.set_dout-1043"><a href="#CRIController.set_dout-1043"><span class="linenos">1043</span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&gt;</span> <span class="mi">63</span><span class="p">):</span>
</span><span id="CRIController.set_dout-1044"><a href="#CRIController.set_dout-1044"><span class="linenos">1044</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span>
</span><span id="CRIController.set_dout-1045"><a href="#CRIController.set_dout-1045"><span class="linenos">1045</span></a>
</span><span id="CRIController.set_dout-1046"><a href="#CRIController.set_dout-1046"><span class="linenos">1046</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD DOUT </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.set_dout-1047"><a href="#CRIController.set_dout-1047"><span class="linenos">1047</span></a>
</span><span id="CRIController.set_dout-1048"><a href="#CRIController.set_dout-1048"><span class="linenos">1048</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.set_dout-1049"><a href="#CRIController.set_dout-1049"><span class="linenos">1049</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.set_dout-1050"><a href="#CRIController.set_dout-1050"><span class="linenos">1050</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.set_dout-1051"><a href="#CRIController.set_dout-1051"><span class="linenos">1051</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.set_dout-1052"><a href="#CRIController.set_dout-1052"><span class="linenos">1052</span></a>                <span class="p">)</span>
</span><span id="CRIController.set_dout-1053"><a href="#CRIController.set_dout-1053"><span class="linenos">1053</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.set_dout-1054"><a href="#CRIController.set_dout-1054"><span class="linenos">1054</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in DOUT command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.set_dout-1055"><a href="#CRIController.set_dout-1055"><span class="linenos">1055</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.set_dout-1056"><a href="#CRIController.set_dout-1056"><span class="linenos">1056</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.set_dout-1057"><a href="#CRIController.set_dout-1057"><span class="linenos">1057</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.set_dout-1058"><a href="#CRIController.set_dout-1058"><span class="linenos">1058</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.set_dout-1059"><a href="#CRIController.set_dout-1059"><span class="linenos">1059</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Set digital out</p>

<h2 id="parameters">Parameters</h2>

<p>id : int
    index of DOUT (0 to 63)</p>

<p>value : bool
    value to set DOUT to</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.set_din" class="classattr">
                                        <input id="CRIController.set_din-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_din</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CRIController.set_din-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.set_din"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.set_din-1061"><a href="#CRIController.set_din-1061"><span class="linenos">1061</span></a>    <span class="k">def</span> <span class="nf">set_din</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="CRIController.set_din-1062"><a href="#CRIController.set_din-1062"><span class="linenos">1062</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set digital inout, only available in simulation</span>
</span><span id="CRIController.set_din-1063"><a href="#CRIController.set_din-1063"><span class="linenos">1063</span></a>
</span><span id="CRIController.set_din-1064"><a href="#CRIController.set_din-1064"><span class="linenos">1064</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.set_din-1065"><a href="#CRIController.set_din-1065"><span class="linenos">1065</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.set_din-1066"><a href="#CRIController.set_din-1066"><span class="linenos">1066</span></a><span class="sd">        id : int</span>
</span><span id="CRIController.set_din-1067"><a href="#CRIController.set_din-1067"><span class="linenos">1067</span></a><span class="sd">            index of DIN (0 to 63)</span>
</span><span id="CRIController.set_din-1068"><a href="#CRIController.set_din-1068"><span class="linenos">1068</span></a>
</span><span id="CRIController.set_din-1069"><a href="#CRIController.set_din-1069"><span class="linenos">1069</span></a><span class="sd">        value : bool</span>
</span><span id="CRIController.set_din-1070"><a href="#CRIController.set_din-1070"><span class="linenos">1070</span></a><span class="sd">            value to set DIN to</span>
</span><span id="CRIController.set_din-1071"><a href="#CRIController.set_din-1071"><span class="linenos">1071</span></a>
</span><span id="CRIController.set_din-1072"><a href="#CRIController.set_din-1072"><span class="linenos">1072</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.set_din-1073"><a href="#CRIController.set_din-1073"><span class="linenos">1073</span></a><span class="sd">        -------</span>
</span><span id="CRIController.set_din-1074"><a href="#CRIController.set_din-1074"><span class="linenos">1074</span></a><span class="sd">        bool</span>
</span><span id="CRIController.set_din-1075"><a href="#CRIController.set_din-1075"><span class="linenos">1075</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.set_din-1076"><a href="#CRIController.set_din-1076"><span class="linenos">1076</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.set_din-1077"><a href="#CRIController.set_din-1077"><span class="linenos">1077</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.set_din-1078"><a href="#CRIController.set_din-1078"><span class="linenos">1078</span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&gt;</span> <span class="mi">63</span><span class="p">):</span>
</span><span id="CRIController.set_din-1079"><a href="#CRIController.set_din-1079"><span class="linenos">1079</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span>
</span><span id="CRIController.set_din-1080"><a href="#CRIController.set_din-1080"><span class="linenos">1080</span></a>
</span><span id="CRIController.set_din-1081"><a href="#CRIController.set_din-1081"><span class="linenos">1081</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD DIN </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.set_din-1082"><a href="#CRIController.set_din-1082"><span class="linenos">1082</span></a>
</span><span id="CRIController.set_din-1083"><a href="#CRIController.set_din-1083"><span class="linenos">1083</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.set_din-1084"><a href="#CRIController.set_din-1084"><span class="linenos">1084</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.set_din-1085"><a href="#CRIController.set_din-1085"><span class="linenos">1085</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.set_din-1086"><a href="#CRIController.set_din-1086"><span class="linenos">1086</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.set_din-1087"><a href="#CRIController.set_din-1087"><span class="linenos">1087</span></a>                <span class="p">)</span>
</span><span id="CRIController.set_din-1088"><a href="#CRIController.set_din-1088"><span class="linenos">1088</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.set_din-1089"><a href="#CRIController.set_din-1089"><span class="linenos">1089</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in DIN command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.set_din-1090"><a href="#CRIController.set_din-1090"><span class="linenos">1090</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.set_din-1091"><a href="#CRIController.set_din-1091"><span class="linenos">1091</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.set_din-1092"><a href="#CRIController.set_din-1092"><span class="linenos">1092</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.set_din-1093"><a href="#CRIController.set_din-1093"><span class="linenos">1093</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.set_din-1094"><a href="#CRIController.set_din-1094"><span class="linenos">1094</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Set digital inout, only available in simulation</p>

<h2 id="parameters">Parameters</h2>

<p>id : int
    index of DIN (0 to 63)</p>

<p>value : bool
    value to set DIN to</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.set_global_signal" class="classattr">
                                        <input id="CRIController.set_global_signal-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_global_signal</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CRIController.set_global_signal-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.set_global_signal"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.set_global_signal-1096"><a href="#CRIController.set_global_signal-1096"><span class="linenos">1096</span></a>    <span class="k">def</span> <span class="nf">set_global_signal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="CRIController.set_global_signal-1097"><a href="#CRIController.set_global_signal-1097"><span class="linenos">1097</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set global signal</span>
</span><span id="CRIController.set_global_signal-1098"><a href="#CRIController.set_global_signal-1098"><span class="linenos">1098</span></a>
</span><span id="CRIController.set_global_signal-1099"><a href="#CRIController.set_global_signal-1099"><span class="linenos">1099</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.set_global_signal-1100"><a href="#CRIController.set_global_signal-1100"><span class="linenos">1100</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.set_global_signal-1101"><a href="#CRIController.set_global_signal-1101"><span class="linenos">1101</span></a><span class="sd">        id : int</span>
</span><span id="CRIController.set_global_signal-1102"><a href="#CRIController.set_global_signal-1102"><span class="linenos">1102</span></a><span class="sd">            index of signal (0 to 99)</span>
</span><span id="CRIController.set_global_signal-1103"><a href="#CRIController.set_global_signal-1103"><span class="linenos">1103</span></a>
</span><span id="CRIController.set_global_signal-1104"><a href="#CRIController.set_global_signal-1104"><span class="linenos">1104</span></a><span class="sd">        value : bool</span>
</span><span id="CRIController.set_global_signal-1105"><a href="#CRIController.set_global_signal-1105"><span class="linenos">1105</span></a><span class="sd">            value to set signal to</span>
</span><span id="CRIController.set_global_signal-1106"><a href="#CRIController.set_global_signal-1106"><span class="linenos">1106</span></a>
</span><span id="CRIController.set_global_signal-1107"><a href="#CRIController.set_global_signal-1107"><span class="linenos">1107</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.set_global_signal-1108"><a href="#CRIController.set_global_signal-1108"><span class="linenos">1108</span></a><span class="sd">        -------</span>
</span><span id="CRIController.set_global_signal-1109"><a href="#CRIController.set_global_signal-1109"><span class="linenos">1109</span></a><span class="sd">        bool</span>
</span><span id="CRIController.set_global_signal-1110"><a href="#CRIController.set_global_signal-1110"><span class="linenos">1110</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.set_global_signal-1111"><a href="#CRIController.set_global_signal-1111"><span class="linenos">1111</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.set_global_signal-1112"><a href="#CRIController.set_global_signal-1112"><span class="linenos">1112</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.set_global_signal-1113"><a href="#CRIController.set_global_signal-1113"><span class="linenos">1113</span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&gt;</span> <span class="mi">99</span><span class="p">):</span>
</span><span id="CRIController.set_global_signal-1114"><a href="#CRIController.set_global_signal-1114"><span class="linenos">1114</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span>
</span><span id="CRIController.set_global_signal-1115"><a href="#CRIController.set_global_signal-1115"><span class="linenos">1115</span></a>
</span><span id="CRIController.set_global_signal-1116"><a href="#CRIController.set_global_signal-1116"><span class="linenos">1116</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD GSIG </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.set_global_signal-1117"><a href="#CRIController.set_global_signal-1117"><span class="linenos">1117</span></a>
</span><span id="CRIController.set_global_signal-1118"><a href="#CRIController.set_global_signal-1118"><span class="linenos">1118</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.set_global_signal-1119"><a href="#CRIController.set_global_signal-1119"><span class="linenos">1119</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.set_global_signal-1120"><a href="#CRIController.set_global_signal-1120"><span class="linenos">1120</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.set_global_signal-1121"><a href="#CRIController.set_global_signal-1121"><span class="linenos">1121</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.set_global_signal-1122"><a href="#CRIController.set_global_signal-1122"><span class="linenos">1122</span></a>                <span class="p">)</span>
</span><span id="CRIController.set_global_signal-1123"><a href="#CRIController.set_global_signal-1123"><span class="linenos">1123</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.set_global_signal-1124"><a href="#CRIController.set_global_signal-1124"><span class="linenos">1124</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in DIN command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.set_global_signal-1125"><a href="#CRIController.set_global_signal-1125"><span class="linenos">1125</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.set_global_signal-1126"><a href="#CRIController.set_global_signal-1126"><span class="linenos">1126</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.set_global_signal-1127"><a href="#CRIController.set_global_signal-1127"><span class="linenos">1127</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.set_global_signal-1128"><a href="#CRIController.set_global_signal-1128"><span class="linenos">1128</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.set_global_signal-1129"><a href="#CRIController.set_global_signal-1129"><span class="linenos">1129</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Set global signal</p>

<h2 id="parameters">Parameters</h2>

<p>id : int
    index of signal (0 to 99)</p>

<p>value : bool
    value to set signal to</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.load_programm" class="classattr">
                                        <input id="CRIController.load_programm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">load_programm</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">program_name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.load_programm-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.load_programm"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.load_programm-1131"><a href="#CRIController.load_programm-1131"><span class="linenos">1131</span></a>    <span class="k">def</span> <span class="nf">load_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">program_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.load_programm-1132"><a href="#CRIController.load_programm-1132"><span class="linenos">1132</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a program file from disk into the robot controller</span>
</span><span id="CRIController.load_programm-1133"><a href="#CRIController.load_programm-1133"><span class="linenos">1133</span></a>
</span><span id="CRIController.load_programm-1134"><a href="#CRIController.load_programm-1134"><span class="linenos">1134</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.load_programm-1135"><a href="#CRIController.load_programm-1135"><span class="linenos">1135</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.load_programm-1136"><a href="#CRIController.load_programm-1136"><span class="linenos">1136</span></a><span class="sd">        program_name : str</span>
</span><span id="CRIController.load_programm-1137"><a href="#CRIController.load_programm-1137"><span class="linenos">1137</span></a><span class="sd">            the name in the directory /Data/Programs/, e.g. “test.xml”</span>
</span><span id="CRIController.load_programm-1138"><a href="#CRIController.load_programm-1138"><span class="linenos">1138</span></a>
</span><span id="CRIController.load_programm-1139"><a href="#CRIController.load_programm-1139"><span class="linenos">1139</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.load_programm-1140"><a href="#CRIController.load_programm-1140"><span class="linenos">1140</span></a><span class="sd">        -------</span>
</span><span id="CRIController.load_programm-1141"><a href="#CRIController.load_programm-1141"><span class="linenos">1141</span></a><span class="sd">        bool</span>
</span><span id="CRIController.load_programm-1142"><a href="#CRIController.load_programm-1142"><span class="linenos">1142</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.load_programm-1143"><a href="#CRIController.load_programm-1143"><span class="linenos">1143</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.load_programm-1144"><a href="#CRIController.load_programm-1144"><span class="linenos">1144</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.load_programm-1145"><a href="#CRIController.load_programm-1145"><span class="linenos">1145</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD LoadProgram </span><span class="si">{</span><span class="n">program_name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.load_programm-1146"><a href="#CRIController.load_programm-1146"><span class="linenos">1146</span></a>
</span><span id="CRIController.load_programm-1147"><a href="#CRIController.load_programm-1147"><span class="linenos">1147</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.load_programm-1148"><a href="#CRIController.load_programm-1148"><span class="linenos">1148</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.load_programm-1149"><a href="#CRIController.load_programm-1149"><span class="linenos">1149</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.load_programm-1150"><a href="#CRIController.load_programm-1150"><span class="linenos">1150</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.load_programm-1151"><a href="#CRIController.load_programm-1151"><span class="linenos">1151</span></a>                <span class="p">)</span>
</span><span id="CRIController.load_programm-1152"><a href="#CRIController.load_programm-1152"><span class="linenos">1152</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.load_programm-1153"><a href="#CRIController.load_programm-1153"><span class="linenos">1153</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in load_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.load_programm-1154"><a href="#CRIController.load_programm-1154"><span class="linenos">1154</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.load_programm-1155"><a href="#CRIController.load_programm-1155"><span class="linenos">1155</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.load_programm-1156"><a href="#CRIController.load_programm-1156"><span class="linenos">1156</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.load_programm-1157"><a href="#CRIController.load_programm-1157"><span class="linenos">1157</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.load_programm-1158"><a href="#CRIController.load_programm-1158"><span class="linenos">1158</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Load a program file from disk into the robot controller</p>

<h2 id="parameters">Parameters</h2>

<p>program_name : str
    the name in the directory /Data/Programs/, e.g. “test.xml”</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.load_logic_programm" class="classattr">
                                        <input id="CRIController.load_logic_programm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">load_logic_programm</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">program_name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.load_logic_programm-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.load_logic_programm"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.load_logic_programm-1160"><a href="#CRIController.load_logic_programm-1160"><span class="linenos">1160</span></a>    <span class="k">def</span> <span class="nf">load_logic_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">program_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.load_logic_programm-1161"><a href="#CRIController.load_logic_programm-1161"><span class="linenos">1161</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a logic program file from disk into the robot controller</span>
</span><span id="CRIController.load_logic_programm-1162"><a href="#CRIController.load_logic_programm-1162"><span class="linenos">1162</span></a>
</span><span id="CRIController.load_logic_programm-1163"><a href="#CRIController.load_logic_programm-1163"><span class="linenos">1163</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.load_logic_programm-1164"><a href="#CRIController.load_logic_programm-1164"><span class="linenos">1164</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.load_logic_programm-1165"><a href="#CRIController.load_logic_programm-1165"><span class="linenos">1165</span></a><span class="sd">        program_name : str</span>
</span><span id="CRIController.load_logic_programm-1166"><a href="#CRIController.load_logic_programm-1166"><span class="linenos">1166</span></a><span class="sd">            the name in the directory /Data/Programs/, e.g. “test.xml”</span>
</span><span id="CRIController.load_logic_programm-1167"><a href="#CRIController.load_logic_programm-1167"><span class="linenos">1167</span></a>
</span><span id="CRIController.load_logic_programm-1168"><a href="#CRIController.load_logic_programm-1168"><span class="linenos">1168</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.load_logic_programm-1169"><a href="#CRIController.load_logic_programm-1169"><span class="linenos">1169</span></a><span class="sd">        -------</span>
</span><span id="CRIController.load_logic_programm-1170"><a href="#CRIController.load_logic_programm-1170"><span class="linenos">1170</span></a><span class="sd">        bool</span>
</span><span id="CRIController.load_logic_programm-1171"><a href="#CRIController.load_logic_programm-1171"><span class="linenos">1171</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.load_logic_programm-1172"><a href="#CRIController.load_logic_programm-1172"><span class="linenos">1172</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.load_logic_programm-1173"><a href="#CRIController.load_logic_programm-1173"><span class="linenos">1173</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.load_logic_programm-1174"><a href="#CRIController.load_logic_programm-1174"><span class="linenos">1174</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD LoadLogicProgram </span><span class="si">{</span><span class="n">program_name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.load_logic_programm-1175"><a href="#CRIController.load_logic_programm-1175"><span class="linenos">1175</span></a>
</span><span id="CRIController.load_logic_programm-1176"><a href="#CRIController.load_logic_programm-1176"><span class="linenos">1176</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.load_logic_programm-1177"><a href="#CRIController.load_logic_programm-1177"><span class="linenos">1177</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.load_logic_programm-1178"><a href="#CRIController.load_logic_programm-1178"><span class="linenos">1178</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.load_logic_programm-1179"><a href="#CRIController.load_logic_programm-1179"><span class="linenos">1179</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.load_logic_programm-1180"><a href="#CRIController.load_logic_programm-1180"><span class="linenos">1180</span></a>                <span class="p">)</span>
</span><span id="CRIController.load_logic_programm-1181"><a href="#CRIController.load_logic_programm-1181"><span class="linenos">1181</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.load_logic_programm-1182"><a href="#CRIController.load_logic_programm-1182"><span class="linenos">1182</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in load_logic_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.load_logic_programm-1183"><a href="#CRIController.load_logic_programm-1183"><span class="linenos">1183</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.load_logic_programm-1184"><a href="#CRIController.load_logic_programm-1184"><span class="linenos">1184</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.load_logic_programm-1185"><a href="#CRIController.load_logic_programm-1185"><span class="linenos">1185</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.load_logic_programm-1186"><a href="#CRIController.load_logic_programm-1186"><span class="linenos">1186</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.load_logic_programm-1187"><a href="#CRIController.load_logic_programm-1187"><span class="linenos">1187</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Load a logic program file from disk into the robot controller</p>

<h2 id="parameters">Parameters</h2>

<p>program_name : str
    the name in the directory /Data/Programs/, e.g. “test.xml”</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.start_programm" class="classattr">
                                        <input id="CRIController.start_programm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">start_programm</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.start_programm-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.start_programm"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.start_programm-1189"><a href="#CRIController.start_programm-1189"><span class="linenos">1189</span></a>    <span class="k">def</span> <span class="nf">start_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.start_programm-1190"><a href="#CRIController.start_programm-1190"><span class="linenos">1190</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Start currently loaded Program</span>
</span><span id="CRIController.start_programm-1191"><a href="#CRIController.start_programm-1191"><span class="linenos">1191</span></a>
</span><span id="CRIController.start_programm-1192"><a href="#CRIController.start_programm-1192"><span class="linenos">1192</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.start_programm-1193"><a href="#CRIController.start_programm-1193"><span class="linenos">1193</span></a><span class="sd">        -------</span>
</span><span id="CRIController.start_programm-1194"><a href="#CRIController.start_programm-1194"><span class="linenos">1194</span></a><span class="sd">        bool</span>
</span><span id="CRIController.start_programm-1195"><a href="#CRIController.start_programm-1195"><span class="linenos">1195</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.start_programm-1196"><a href="#CRIController.start_programm-1196"><span class="linenos">1196</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.start_programm-1197"><a href="#CRIController.start_programm-1197"><span class="linenos">1197</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.start_programm-1198"><a href="#CRIController.start_programm-1198"><span class="linenos">1198</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;CMD StartProgram&quot;</span>
</span><span id="CRIController.start_programm-1199"><a href="#CRIController.start_programm-1199"><span class="linenos">1199</span></a>
</span><span id="CRIController.start_programm-1200"><a href="#CRIController.start_programm-1200"><span class="linenos">1200</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.start_programm-1201"><a href="#CRIController.start_programm-1201"><span class="linenos">1201</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.start_programm-1202"><a href="#CRIController.start_programm-1202"><span class="linenos">1202</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.start_programm-1203"><a href="#CRIController.start_programm-1203"><span class="linenos">1203</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.start_programm-1204"><a href="#CRIController.start_programm-1204"><span class="linenos">1204</span></a>                <span class="p">)</span>
</span><span id="CRIController.start_programm-1205"><a href="#CRIController.start_programm-1205"><span class="linenos">1205</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.start_programm-1206"><a href="#CRIController.start_programm-1206"><span class="linenos">1206</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in start_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.start_programm-1207"><a href="#CRIController.start_programm-1207"><span class="linenos">1207</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.start_programm-1208"><a href="#CRIController.start_programm-1208"><span class="linenos">1208</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.start_programm-1209"><a href="#CRIController.start_programm-1209"><span class="linenos">1209</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.start_programm-1210"><a href="#CRIController.start_programm-1210"><span class="linenos">1210</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.start_programm-1211"><a href="#CRIController.start_programm-1211"><span class="linenos">1211</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Start currently loaded Program</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.stop_programm" class="classattr">
                                        <input id="CRIController.stop_programm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">stop_programm</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.stop_programm-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.stop_programm"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.stop_programm-1213"><a href="#CRIController.stop_programm-1213"><span class="linenos">1213</span></a>    <span class="k">def</span> <span class="nf">stop_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.stop_programm-1214"><a href="#CRIController.stop_programm-1214"><span class="linenos">1214</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop currently running Program</span>
</span><span id="CRIController.stop_programm-1215"><a href="#CRIController.stop_programm-1215"><span class="linenos">1215</span></a>
</span><span id="CRIController.stop_programm-1216"><a href="#CRIController.stop_programm-1216"><span class="linenos">1216</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.stop_programm-1217"><a href="#CRIController.stop_programm-1217"><span class="linenos">1217</span></a><span class="sd">        -------</span>
</span><span id="CRIController.stop_programm-1218"><a href="#CRIController.stop_programm-1218"><span class="linenos">1218</span></a><span class="sd">        bool</span>
</span><span id="CRIController.stop_programm-1219"><a href="#CRIController.stop_programm-1219"><span class="linenos">1219</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.stop_programm-1220"><a href="#CRIController.stop_programm-1220"><span class="linenos">1220</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.stop_programm-1221"><a href="#CRIController.stop_programm-1221"><span class="linenos">1221</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.stop_programm-1222"><a href="#CRIController.stop_programm-1222"><span class="linenos">1222</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;CMD StopProgram&quot;</span>
</span><span id="CRIController.stop_programm-1223"><a href="#CRIController.stop_programm-1223"><span class="linenos">1223</span></a>
</span><span id="CRIController.stop_programm-1224"><a href="#CRIController.stop_programm-1224"><span class="linenos">1224</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.stop_programm-1225"><a href="#CRIController.stop_programm-1225"><span class="linenos">1225</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.stop_programm-1226"><a href="#CRIController.stop_programm-1226"><span class="linenos">1226</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.stop_programm-1227"><a href="#CRIController.stop_programm-1227"><span class="linenos">1227</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.stop_programm-1228"><a href="#CRIController.stop_programm-1228"><span class="linenos">1228</span></a>                <span class="p">)</span>
</span><span id="CRIController.stop_programm-1229"><a href="#CRIController.stop_programm-1229"><span class="linenos">1229</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.stop_programm-1230"><a href="#CRIController.stop_programm-1230"><span class="linenos">1230</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in stop_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.stop_programm-1231"><a href="#CRIController.stop_programm-1231"><span class="linenos">1231</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.stop_programm-1232"><a href="#CRIController.stop_programm-1232"><span class="linenos">1232</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.stop_programm-1233"><a href="#CRIController.stop_programm-1233"><span class="linenos">1233</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.stop_programm-1234"><a href="#CRIController.stop_programm-1234"><span class="linenos">1234</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.stop_programm-1235"><a href="#CRIController.stop_programm-1235"><span class="linenos">1235</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Stop currently running Program</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.pause_programm" class="classattr">
                                        <input id="CRIController.pause_programm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pause_programm</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.pause_programm-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.pause_programm"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.pause_programm-1237"><a href="#CRIController.pause_programm-1237"><span class="linenos">1237</span></a>    <span class="k">def</span> <span class="nf">pause_programm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.pause_programm-1238"><a href="#CRIController.pause_programm-1238"><span class="linenos">1238</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pause currently running Program</span>
</span><span id="CRIController.pause_programm-1239"><a href="#CRIController.pause_programm-1239"><span class="linenos">1239</span></a>
</span><span id="CRIController.pause_programm-1240"><a href="#CRIController.pause_programm-1240"><span class="linenos">1240</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.pause_programm-1241"><a href="#CRIController.pause_programm-1241"><span class="linenos">1241</span></a><span class="sd">        -------</span>
</span><span id="CRIController.pause_programm-1242"><a href="#CRIController.pause_programm-1242"><span class="linenos">1242</span></a><span class="sd">        bool</span>
</span><span id="CRIController.pause_programm-1243"><a href="#CRIController.pause_programm-1243"><span class="linenos">1243</span></a><span class="sd">            `True` if request was successful</span>
</span><span id="CRIController.pause_programm-1244"><a href="#CRIController.pause_programm-1244"><span class="linenos">1244</span></a><span class="sd">            `False` if request was not successful</span>
</span><span id="CRIController.pause_programm-1245"><a href="#CRIController.pause_programm-1245"><span class="linenos">1245</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.pause_programm-1246"><a href="#CRIController.pause_programm-1246"><span class="linenos">1246</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;CMD PauseProgram&quot;</span>
</span><span id="CRIController.pause_programm-1247"><a href="#CRIController.pause_programm-1247"><span class="linenos">1247</span></a>
</span><span id="CRIController.pause_programm-1248"><a href="#CRIController.pause_programm-1248"><span class="linenos">1248</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">msg_id</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.pause_programm-1249"><a href="#CRIController.pause_programm-1249"><span class="linenos">1249</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.pause_programm-1250"><a href="#CRIController.pause_programm-1250"><span class="linenos">1250</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.pause_programm-1251"><a href="#CRIController.pause_programm-1251"><span class="linenos">1251</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.pause_programm-1252"><a href="#CRIController.pause_programm-1252"><span class="linenos">1252</span></a>                <span class="p">)</span>
</span><span id="CRIController.pause_programm-1253"><a href="#CRIController.pause_programm-1253"><span class="linenos">1253</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.pause_programm-1254"><a href="#CRIController.pause_programm-1254"><span class="linenos">1254</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in pause_program command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.pause_programm-1255"><a href="#CRIController.pause_programm-1255"><span class="linenos">1255</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.pause_programm-1256"><a href="#CRIController.pause_programm-1256"><span class="linenos">1256</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.pause_programm-1257"><a href="#CRIController.pause_programm-1257"><span class="linenos">1257</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.pause_programm-1258"><a href="#CRIController.pause_programm-1258"><span class="linenos">1258</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.pause_programm-1259"><a href="#CRIController.pause_programm-1259"><span class="linenos">1259</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Pause currently running Program</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> if request was successful
    <code>False</code> if request was not successful</p>
</div>


                            </div>
                            <div id="CRIController.upload_file" class="classattr">
                                        <input id="CRIController.upload_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">upload_file</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span>, </span><span class="param"><span class="n">target_directory</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.upload_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.upload_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.upload_file-1261"><a href="#CRIController.upload_file-1261"><span class="linenos">1261</span></a>    <span class="k">def</span> <span class="nf">upload_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span> <span class="n">target_directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.upload_file-1262"><a href="#CRIController.upload_file-1262"><span class="linenos">1262</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Uploads file to iRC into `/Data/&lt;target_directory&gt;`</span>
</span><span id="CRIController.upload_file-1263"><a href="#CRIController.upload_file-1263"><span class="linenos">1263</span></a>
</span><span id="CRIController.upload_file-1264"><a href="#CRIController.upload_file-1264"><span class="linenos">1264</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.upload_file-1265"><a href="#CRIController.upload_file-1265"><span class="linenos">1265</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.upload_file-1266"><a href="#CRIController.upload_file-1266"><span class="linenos">1266</span></a><span class="sd">        path : str | Path</span>
</span><span id="CRIController.upload_file-1267"><a href="#CRIController.upload_file-1267"><span class="linenos">1267</span></a><span class="sd">            Path to file which should be uploaded</span>
</span><span id="CRIController.upload_file-1268"><a href="#CRIController.upload_file-1268"><span class="linenos">1268</span></a>
</span><span id="CRIController.upload_file-1269"><a href="#CRIController.upload_file-1269"><span class="linenos">1269</span></a><span class="sd">        target_directory : str</span>
</span><span id="CRIController.upload_file-1270"><a href="#CRIController.upload_file-1270"><span class="linenos">1270</span></a><span class="sd">            directory on iRC `/Data/&lt;target_directory&gt;` into which file will be uploaded, e.g. `Programs` for normal robot programs</span>
</span><span id="CRIController.upload_file-1271"><a href="#CRIController.upload_file-1271"><span class="linenos">1271</span></a>
</span><span id="CRIController.upload_file-1272"><a href="#CRIController.upload_file-1272"><span class="linenos">1272</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.upload_file-1273"><a href="#CRIController.upload_file-1273"><span class="linenos">1273</span></a><span class="sd">        -------</span>
</span><span id="CRIController.upload_file-1274"><a href="#CRIController.upload_file-1274"><span class="linenos">1274</span></a><span class="sd">        bool</span>
</span><span id="CRIController.upload_file-1275"><a href="#CRIController.upload_file-1275"><span class="linenos">1275</span></a><span class="sd">            `True` file was uploaded successfully</span>
</span><span id="CRIController.upload_file-1276"><a href="#CRIController.upload_file-1276"><span class="linenos">1276</span></a><span class="sd">            `False` there was an error during upload</span>
</span><span id="CRIController.upload_file-1277"><a href="#CRIController.upload_file-1277"><span class="linenos">1277</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.upload_file-1278"><a href="#CRIController.upload_file-1278"><span class="linenos">1278</span></a>
</span><span id="CRIController.upload_file-1279"><a href="#CRIController.upload_file-1279"><span class="linenos">1279</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
</span><span id="CRIController.upload_file-1280"><a href="#CRIController.upload_file-1280"><span class="linenos">1280</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">path</span>
</span><span id="CRIController.upload_file-1281"><a href="#CRIController.upload_file-1281"><span class="linenos">1281</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="CRIController.upload_file-1282"><a href="#CRIController.upload_file-1282"><span class="linenos">1282</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="CRIController.upload_file-1283"><a href="#CRIController.upload_file-1283"><span class="linenos">1283</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.upload_file-1284"><a href="#CRIController.upload_file-1284"><span class="linenos">1284</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.upload_file-1285"><a href="#CRIController.upload_file-1285"><span class="linenos">1285</span></a>
</span><span id="CRIController.upload_file-1286"><a href="#CRIController.upload_file-1286"><span class="linenos">1286</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="CRIController.upload_file-1287"><a href="#CRIController.upload_file-1287"><span class="linenos">1287</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span><span id="CRIController.upload_file-1288"><a href="#CRIController.upload_file-1288"><span class="linenos">1288</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="CRIController.upload_file-1289"><a href="#CRIController.upload_file-1289"><span class="linenos">1289</span></a>                <span class="k">while</span> <span class="n">line</span> <span class="o">:=</span> <span class="n">fp</span><span class="o">.</span><span class="n">readline</span><span class="p">():</span>
</span><span id="CRIController.upload_file-1290"><a href="#CRIController.upload_file-1290"><span class="linenos">1290</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="CRIController.upload_file-1291"><a href="#CRIController.upload_file-1291"><span class="linenos">1291</span></a>                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="CRIController.upload_file-1292"><a href="#CRIController.upload_file-1292"><span class="linenos">1292</span></a>
</span><span id="CRIController.upload_file-1293"><a href="#CRIController.upload_file-1293"><span class="linenos">1293</span></a>        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="CRIController.upload_file-1294"><a href="#CRIController.upload_file-1294"><span class="linenos">1294</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Error reading </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="CRIController.upload_file-1295"><a href="#CRIController.upload_file-1295"><span class="linenos">1295</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.upload_file-1296"><a href="#CRIController.upload_file-1296"><span class="linenos">1296</span></a>
</span><span id="CRIController.upload_file-1297"><a href="#CRIController.upload_file-1297"><span class="linenos">1297</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD UploadFileInit </span><span class="si">{</span><span class="n">target_directory</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;/&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span><span class="si">}</span><span class="s2"> 0&quot;</span>
</span><span id="CRIController.upload_file-1298"><a href="#CRIController.upload_file-1298"><span class="linenos">1298</span></a>
</span><span id="CRIController.upload_file-1299"><a href="#CRIController.upload_file-1299"><span class="linenos">1299</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.upload_file-1300"><a href="#CRIController.upload_file-1300"><span class="linenos">1300</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.upload_file-1301"><a href="#CRIController.upload_file-1301"><span class="linenos">1301</span></a>
</span><span id="CRIController.upload_file-1302"><a href="#CRIController.upload_file-1302"><span class="linenos">1302</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
</span><span id="CRIController.upload_file-1303"><a href="#CRIController.upload_file-1303"><span class="linenos">1303</span></a>            <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CMD UploadFileLine </span><span class="si">{</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="CRIController.upload_file-1304"><a href="#CRIController.upload_file-1304"><span class="linenos">1304</span></a>
</span><span id="CRIController.upload_file-1305"><a href="#CRIController.upload_file-1305"><span class="linenos">1305</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.upload_file-1306"><a href="#CRIController.upload_file-1306"><span class="linenos">1306</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.upload_file-1307"><a href="#CRIController.upload_file-1307"><span class="linenos">1307</span></a>
</span><span id="CRIController.upload_file-1308"><a href="#CRIController.upload_file-1308"><span class="linenos">1308</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;CMD UploadFileFinish&quot;</span>
</span><span id="CRIController.upload_file-1309"><a href="#CRIController.upload_file-1309"><span class="linenos">1309</span></a>
</span><span id="CRIController.upload_file-1310"><a href="#CRIController.upload_file-1310"><span class="linenos">1310</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.upload_file-1311"><a href="#CRIController.upload_file-1311"><span class="linenos">1311</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Uploads file to iRC into <code>/Data/&lt;target_directory&gt;</code></p>

<h2 id="parameters">Parameters</h2>

<p>path : str | Path
    Path to file which should be uploaded</p>

<p>target_directory : str
    directory on iRC <code>/Data/&lt;target_directory&gt;</code> into which file will be uploaded, e.g. <code>Programs</code> for normal robot programs</p>

<h2 id="returns">Returns</h2>

<p>bool
    <code>True</code> file was uploaded successfully
    <code>False</code> there was an error during upload</p>
</div>


                            </div>
                            <div id="CRIController.enable_can_bridge" class="classattr">
                                        <input id="CRIController.enable_can_bridge-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">enable_can_bridge</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">enabled</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="CRIController.enable_can_bridge-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.enable_can_bridge"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.enable_can_bridge-1313"><a href="#CRIController.enable_can_bridge-1313"><span class="linenos">1313</span></a>    <span class="k">def</span> <span class="nf">enable_can_bridge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.enable_can_bridge-1314"><a href="#CRIController.enable_can_bridge-1314"><span class="linenos">1314</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Enables or diables CAN bridge mode. All other functions are disabled in CAN bridge mode.</span>
</span><span id="CRIController.enable_can_bridge-1315"><a href="#CRIController.enable_can_bridge-1315"><span class="linenos">1315</span></a>
</span><span id="CRIController.enable_can_bridge-1316"><a href="#CRIController.enable_can_bridge-1316"><span class="linenos">1316</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.enable_can_bridge-1317"><a href="#CRIController.enable_can_bridge-1317"><span class="linenos">1317</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.enable_can_bridge-1318"><a href="#CRIController.enable_can_bridge-1318"><span class="linenos">1318</span></a><span class="sd">        enabled : bool</span>
</span><span id="CRIController.enable_can_bridge-1319"><a href="#CRIController.enable_can_bridge-1319"><span class="linenos">1319</span></a><span class="sd">            `True` bridge mode enabled</span>
</span><span id="CRIController.enable_can_bridge-1320"><a href="#CRIController.enable_can_bridge-1320"><span class="linenos">1320</span></a><span class="sd">            `False` bridge mode disabled</span>
</span><span id="CRIController.enable_can_bridge-1321"><a href="#CRIController.enable_can_bridge-1321"><span class="linenos">1321</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.enable_can_bridge-1322"><a href="#CRIController.enable_can_bridge-1322"><span class="linenos">1322</span></a>        <span class="k">if</span> <span class="n">enabled</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="CRIController.enable_can_bridge-1323"><a href="#CRIController.enable_can_bridge-1323"><span class="linenos">1323</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="CRIController.enable_can_bridge-1324"><a href="#CRIController.enable_can_bridge-1324"><span class="linenos">1324</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CANBridge SwitchOn&quot;</span><span class="p">)</span>
</span><span id="CRIController.enable_can_bridge-1325"><a href="#CRIController.enable_can_bridge-1325"><span class="linenos">1325</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.enable_can_bridge-1326"><a href="#CRIController.enable_can_bridge-1326"><span class="linenos">1326</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;CANBridge SwitchOff&quot;</span><span class="p">)</span>
</span><span id="CRIController.enable_can_bridge-1327"><a href="#CRIController.enable_can_bridge-1327"><span class="linenos">1327</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span> <span class="o">=</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Enables or diables CAN bridge mode. All other functions are disabled in CAN bridge mode.</p>

<h2 id="parameters">Parameters</h2>

<p>enabled : bool
    <code>True</code> bridge mode enabled
    <code>False</code> bridge mode disabled</p>
</div>


                            </div>
                            <div id="CRIController.can_send" class="classattr">
                                        <input id="CRIController.can_send-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">can_send</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">msg_id</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">length</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">data</span><span class="p">:</span> <span class="nb">bytearray</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="CRIController.can_send-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.can_send"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.can_send-1329"><a href="#CRIController.can_send-1329"><span class="linenos">1329</span></a>    <span class="k">def</span> <span class="nf">can_send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytearray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.can_send-1330"><a href="#CRIController.can_send-1330"><span class="linenos">1330</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Send CAN message in CAN bridge mode.</span>
</span><span id="CRIController.can_send-1331"><a href="#CRIController.can_send-1331"><span class="linenos">1331</span></a>
</span><span id="CRIController.can_send-1332"><a href="#CRIController.can_send-1332"><span class="linenos">1332</span></a><span class="sd">        Parameters</span>
</span><span id="CRIController.can_send-1333"><a href="#CRIController.can_send-1333"><span class="linenos">1333</span></a><span class="sd">        ----------</span>
</span><span id="CRIController.can_send-1334"><a href="#CRIController.can_send-1334"><span class="linenos">1334</span></a><span class="sd">        msg_id : int</span>
</span><span id="CRIController.can_send-1335"><a href="#CRIController.can_send-1335"><span class="linenos">1335</span></a><span class="sd">            message id of can message</span>
</span><span id="CRIController.can_send-1336"><a href="#CRIController.can_send-1336"><span class="linenos">1336</span></a><span class="sd">        length : int</span>
</span><span id="CRIController.can_send-1337"><a href="#CRIController.can_send-1337"><span class="linenos">1337</span></a><span class="sd">            length of data to send. Actual length used of the 8 data bytes</span>
</span><span id="CRIController.can_send-1338"><a href="#CRIController.can_send-1338"><span class="linenos">1338</span></a><span class="sd">        data : bytearray</span>
</span><span id="CRIController.can_send-1339"><a href="#CRIController.can_send-1339"><span class="linenos">1339</span></a><span class="sd">            data for CAN message always 8 bytes</span>
</span><span id="CRIController.can_send-1340"><a href="#CRIController.can_send-1340"><span class="linenos">1340</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.can_send-1341"><a href="#CRIController.can_send-1341"><span class="linenos">1341</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span><span class="p">:</span>
</span><span id="CRIController.can_send-1342"><a href="#CRIController.can_send-1342"><span class="linenos">1342</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;can_send: CAN mode not enabled&quot;</span><span class="p">)</span>
</span><span id="CRIController.can_send-1343"><a href="#CRIController.can_send-1343"><span class="linenos">1343</span></a>            <span class="k">return</span>
</span><span id="CRIController.can_send-1344"><a href="#CRIController.can_send-1344"><span class="linenos">1344</span></a>
</span><span id="CRIController.can_send-1345"><a href="#CRIController.can_send-1345"><span class="linenos">1345</span></a>        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CANBridge Msg ID </span><span class="si">{</span><span class="n">msg_id</span><span class="si">}</span><span class="s2"> Len </span><span class="si">{</span><span class="n">length</span><span class="si">}</span><span class="s2"> Data &quot;</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="CRIController.can_send-1346"><a href="#CRIController.can_send-1346"><span class="linenos">1346</span></a>            <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
</span><span id="CRIController.can_send-1347"><a href="#CRIController.can_send-1347"><span class="linenos">1347</span></a>        <span class="p">)</span>
</span><span id="CRIController.can_send-1348"><a href="#CRIController.can_send-1348"><span class="linenos">1348</span></a>
</span><span id="CRIController.can_send-1349"><a href="#CRIController.can_send-1349"><span class="linenos">1349</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Send CAN message in CAN bridge mode.</p>

<h2 id="parameters">Parameters</h2>

<p>msg_id : int
    message id of can message
length : int
    length of data to send. Actual length used of the 8 data bytes
data : bytearray
    data for CAN message always 8 bytes</p>
</div>


                            </div>
                            <div id="CRIController.can_receive" class="classattr">
                                        <input id="CRIController.can_receive-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">can_receive</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="CRIController.can_receive-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.can_receive"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.can_receive-1351"><a href="#CRIController.can_receive-1351"><span class="linenos">1351</span></a>    <span class="k">def</span> <span class="nf">can_receive</span><span class="p">(</span>
</span><span id="CRIController.can_receive-1352"><a href="#CRIController.can_receive-1352"><span class="linenos">1352</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CRIController.can_receive-1353"><a href="#CRIController.can_receive-1353"><span class="linenos">1353</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.can_receive-1354"><a href="#CRIController.can_receive-1354"><span class="linenos">1354</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Receive CAN message in CAN bridge mode from the recveive queue.</span>
</span><span id="CRIController.can_receive-1355"><a href="#CRIController.can_receive-1355"><span class="linenos">1355</span></a>
</span><span id="CRIController.can_receive-1356"><a href="#CRIController.can_receive-1356"><span class="linenos">1356</span></a><span class="sd">        Returns</span>
</span><span id="CRIController.can_receive-1357"><a href="#CRIController.can_receive-1357"><span class="linenos">1357</span></a><span class="sd">        -------</span>
</span><span id="CRIController.can_receive-1358"><a href="#CRIController.can_receive-1358"><span class="linenos">1358</span></a><span class="sd">        tuple[int, int, bytearray] | None</span>
</span><span id="CRIController.can_receive-1359"><a href="#CRIController.can_receive-1359"><span class="linenos">1359</span></a><span class="sd">            Returns a tuple of (msg_id, length, data) if a message was received or None if nothing was received within the timeout.</span>
</span><span id="CRIController.can_receive-1360"><a href="#CRIController.can_receive-1360"><span class="linenos">1360</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.can_receive-1361"><a href="#CRIController.can_receive-1361"><span class="linenos">1361</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_mode</span><span class="p">:</span>
</span><span id="CRIController.can_receive-1362"><a href="#CRIController.can_receive-1362"><span class="linenos">1362</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;can_receive: CAN mode not enabled&quot;</span><span class="p">)</span>
</span><span id="CRIController.can_receive-1363"><a href="#CRIController.can_receive-1363"><span class="linenos">1363</span></a>            <span class="k">return</span>
</span><span id="CRIController.can_receive-1364"><a href="#CRIController.can_receive-1364"><span class="linenos">1364</span></a>
</span><span id="CRIController.can_receive-1365"><a href="#CRIController.can_receive-1365"><span class="linenos">1365</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="CRIController.can_receive-1366"><a href="#CRIController.can_receive-1366"><span class="linenos">1366</span></a>            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_queue</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">blocking</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
</span><span id="CRIController.can_receive-1367"><a href="#CRIController.can_receive-1367"><span class="linenos">1367</span></a>        <span class="k">except</span> <span class="n">Empty</span><span class="p">:</span>
</span><span id="CRIController.can_receive-1368"><a href="#CRIController.can_receive-1368"><span class="linenos">1368</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="CRIController.can_receive-1369"><a href="#CRIController.can_receive-1369"><span class="linenos">1369</span></a>
</span><span id="CRIController.can_receive-1370"><a href="#CRIController.can_receive-1370"><span class="linenos">1370</span></a>        <span class="k">return</span> <span class="n">item</span>
</span></pre></div>


            <div class="docstring"><p>Receive CAN message in CAN bridge mode from the recveive queue.</p>

<h2 id="returns">Returns</h2>

<p>tuple[int, int, bytearray] | None
    Returns a tuple of (msg_id, length, data) if a message was received or None if nothing was received within the timeout.</p>
</div>


                            </div>
                            <div id="CRIController.get_board_temperatures" class="classattr">
                                        <input id="CRIController.get_board_temperatures-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_board_temperatures</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>, </span><span class="param"><span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.get_board_temperatures-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.get_board_temperatures"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.get_board_temperatures-1372"><a href="#CRIController.get_board_temperatures-1372"><span class="linenos">1372</span></a>    <span class="k">def</span> <span class="nf">get_board_temperatures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.get_board_temperatures-1373"><a href="#CRIController.get_board_temperatures-1373"><span class="linenos">1373</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Receive motor controller PCB temperatures and save in robot state</span>
</span><span id="CRIController.get_board_temperatures-1374"><a href="#CRIController.get_board_temperatures-1374"><span class="linenos">1374</span></a>
</span><span id="CRIController.get_board_temperatures-1375"><a href="#CRIController.get_board_temperatures-1375"><span class="linenos">1375</span></a><span class="sd">            Parameters</span>
</span><span id="CRIController.get_board_temperatures-1376"><a href="#CRIController.get_board_temperatures-1376"><span class="linenos">1376</span></a><span class="sd">            ----------</span>
</span><span id="CRIController.get_board_temperatures-1377"><a href="#CRIController.get_board_temperatures-1377"><span class="linenos">1377</span></a><span class="sd">            blocking: bool</span>
</span><span id="CRIController.get_board_temperatures-1378"><a href="#CRIController.get_board_temperatures-1378"><span class="linenos">1378</span></a><span class="sd">                wait for response, always returns True if not waiting</span>
</span><span id="CRIController.get_board_temperatures-1379"><a href="#CRIController.get_board_temperatures-1379"><span class="linenos">1379</span></a><span class="sd">            </span>
</span><span id="CRIController.get_board_temperatures-1380"><a href="#CRIController.get_board_temperatures-1380"><span class="linenos">1380</span></a><span class="sd">            timeout: float | None</span>
</span><span id="CRIController.get_board_temperatures-1381"><a href="#CRIController.get_board_temperatures-1381"><span class="linenos">1381</span></a><span class="sd">                timeout for waiting in seconds or None for infinite waiting</span>
</span><span id="CRIController.get_board_temperatures-1382"><a href="#CRIController.get_board_temperatures-1382"><span class="linenos">1382</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.get_board_temperatures-1383"><a href="#CRIController.get_board_temperatures-1383"><span class="linenos">1383</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.get_board_temperatures-1384"><a href="#CRIController.get_board_temperatures-1384"><span class="linenos">1384</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;SYSTEM GetBoardTemp&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;info_boardtemp&quot;</span><span class="p">)</span>
</span><span id="CRIController.get_board_temperatures-1385"><a href="#CRIController.get_board_temperatures-1385"><span class="linenos">1385</span></a>            <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="CRIController.get_board_temperatures-1386"><a href="#CRIController.get_board_temperatures-1386"><span class="linenos">1386</span></a>        <span class="p">):</span>
</span><span id="CRIController.get_board_temperatures-1387"><a href="#CRIController.get_board_temperatures-1387"><span class="linenos">1387</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.get_board_temperatures-1388"><a href="#CRIController.get_board_temperatures-1388"><span class="linenos">1388</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.get_board_temperatures-1389"><a href="#CRIController.get_board_temperatures-1389"><span class="linenos">1389</span></a>                    <span class="s2">&quot;info_boardtemp&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.get_board_temperatures-1390"><a href="#CRIController.get_board_temperatures-1390"><span class="linenos">1390</span></a>                <span class="p">)</span>
</span><span id="CRIController.get_board_temperatures-1391"><a href="#CRIController.get_board_temperatures-1391"><span class="linenos">1391</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.get_board_temperatures-1392"><a href="#CRIController.get_board_temperatures-1392"><span class="linenos">1392</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in GetBoardTemp command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.get_board_temperatures-1393"><a href="#CRIController.get_board_temperatures-1393"><span class="linenos">1393</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.get_board_temperatures-1394"><a href="#CRIController.get_board_temperatures-1394"><span class="linenos">1394</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.get_board_temperatures-1395"><a href="#CRIController.get_board_temperatures-1395"><span class="linenos">1395</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.get_board_temperatures-1396"><a href="#CRIController.get_board_temperatures-1396"><span class="linenos">1396</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.get_board_temperatures-1397"><a href="#CRIController.get_board_temperatures-1397"><span class="linenos">1397</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Receive motor controller PCB temperatures and save in robot state</p>

<h2 id="parameters">Parameters</h2>

<p>blocking: bool
    wait for response, always returns True if not waiting</p>

<p>timeout: float | None
    timeout for waiting in seconds or None for infinite waiting</p>
</div>


                            </div>
                            <div id="CRIController.get_motor_temperatures" class="classattr">
                                        <input id="CRIController.get_motor_temperatures-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_motor_temperatures</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>, </span><span class="param"><span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="CRIController.get_motor_temperatures-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.get_motor_temperatures"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.get_motor_temperatures-1399"><a href="#CRIController.get_motor_temperatures-1399"><span class="linenos">1399</span></a>    <span class="k">def</span> <span class="nf">get_motor_temperatures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="CRIController.get_motor_temperatures-1400"><a href="#CRIController.get_motor_temperatures-1400"><span class="linenos">1400</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Receive motor temperatures and save in robot state</span>
</span><span id="CRIController.get_motor_temperatures-1401"><a href="#CRIController.get_motor_temperatures-1401"><span class="linenos">1401</span></a>
</span><span id="CRIController.get_motor_temperatures-1402"><a href="#CRIController.get_motor_temperatures-1402"><span class="linenos">1402</span></a><span class="sd">            Parameters</span>
</span><span id="CRIController.get_motor_temperatures-1403"><a href="#CRIController.get_motor_temperatures-1403"><span class="linenos">1403</span></a><span class="sd">            ----------</span>
</span><span id="CRIController.get_motor_temperatures-1404"><a href="#CRIController.get_motor_temperatures-1404"><span class="linenos">1404</span></a><span class="sd">            blocking: bool</span>
</span><span id="CRIController.get_motor_temperatures-1405"><a href="#CRIController.get_motor_temperatures-1405"><span class="linenos">1405</span></a><span class="sd">                wait for response, always returns True if not waiting</span>
</span><span id="CRIController.get_motor_temperatures-1406"><a href="#CRIController.get_motor_temperatures-1406"><span class="linenos">1406</span></a><span class="sd">            </span>
</span><span id="CRIController.get_motor_temperatures-1407"><a href="#CRIController.get_motor_temperatures-1407"><span class="linenos">1407</span></a><span class="sd">            timeout: float | None</span>
</span><span id="CRIController.get_motor_temperatures-1408"><a href="#CRIController.get_motor_temperatures-1408"><span class="linenos">1408</span></a><span class="sd">                timeout for waiting in seconds or None for infinite waiting</span>
</span><span id="CRIController.get_motor_temperatures-1409"><a href="#CRIController.get_motor_temperatures-1409"><span class="linenos">1409</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CRIController.get_motor_temperatures-1410"><a href="#CRIController.get_motor_temperatures-1410"><span class="linenos">1410</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.get_motor_temperatures-1411"><a href="#CRIController.get_motor_temperatures-1411"><span class="linenos">1411</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="s2">&quot;SYSTEM GetMotorTemp&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;info_motortemp&quot;</span><span class="p">)</span>
</span><span id="CRIController.get_motor_temperatures-1412"><a href="#CRIController.get_motor_temperatures-1412"><span class="linenos">1412</span></a>            <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="CRIController.get_motor_temperatures-1413"><a href="#CRIController.get_motor_temperatures-1413"><span class="linenos">1413</span></a>        <span class="p">):</span>
</span><span id="CRIController.get_motor_temperatures-1414"><a href="#CRIController.get_motor_temperatures-1414"><span class="linenos">1414</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="CRIController.get_motor_temperatures-1415"><a href="#CRIController.get_motor_temperatures-1415"><span class="linenos">1415</span></a>                <span class="n">error_msg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_answer</span><span class="p">(</span>
</span><span id="CRIController.get_motor_temperatures-1416"><a href="#CRIController.get_motor_temperatures-1416"><span class="linenos">1416</span></a>                    <span class="s2">&quot;info_motortemp&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_ANSWER_TIMEOUT</span>
</span><span id="CRIController.get_motor_temperatures-1417"><a href="#CRIController.get_motor_temperatures-1417"><span class="linenos">1417</span></a>                <span class="p">)</span>
</span><span id="CRIController.get_motor_temperatures-1418"><a href="#CRIController.get_motor_temperatures-1418"><span class="linenos">1418</span></a>            <span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CRIController.get_motor_temperatures-1419"><a href="#CRIController.get_motor_temperatures-1419"><span class="linenos">1419</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Error in GetMotorTemp command: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">error_msg</span><span class="p">)</span>
</span><span id="CRIController.get_motor_temperatures-1420"><a href="#CRIController.get_motor_temperatures-1420"><span class="linenos">1420</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="CRIController.get_motor_temperatures-1421"><a href="#CRIController.get_motor_temperatures-1421"><span class="linenos">1421</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.get_motor_temperatures-1422"><a href="#CRIController.get_motor_temperatures-1422"><span class="linenos">1422</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="CRIController.get_motor_temperatures-1423"><a href="#CRIController.get_motor_temperatures-1423"><span class="linenos">1423</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CRIController.get_motor_temperatures-1424"><a href="#CRIController.get_motor_temperatures-1424"><span class="linenos">1424</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Receive motor temperatures and save in robot state</p>

<h2 id="parameters">Parameters</h2>

<p>blocking: bool
    wait for response, always returns True if not waiting</p>

<p>timeout: float | None
    timeout for waiting in seconds or None for infinite waiting</p>
</div>


                            </div>
                </section>
                <section id="CRIController.MotionType">
                            <input id="CRIController.MotionType-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">CRIController.MotionType</span><wbr>(<span class="base">enum.Enum</span>):

                <label class="view-source-button" for="CRIController.MotionType-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CRIController.MotionType"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CRIController.MotionType-28"><a href="#CRIController.MotionType-28"><span class="linenos">28</span></a>    <span class="k">class</span> <span class="nc">MotionType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="CRIController.MotionType-29"><a href="#CRIController.MotionType-29"><span class="linenos">29</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Robot Motion Type for Jogging&quot;&quot;&quot;</span>
</span><span id="CRIController.MotionType-30"><a href="#CRIController.MotionType-30"><span class="linenos">30</span></a>
</span><span id="CRIController.MotionType-31"><a href="#CRIController.MotionType-31"><span class="linenos">31</span></a>        <span class="n">Joint</span> <span class="o">=</span> <span class="s2">&quot;Joint&quot;</span>
</span><span id="CRIController.MotionType-32"><a href="#CRIController.MotionType-32"><span class="linenos">32</span></a>        <span class="n">CartBase</span> <span class="o">=</span> <span class="s2">&quot;CartBase&quot;</span>
</span><span id="CRIController.MotionType-33"><a href="#CRIController.MotionType-33"><span class="linenos">33</span></a>        <span class="n">CartTool</span> <span class="o">=</span> <span class="s2">&quot;CartTool&quot;</span>
</span><span id="CRIController.MotionType-34"><a href="#CRIController.MotionType-34"><span class="linenos">34</span></a>        <span class="n">Platform</span> <span class="o">=</span> <span class="s2">&quot;Platform&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Robot Motion Type for Jogging</p>
</div>


                            <div id="CRIController.MotionType.Joint" class="classattr">
                                <div class="attr variable">
            <span class="name">Joint</span>        =
<span class="default_value">&lt;MotionType.Joint: &#39;Joint&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#CRIController.MotionType.Joint"></a>
    
    

                            </div>
                            <div id="CRIController.MotionType.CartBase" class="classattr">
                                <div class="attr variable">
            <span class="name">CartBase</span>        =
<span class="default_value">&lt;MotionType.CartBase: &#39;CartBase&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#CRIController.MotionType.CartBase"></a>
    
    

                            </div>
                            <div id="CRIController.MotionType.CartTool" class="classattr">
                                <div class="attr variable">
            <span class="name">CartTool</span>        =
<span class="default_value">&lt;MotionType.CartTool: &#39;CartTool&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#CRIController.MotionType.CartTool"></a>
    
    

                            </div>
                            <div id="CRIController.MotionType.Platform" class="classattr">
                                <div class="attr variable">
            <span class="name">Platform</span>        =
<span class="default_value">&lt;MotionType.Platform: &#39;Platform&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#CRIController.MotionType.Platform"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>enum.Enum</dt>
                                <dd id="CRIController.MotionType.name" class="variable">name</dd>
                <dd id="CRIController.MotionType.value" class="variable">value</dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>